<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Ethereum</title>
      <link href="/2023/05/22/ethereum/"/>
      <url>/2023/05/22/ethereum/</url>
      
        <content type="html"><![CDATA[<h1 id="Ethereum"><a href="#Ethereum" class="headerlink" title="Ethereum"></a>Ethereum</h1><h2 id="What-is-Ethereum"><a href="#What-is-Ethereum" class="headerlink" title="What is Ethereum"></a>What is Ethereum</h2><p>Ethereum is a deterministic but practical unbounded state machine, consisting of a global accessible singlton state a vm that applies changes to that state.</p><h2 id="Properties-of-Ethereum"><a href="#Properties-of-Ethereum" class="headerlink" title="Properties of Ethereum"></a>Properties of Ethereum</h2><ol><li><p>Truly global singlton<br>Ethereum is possible the first global singlton computer ever, that is fundamental not localized. Etherrum does not reside in any single machine, no physical presence in the world.</p></li><li><p>Cencorship resistance<br>No one owner Ethereum or control it. </p></li><li><p>Ubiquitous and Accessible.<br>if we want to write to the Ethereum computer, we only need have eth on top of the internet conection - to pay gas.<br>solidity is similar to javascript. so the learning curb for new dev is not that particular difficult.</p></li><li><p>Mutil-User<br>Wide input range of the keccack256 hash function, has a practical infinite range possible of creating account. the range is 2^160</p></li><li><p>Verifiable &amp; Auditable<br>When we deploy the smart contract, itâ€™s permenant unless u explicitly code in clause with a call to <code>selfdestruct</code>.</p></li></ol><h2 id="Ethereum-vs-bitcoin"><a href="#Ethereum-vs-bitcoin" class="headerlink" title="Ethereum vs bitcoin"></a>Ethereum vs bitcoin</h2><p>one of a key different between Ethereum and bitcoin is that Ethereum has a vm built into it that is support Turing-complete language. which means developers can build arbitrary application and program on top of it.<br>In contrast. bitcoin script language is <b>purposefully restricted</b> to simple true&#x2F;false evaluation of condition correlating to whether or not UTXOs can be spent. itâ€™s not allow loop.</p><blockquote><p>Program is written in Turning-complete language have a properties that make it impossible to tell if those programs will ever terminated.</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>because Ethereum lanuage is Turning-complete lanuage. so if we deploy above code in block, what will happend? A minaer would receive a transaction, add it to their transaction memory pool, mine a block. add the transaction to block, then broadcast the block to network. now, all the other node in the network will try to run this transaction on their owner machine, they will be stuck in a infinity loop..!</p><p>In order to prevent such attack occurs. Etherrum design a vm to run transactions within. it called EVM(Ethereum Virtual Machine)<br><strong>Other differences between Ethereum and Bitcoin</strong><br>Hereâ€™s the information formatted as a table in Markdown:</p><table><thead><tr><th></th><th>ETHEREUM</th><th>BITCOIN</th></tr></thead><tbody><tr><td>Consensus Mechanism</td><td>Proof of Stake</td><td>Proof of Work</td></tr><tr><td>Accounting System</td><td>Account Model</td><td>UTXO Model</td></tr><tr><td>Public Key Cryptography</td><td>secp256k1 elliptic curve</td><td>secp256k1 elliptic curve</td></tr><tr><td>Stale&#x2F;Orphan Blocks</td><td>Rewarded (Ommer Blocks)</td><td>Not Rewarded</td></tr><tr><td>Block Time</td><td>Approx every 12 seconds</td><td>Approx every 10 minutes</td></tr><tr><td>Network Difficulty</td><td>Adjusted every block</td><td>Every 2016 blocks</td></tr><tr><td>Language Support</td><td>Turing Complete smart contracts, custom VM</td><td>non-Turing Complete scripts, VM operations cost gas</td></tr></tbody></table><h2 id="EVM"><a href="#EVM" class="headerlink" title="EVM"></a>EVM</h2><p>The EVM is similar to the JVM. In fact, JVM was considered as an optional to build Ethereum of before development began on the EVM. the problem is, the EVM had very specific requirements in order to run decentralized blockchain. Take, for example, that infinite loop from the previous section:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>how could we create a environment in which code like this would not be able to run infinitely.<br>it turns simplest way to do this by adding the monetary cost of each operation. this cost in Ethereum called <strong>â€œGASâ€</strong>.</p><h2 id="GAS"><a href="#GAS" class="headerlink" title="GAS"></a>GAS</h2><p>Gas is a measurement of the cost to each operation that relates to the computation cost that the operation incurs on the network. So if you are making every node in the network do some kind of computationally expensive task every time they need to verify your transaction, youâ€™ll need to pay for significantly more than a simple transaction that is sending money from one individual to another </p><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230522174233FDzPxX.png" alt="Picsee-20230522174233.png"></p><blockquote><p>Even though the above cost is â€œfixedâ€, the actual price of the gas ever changed. </p></blockquote><p>We can split these operations up into a several categories:</p><p>Arithmetic (i.e. ADD, DIV, etc.)<br>Information about the current context of the transaction (i.e. TIMESTAMP , CALLVALUE, etc.)<br>Operations that manipulate&#x2F;retrieve from temporary memory (i.e. MSTORE, PUSH32, etc.)<br>Operations that manipulate&#x2F;retrieve from persistent memory (i.e. SSTORE, CREATE, etc.)<br>Control Flow Operations that provide us with loops (i.e. JUMP, JUMPI, etc.)</p><p>if u want to take a look permanent state, u need to cost more gas than Arithmetic operations.</p><p>The Gas prices, Benchmarking centerinally help us to know gas prices. although in some ways this can be a bit of a guessing game. the goal is to find a gas cost that represents of the amount of starin the operation takes on the network.</p><h2 id="FORK"><a href="#FORK" class="headerlink" title="FORK"></a>FORK</h2><h3 id="DOS-denial-of-service"><a href="#DOS-denial-of-service" class="headerlink" title="DOS (denial of service)"></a>DOS (denial of service)</h3><p>In the past, attarckers try to exploit any discrepancies between computations  expensive operation and their associated gas costs. These attack refrence to <strong>â€œDOSâ€</strong> they will slow the network to a crwl and deny uses of the service. Due of this, Ethereum upgrade the vm in order to adjust gas costs.</p><p>How does a decentralized network upgrade a vm running on thousands of machines? the answer is <strong>FORK</strong></p><h3 id="Understanding-Fork"><a href="#Understanding-Fork" class="headerlink" title="Understanding Fork."></a>Understanding Fork.</h3><p>Part of philosophy of Ethereum is embrace change and move fast. As such, Ethereum design with the ability to conduct upgrade. and build in a process for suggesting improvements to the system. Each upgrate is spcific in an <strong>Ethereum improvement proposal</strong> or <strong>EIP</strong> for shot.Anyone can suggest standards for Smart Contracts like the popular <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md">EIP20 Token Standard</a>  or changes to the Virtual Machine itself like this <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-7.md">addition of the DELEGATECALL opcode</a>. Updates to the VM require forks. To understand why, letâ€™s consider how the EVM works.</p><p>Several teams used this specification and implemented the EVM in different languages. Each of these EVM implementations is called an <strong>Ethereum Client</strong>. Two commonly used Ethereum clients today are <strong>Erigon</strong> and <strong>Geth</strong> both written in Go (Parity used to be a popular client but was deprecated in 2020).</p><p>Some upgrads to the evm are planned and other is impromptu response for attrack. Either way, when these changes are to be adopted a fork occurs. this is because active nodes need to update their client with the latest changes spcific by the EIPs. itâ€™s called â€œforkâ€ because some node may choose upgrate and other may choose not.</p><blockquote><p>Soft fork, backword compatible.</p></blockquote><p>In other cases, especially updates that have <strong>political implications</strong>, clients may not adopt the new changes and may even fork client implementations. This is what happened in the case of the the <strong>DAO Fork</strong> which was a particularly contentious fork splitting the network into two competing blockchains: Ethereum and Ethereum Classic. You can see an example of a forked client by looking at the version of Geth that is maintained by the Ethereum Classic Labs.</p><blockquote><p><a href="https://ethereum.stackexchange.com/questions/13014/summary-and-history-of-the-ethereum-hard-forks/13015#13015">Ethereum hard fork list</a></p></blockquote><h1 id="POS"><a href="#POS" class="headerlink" title="POS"></a>POS</h1><p>POS(Proof of stake), as know as â€œmergeâ€, the propoties of that Ethereum change POW to POS is</p><ul><li>more security</li><li>less energy</li><li>greater scalablities.</li></ul><h2 id="HOW-POS-Works"><a href="#HOW-POS-Works" class="headerlink" title="HOW POS Works"></a>HOW POS Works</h2><p>In POS, the energy requirement become a validator is much lower and can be done by individual without a high overhead energy cost.</p><p>Instead of using mass amount of electricity, validators are require to stake 32 ETH by deposing it into contract to have ability to validate blocks. The stake ETH is used as collerator against bad actors in the network. If any given any validators acts dishonest or malicious they put themselves at risk of losing their stake ETH.</p><p>Rather than all validators mine a block same time, the network randomly choose a validator to purpose a block every 12 seconds, then all of the other validators veirfy that the purpose block is correct, and the cycle repeats. </p><h2 id="How-POS-affects-dev"><a href="#How-POS-affects-dev" class="headerlink" title="How POS affects dev"></a>How POS affects dev</h2><p>How PoS affects Ethereum Development<br>One of the largest ways that PoS affects Ethereum developers is with a new framework for block finality. Finality in blocks refers to how confident you are that the given block will not change or get forked away. For blocks that have been on the network for a very long time (older blocks) it is extremely unlikely that it will be removed from the canonical chain and therefor has high finality.</p><p>Proof of Stake introduced 2 new levels of finality that developers should consider when requesting data from the network: safe and finalized. Here is an overview of all â€œblock tagsâ€:</p><p>earliest: The lowest numbered block the client has available. Intuitively, you can think of this as the first block created.<br>finalized: The most recent crypto-economically secure block, that has been accepted by &gt;2&#x2F;3 of validators. Typically finalized in two epochs (64 blocks). Cannot be re-orged outside of manual intervention driven by community coordination. Intuitively, this block is very unlikely to be re-orged.<br>safe: The most recent crypto-economically secure block, typically safe in one epoch (32 blocks). Cannot be re-orged outside of manual intervention driven by community coordination. Intuitively, this block is â€œunlikelyâ€ to be re-orged.<br>latest: The most recent block in the canonical chain observed by the client, this block may be re-orged out of the canonical chain even under healthy&#x2F;normal conditions. Intuitively, this block is the most recent block observed by the client.<br>pending: A sample next block built by the client on top of latest and containing the set of transactions usually taken from local mempool. Intuitively, you can think of these as blocks that have not been mined yet.</p><p><img src="https://files.readme.io/55d7bc4-block_and_epochs_.png" alt="earliest â‰¤ finalized â‰¤ safe â‰¤ latest â‰¤ pending"></p><h1 id="Gas-On-Ethereum"><a href="#Gas-On-Ethereum" class="headerlink" title="Gas On Ethereum"></a>Gas On Ethereum</h1><h2 id="EIP-1559"><a href="#EIP-1559" class="headerlink" title="EIP-1559"></a>EIP-1559</h2><p>As many of u may know, the price of gas is changes with every block, Historically, gas price in Ethereum was unpredictable and at times, high marking transactions inaccessible to most people.</p><p>However, EIP proposed to improve gas price caculation, knowen as EIP-1559. Instead of coving antiquated computation of gas price from before EIP-1559, itâ€™s focus on how is works for current state of Ethereum.</p><h2 id="Denominations-of-Ether"><a href="#Denominations-of-Ether" class="headerlink" title="Denominations of Ether"></a>Denominations of Ether</h2><p><img src="https://res.cloudinary.com/divzjiip8/image/upload/v1670883266/alchemyu/Screen_Shot_2022-12-12_at_2.12.01_PM.png" alt="Picsee-20230522174241.png"></p><h2 id="How-is-the-price-of-gas-set"><a href="#How-is-the-price-of-gas-set" class="headerlink" title="How is the price of gas set?"></a>How is the price of gas set?</h2><p>Every block has mimiumed amound of gas that can be used within it. This is how the numbers of transactions include within a block are determined. Every block has capacity to use 30 million gas but has target 15m gas total.</p><p>The price of gas is determined by the amount of demand for transactions. where demand is measured by how filled previous block was related to the target gas.</p><p><img src="https://res.cloudinary.com/divzjiip8/image/upload/v1670445934/alchemyu/block-usage-image.png" alt="how to set gas price"></p><p>This base fee helps users select an efficient gas amount that is likely to get their transaction mined rather than wasting tons of money on unnecessarily high gas prices like weâ€™ve seen in the past. These mechanisms also make it easy to predict future gas prices by looking at how â€œfullâ€ the previous blocks were.</p><ul><li><p><a href="https://etherscan.io/block/16128921">16128921</a><br><img src="https://res.cloudinary.com/divzjiip8/image/upload/v1670446077/alchemyu/block-16128921.png" alt="16128921"></p></li><li><p><a href="https://etherscan.io/block/16128922">https://etherscan.io/block/16128922</a><br><img src="https://res.cloudinary.com/divzjiip8/image/upload/v1670446069/alchemyu/block-16128922.png" alt="16128922"></p></li></ul><p>we can see 16128921 only using 6.4 million gas instead of 15 million, so the block demand is not big enought, then next block will decrease the gasbase for increasing amount of transactions. Thatâ€™s how calculation price of gas.</p><h2 id="What-happend-to-the-base-fee"><a href="#What-happend-to-the-base-fee" class="headerlink" title="What happend to the base fee?"></a>What happend to the base fee?</h2><p>Instead of going straight into miners pocket. the base fee actually has burned. there several reasons for why base fee is burned instead of being given to miner</p><ul><li>This prevents the miner from circumventing the payment of the base fee since they have to pay at least base fee * # of transactions for the block that the mine</li><li>buring the base fee also creates a deflation pressure on Ether as an asset since supply is being taken out the market</li></ul><h2 id="Setting-the-gas-for-your-transaction"><a href="#Setting-the-gas-for-your-transaction" class="headerlink" title="Setting the gas for your transaction"></a>Setting the gas for your transaction</h2><p>Turns out when you are sending a transaction, <strong>youâ€™re not actually setting the base fee value</strong>, but rather your setting the <strong>max fee</strong> which represents the maximum amount that youâ€™re willing to pay to get your transaction included. Luckily, unlike with the previous gas usage model, your transaction will only ever use the base fee** amount to execute, the rest of the value (max fee - base fee) will be return to you.</p><p>As a dApp develop you can actually create your own algorithm to determine how much gas to include in your transactions using endpoints like eth_feeHistory. If youâ€™re interested in learning how to build this, check out How to Build a Gas Fee Estimator using EIP-1559.</p><h2 id="How-are-miners-paid"><a href="#How-are-miners-paid" class="headerlink" title="How are miners paid?"></a>How are miners paid?</h2><p>Since the base fee is entirely burned, the new incentive for miners is now known as the miner tip. In a perfect world, the miner tip is the minimum amount that the miner is willing to accept in order to execute your transaction. This tip was originally set as 1gwei but can fluctuate depending on how full blocks are. Since the target gas value in blocks is 15M, in general, so long as blocks are hitting or near the target amount, there will always be room to add more transactions within a block. This is why the miner tip does not need to be insanely high to get your transaction included.</p><p>Typically when you set the gas for your transaction youâ€™re setting a value called maxPriorityFee which is equal to the max fee + the miner tip . Weâ€™ll learn more about sending transactions later on this week!</p><h1 id="Account-in-Ethereum"><a href="#Account-in-Ethereum" class="headerlink" title="Account in Ethereum"></a>Account in Ethereum</h1><h2 id="EOA"><a href="#EOA" class="headerlink" title="EOA"></a>EOA</h2><p>Externally Owned Accounts (or EOA for shot) are similar to bitcoin pri&#x2F;pub keys. In both models, the address and public key are associated to private key via  an Elliptic Curve Digital Signature<br>The different between Account model and UTXOs:</p><ul><li>Ethereum is a 40 character hexadecimal string, Bitcoin is 26-35 alphanumeric string in Bitcoin</li><li>Bitcoin addresses end in checksum to ensure the address typed properly.Ethereum addresses donâ€™t have a checksum by default, although EIP-55 introduced a capitalization scheme that can be validated by wallet software.<br>The biggest different is EOAs have balance. This means the global state of blockchain actively track how much ether active address on the network holds.</li></ul><blockquote><p>ğŸ¤“ Minor clarification here: an active address refers to an address that has interacted on the Ethereum blockchain. There are technically 16^40 (or 2^160 if youâ€™re thinking in binary!) possible Ethereum addresses which can be generated. These addresses are not included in the global state tree until they have interacted with the blockchain. Otherwise, this would be a massive amount of data stored! Take a look at <strong>(EIP-161)[<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-161.md]">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-161.md]</a></strong> which was implemented when flaws in the Ethereum system allowed an attacker to create 19 million accounts at extremely low gas costs.</p></blockquote><h2 id="Account-vs-UTXOs"><a href="#Account-vs-UTXOs" class="headerlink" title="Account vs UTXOs"></a>Account vs UTXOs</h2><p>To transfer money in bitcoin we spend UTXOs. In Ethereum there are no UTXOs. Instead, at the end of the transaction transfering ether, the the transfered amount is subtracted from the senderâ€™s balance and add it to recipientâ€™s address balance in the global state tree.</p><p>Compare to UTXOs, an account balance is quiet straightforward, especially for dev, we can get the address balance just use balance operation that EVM support inside code running on the EVM</p><p>Each Ethereum address also contains nonce, the nonce keeps a count of all transactions sent from that particular address.<br>Letâ€™s say you have 2 ether in your account and you want to send 1 ether to Bob:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token constant">BOBS_ADDRESS</span><span class="token punctuation">,</span>  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">100000000000000000</span> <span class="token comment">// 1 ether</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Youâ€™ll be able to broadcast this transaction to the network once you sign it with your private key. ğŸ”‘ğŸŒ</p><p>At that point, with the current parameters specified, whatâ€™s stopping Bob from re-transmitting this same transaction again to the network? ğŸ¤”</p><p><strong>NOTHINGğŸ˜±</strong> </p><p>To combat this, Ethereum tracks the number of transactions sent by an account, called the account nonce. Each time a transaction is sent, the nonce is incremented:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token constant">BOBS_ADDRESS</span><span class="token punctuation">,</span>  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">100000000000000000</span><span class="token punctuation">,</span> <span class="token comment">// 1 ether</span>  <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token number">0x0</span> <span class="token comment">// this is the first transaction, nonce is zero!</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>If Bob tried to re-broadcast the transaction now, the network would reject it. Once the first transaction is successfully mined the miners enforce the rule that the nonce of your next transaction should be 0x1.</p><p>ğŸ’­ You may be thinking: â€œWhat if Bob tried to increment the nonce himself?â€ But, of course, Bob would need you to sign the transaction after he incremented the nonce. The result of a digital signature does not leave room for the underlying data to be tampered with.</p><p>the nonce is simply means a number weâ€™re using once for its particular purpose.</p><p>To summarize, the difference between Ethereum EOAs and Bitcoin addresses is that active EOAs are stored with a balance and a nonce. Whereas in Bitcoin the client only keeps track of UTXOs which contain an owner address.</p><h2 id="Contract-Accounts"><a href="#Contract-Accounts" class="headerlink" title="Contract Accounts"></a>Contract Accounts</h2><p>Smart contract, itâ€™s simply <strong>a program that runs in the blockchain execution environment</strong>.<br>As a dev, we will write smart contract. once we do that, we can deploy the contract in Ethereum blockchain. we can do this by running a transaction from our EOAs with the <strong>bytecode</strong> of the compiled the smart contract.</p><p>The contract have account, since that it also have address and balance. The contract account canâ€™t be controlled by the private key. Instead, the EOAs make a transaction to call function on contract. From here, the contract can also make a call to another contract synchronously. Once the contract deploys, the contract code canâ€™t be changed, but also it can updated by transaction.</p><p>ğŸ“– A contract can store an address of another contract that it needs to interact with. Since the address is held in storage it can be updated through transactions. Therefore itâ€™s possible to upgrade a system by deploying new contracts and running a transaction to update references to point to the new addresses. This can be a bit of a challenging subject and is generally referred to as smart contract <strong>upgradeability</strong>.</p><h1 id="The-summary-of-Ethereum"><a href="#The-summary-of-Ethereum" class="headerlink" title="The summary of Ethereum"></a>The summary of Ethereum</h1><p>(summary)[<a href="https://university.alchemy.com/course/ethereum/md/63911a1ffdaf860004511e98]">https://university.alchemy.com/course/ethereum/md/63911a1ffdaf860004511e98]</a></p><h1 id="aka"><a href="#aka" class="headerlink" title="aka"></a>aka</h1><p>ethereum: ä»¥å¤ªåŠ<br>Blockchain: åŒºå—é“¾<br>Cryptoï¼š åŠ å¯†<br>crytocurrencts: åŠ å¯†è´§å¸<br>decentralized: å»ä¸­å¿ƒåŒ–<br>bitcoinï¼š æ¯”ç‰¹å¸ï¼Œç¬¬ä¸€ä¸ªåŸºäºåŒºå—é“¾æŠ€æœ¯å®ç°çš„åŠ å¯†è´§å¸<br>fiancial incentivesï¼š é‡‘èå¥–åŠ±<br>mining the rewardsï¼š æŒ–çŸ¿<br>deterministic: ç¡®å®šæ€§<br>pseudorandom: ä¼ªéšæœº<br>collsion resistant: æŠ—ç¢°æ’<br>consensus: å…±è¯†ï¼Œä¸€ä¸ªç½‘ç»œå¯¹æ•°æ®çš„çŠ¶æ€è¾¾æˆå…±è¯†ã€‚<br>censorshipï¼šå®¡æŸ¥<br>bribeï¼š è´¿èµ‚<br>drill homeï¼š é’»ç ”<br>relatively travelï¼šç›¸å¯¹è¾ƒå°çš„<br>infeasibleï¼š ä¸å¯èƒ½<br>symmetric: å¯¹ç§°<br>digital signature: æ•°å­—ç­¾å<br>RSA: éå¯¹ç§°åŠ å¯†çš„ç»å…¸å®ç°<br>ECDSAï¼š bitcoiné‡‡ç”¨çš„éå¯¹ç§°åŠ å¯†ç®—æ³•<br>etherï¼š ä»¥å¤ªå¸<br>addressï¼š äº¤æ˜“å‘èµ·æ–¹ç±»ä¼¼äºip, bitcoin ä½¿ç”¨checksum and base58, ethereum is last 20 bytes of the hash of the public key.<br>Enforcementï¼š æ‰§è¡Œ<br>consensus rulesï¼š å…±è¯†è§„åˆ™<br>consensus mechanismsï¼šåå•†ä¸€è‡´<br>inter-changeable: å¯äº’æ¢çš„<br>cumulative: ç§¯ç´¯å‹<br>nakamoto consensusï¼š æœ€é•¿çš„chainå°†æ˜¯å…¶ä»–èŠ‚ç‚¹æ¥å—çš„ä¸€ä¸ªçœŸæ­£çš„é“¾ï¼Œä»–æ˜¯ç”±ä¸€æ¡é“¾ç§¯ç´¯çš„å·¥ä½œæ‰€å†³å®šçš„ã€‚<br>txs: transactions.<br>pos: proof of stack, posä¸­ï¼Œå‚ä¸è€…éœ€è¦æŒæœ‰ä¸€å®šæ•°é‡çš„crytocurrencyï¼Œå‚ä¸è®°è´¦è¿‡ç¨‹ï¼Œç›¸æ¯”powï¼Œposä¸éœ€è¦å¤§é‡çš„ç®—åŠ›<br>pow: proof of workï¼Œminersé€šè¿‡è®¡ç®—æ¥æ·»åŠ txså’Œblockï¼Œéœ€è¦æ¶ˆè€—ç®—åŠ›ã€‚å¯ä»¥å¢åŠ security of  blockchain<br>merkle rootï¼šé»˜å…‹å°”æ ¹ï¼Œç”¨æ¥éªŒè¯å’Œç¡®è®¤äº¤æ˜“æ˜¯å¦è¢«ç¯¡æ”¹ã€‚<br>underlying: åº•å±‚<br>hashcashï¼š Hashcashå·¥ä½œé‡è¯æ˜åŠŸèƒ½ç”±Adam Backäº 1997 å¹´å‘æ˜ï¼Œå¹¶å»ºè®®ç”¨äºå DoS ç”¨é€”<br>Byzantine Generalâ€™s Problemï¼š åœ¨p2påœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¯æ˜æ¯ä¸ªæœºå™¨éƒ½æ˜¯åœ¨å·¥ä½œçš„ã€‚<br>manipulateï¼š æ“ä½œ<br>Genesis Block: ç¬¬ä¸€ä¸ªåŠ å…¥åˆ°åŒºå—é“¾ä¸­çš„å—ï¼Œåˆå§‹å—<br>cost-effective: æˆæœ¬æ•ˆç›Š<br>UTXOï¼šUnspent Transaction Output, æœªä½¿ç”¨çš„äº¤æ˜“<br>Retrospectiveï¼š å›é¡¾<br>vulnerableï¼š è„†å¼±çš„<br>light nodes: è½»èŠ‚ç‚¹ ï¼ˆå­˜å‚¨å—å¤´çš„è½»èŠ‚ç‚¹ï¼‰<br>full nodesï¼šå®Œæ•´èŠ‚ç‚¹ï¼ˆå¸¸è§„èŠ‚ç‚¹ï¼‰<br>achieve nodes: å½’æ¡£èŠ‚ç‚¹ï¼Œ å®Œæ•´èŠ‚ç‚¹ï¼ˆå·²éªŒè¯çš„å­˜æ¡£èŠ‚ç‚¹ï¼‰<br>bandwidthï¼š å¸¦å®½<br>configure: é…ç½®<br>variablesï¼š å˜é‡<br>discrepanciesï¼š å·®å¼‚<br>tradeoffsï¼š æƒè¡¡åˆ©å¼Š<br>contrastï¼š å¯¹æ¯”<br>unfakeableï¼š ä¸å¯ä¼ªé€ <br>replicateï¼š å¤åˆ¶<br>Satoshi: â€œSatoshiâ€ refers to the smallest unit of the cryptocurrency Bitcoin<br>individualï¼š ä¸ªäºº<br>multitudeï¼š ä¼—å¤šçš„<br>aggregateï¼š æ€»æ•°<br>expediteï¼š åŠ å¿«<br>hefty prize ï¼š å·¨é¢å¥–é‡‘<br>controlled supplyï¼š å—æ§ä¾›åº”<br>intentional: æ•…æ„çš„<br>quirkï¼š æ€ªç™–<br>denial: å¦è®¤<br>distinguishï¼š è¾¨åˆ«<br>precedingï¼š å‰é¢<br>emergeï¼š å‡ºç°<br>hierarchically: å±‚æ¬¡åˆ†æ˜<br>intimidatingï¼š ä»¤äººç”Ÿç•çš„<br>underneathï¼š åº•ä¸‹<br>infactingï¼šè¿æ¥<br>concatenateï¼š ä¸²è”<br>optimizationï¼š ä¼˜åŒ–<br>inconsistencies: ä¸ä¸€è‡´<br>deveration: æ¨å¯¼<br>arbitraryï¼š éšæ„çš„<br>immutableï¼š ä¸å¯å˜<br>implications: å«ä¹‰<br>ledgerï¼š è´¦æœ¬<br>traversal: éå†<br>PMTs: Partricia Merkle tries<br>sealed: å¯†å°.<br>Permenant: æ°¸æ’çš„<br>Ephemeralï¼š çŸ­æš‚çš„<br>Constantly: ä¸æ–­çš„<br>prefixes: å‰ç¼€<br>recursion: é€’å½’<br>portionï¼š éƒ¨åˆ†<br>adjacent: é‚»è¿‘çš„<br>neat mechanisms: æ•´æ´çš„æœºåˆ¶<br>consists: åŒ…å«<br>crowdfunding: ä¼—ç­¹<br>parseï¼š è§£æ<br>intimidated: å“å<br>deterministic: ç¡®å®šæ€§<br>infrastructureï¼š åŸºç¡€è®¾æ–½<br>constrainï¼š é™åˆ¶<br>resideï¼š è´®å­˜<br>presence: å­˜åœ¨<br>cencership: å®¡æŸ¥åˆ¶åº¦<br>auditableï¼šå¯å®¡æŸ¥<br>Ubiquitousï¼š æ— å¤„ä¸åœ¨<br>barriesï¼š éšœç¢<br>curbï¼š æŠ‘åˆ¶ï¼Œé˜»æ­¢<br>comprehendï¼š ç†è§£<br>easy as pieï¼š æ˜“å¦‚åæŒ<br>explicitlyï¼šæ˜ç¡®çš„<br>clauseï¼š æ¡æ¬¾<br>neutralityï¼›ä¸­ç«‹<br>arbitraryï¼š éšæ„çš„<br>EVMï¼š Etherrum Virtual Machine<br>Stale&#x2F;Orphan blockï¼š é™ˆæ—§&#x2F;å­¤ç«‹å—ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªåŒºå—åŒæ—¶è¢«çŸ¿å·¥æŒ–æ˜å‡ºï¼ŒåŒºå—å¯èƒ½ä¼šå‡ºç°ä¸´æ—¶åˆ†å‰ï¼Œæœªèƒ½è¢«é€‰ä¸ºæœ‰æ•ˆåŒºå—çš„åŒºå—è¢«ç§°ä¸ºstale&#x2F;Orphan blockï¼Œåœ¨Etherumä¸­æ­¤ç±»åŒºå—åˆç§°ä¸ºOmmer blockï¼Œæ˜¯Etherrumä½œä¸ºé¼“åŠ±å’Œå¥–åŠ±çŸ¿å·¥ä¸ºå®‰å…¨åšå‡ºè´¡çŒ®çš„æœºåˆ¶ã€‚<br>emulateï¼š æ¨¡ä»¿<br>underlyingï¼š æ½œåœ¨çš„<br>monetaryï¼š è´§å¸<br>fixedï¼š å›ºå®šçš„<br>Arithmetic: ç®—æœ¯<br>benchmarking: åŸºå‡†æµ‹è¯•<br>discrepancies: å·®å¼‚<br>philosophy: ç†å¿µ<br>Ethereum improvement proposal: EIPï¼Œ Ethereum æ”¹è¿›ææ¡ˆ<br>first and foremost: é¦–å…ˆ<br>specificationï¼š è§„èŒƒ<br>adhere: ç¬¦åˆ<br>impromptuï¼š å³å…´<br>compatibleï¼š å…¼å®¹çš„<br>contentiousï¼š æœ‰äº‰è®®çš„<br>overHeadï¼šé«˜æ˜‚çš„<br>collateral: æŠµæŠ¼ç‰©<br>intuitively: ç›´è§‚çš„<br>re-orgedï¼š é‡ç»„<br>manualï¼šæ‰‹åŠ¨çš„<br>interventionï¼š å¹²æ¶‰<br>canonical: ç»å…¸çš„<br>shiftedï¼š è½¬ç§»<br>denomination: é¢å€¼<br>demandï¼š éœ€æ±‚<br>circumventingï¼š è§„é¿<br>deflationary: é€šç¼©<br>deprecated: å¼ƒç”¨<br>redunant: å¤šä½™çš„<br>tampered: è¢«ç¯¡æ”¹<br>EOAs: Extended owned account.<br>Vulnerability: æ¼æ´</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tree</title>
      <link href="/2023/05/19/tree/"/>
      <url>/2023/05/19/tree/</url>
      
        <content type="html"><![CDATA[<h1 id="diffrent-type-of-tree-structure"><a href="#diffrent-type-of-tree-structure" class="headerlink" title="diffrent type of tree structure"></a>diffrent type of tree structure</h1><h3 id="simple-tree"><a href="#simple-tree" class="headerlink" title="simple tree"></a>simple tree</h3><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230517150030ytaxDQ.png" alt="Picsee-20230517150030.png"></p><h3 id="binary-tree"><a href="#binary-tree" class="headerlink" title="binary tree"></a>binary tree</h3><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230517150055WZh65C.png" alt="Picsee-20230517150055.png"><br>a parent must have two children. thatâ€™s a rule of binary tree, if the parent have more than two children, it canâ€™t be called binary tree.</p><h3 id="tree-vs-linked-tree"><a href="#tree-vs-linked-tree" class="headerlink" title="tree vs linked tree."></a>tree vs linked tree.</h3><p>a linked list also is tree - just really long one that only has one child per parent in a long continuous chain. a tree is not necessarily be a linked list.<br>for example</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">linkedList</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">tree</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>noticed the treenode holds the typical data and an array to continue refer to any children of the (parent) node. the linkedlist just keep tract to next node.</p><h1 id="tree-vocabulary-summary"><a href="#tree-vocabulary-summary" class="headerlink" title="tree vocabulary summary"></a>tree vocabulary summary</h1><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230517150651iAAFtz.png" alt="Picsee-20230517150651.png"></p><ul><li>key, node id </li><li>siblings, nodes under the same parent and on the same level </li><li>root, the top node of the tree.</li><li>subtree, once u isolate a part of broader tree, u can form a brand new tree with new relationship.</li></ul><h1 id="searching-binary-tree"><a href="#searching-binary-tree" class="headerlink" title="searching binary tree"></a>searching binary tree</h1><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-202305171515066WVF9b.png" alt="Picsee-20230517151506.png"><br>searching tree must have those properties:</p><ul><li>itâ€™s binary tree.</li><li>the left one must be less than the parent</li><li>the right one must be greater than the parent</li></ul><h3 id="the-sbt-implement"><a href="#the-sbt-implement" class="headerlink" title="the sbt implement."></a>the sbt implement.</h3><p>Tree</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Tree</span> <span class="token punctuation">&#123;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">addNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span>  current <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// when we assign this.root to current, we just reference the root to current. so when we change current, we also will change root.</span>        current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>data <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          current<span class="token punctuation">.</span>left <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// if we use recursive, the current will be assigned be new object, but the root also will be impacted.</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>  current<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          current<span class="token punctuation">.</span>right <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>  current<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">hasNode</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> current<span class="token operator">=</span><span class="token keyword">null</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">===</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> current<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasNode</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> current<span class="token punctuation">.</span>left<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value <span class="token operator">></span> current<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> current<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasNode</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> current<span class="token punctuation">.</span>right<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Tree<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Node</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">&#123;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data         <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Node<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>use case</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„äºŒå‰æœç´¢æ ‘å¯¹è±¡</span><span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºä¸€äº›èŠ‚ç‚¹å¹¶æ·»åŠ åˆ°æ ‘ä¸­</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tree<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ‰“å°æ ¹èŠ‚ç‚¹</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ ¹èŠ‚ç‚¹:'</span><span class="token punctuation">,</span> tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="merkle-tree"><a href="#merkle-tree" class="headerlink" title="merkle tree"></a>merkle tree</h1><p>Merkle tree is a data structure that allows us to make efficient verification that data belong in large set of data.<br>They are commonly used in p2p where efficient proof of this nature will help increase the scalability of the network.<br>A Merkle tree is collection reduce to a single hash.</p><pre class="line-numbers language-none"><code class="language-none">   ABCDEFGH &lt;-- Merkle Root     &#x2F;    \  ABCD     EFGH  &#x2F; \      &#x2F; \ AB  CD   EF  GH&#x2F; \  &#x2F; \  &#x2F; \ &#x2F; \A B  C D  E F G H<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Each signle letter reprsent hash. The combined letter represent concatenated hash that have been combined and then hashed to form new hash.</p><p>They allow us to verify if a piece of data is part of a larger data structure. <b>without having all of the data within that structure</b>.<br>this means they can be used to check incosistencies in all kinds of distributed systems.</p><p>For blockchain, storing transactions as Merkle tree allows us to look at a block and verify that a transaction was part of it by only having part of the data set.</p><h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><p>the benefits of the merkle tree design â€“ a recursion hashin-based algorithm  â€“ is that allows for efficient proof that some data exists within the root hash constrution(actually contained in the block). a merkle proof confirmed specific transactions represented by a leaf or branch within merkle hash root.</p><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519184902QGl5LL.png" alt="Picsee-20230519184902.png"></p><p>if i want prove c exist in the block, we only need use the root, h(a-b) and h(e-h). so that is effience.</p><h3 id="Logarithmic-scalming"><a href="#Logarithmic-scalming" class="headerlink" title="Logarithmic scalming."></a>Logarithmic scalming.</h3><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519185805Uvffb7.png" alt="Picsee-20230519185805.png"></p><p>The amount of proof pieces that you need scales logarithmically to the size of the array of data you need to feed into the Merkle tree hash algorithm. keeping the data storage lean and efficent is the reason behind using structured like Merkle tree.</p><h3 id="Merkle-Tree-Vocabulary-Summary"><a href="#Merkle-Tree-Vocabulary-Summary" class="headerlink" title="Merkle Tree Vocabulary Summary"></a>Merkle Tree Vocabulary Summary</h3><ul><li>Merkle tree, a special binary tree, that allowed just use targetProveHash and proof to verify is that equal with root.</li><li>Merkle root, the hash contained in the block header, which is derived from the hash of all the transactions in the block.</li><li>Merkle path, represents the information that user need to calculate the expected value for Merkle root for a  block, from their owner transactions hash contained in that block.</li><li>Merkle proof, prove the existence of a specific transaction in a specific block(without the user needing to examine all the transaction in block). it includes Merkle root and Merkle proof.</li></ul><h3 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h3><p>Merkle tree is a very popular structure in blockchain. itâ€™s importatnt to understand the low-level of blockchain storage and the implications of such a disicion</p><h1 id="partricia-Merkle-tries"><a href="#partricia-Merkle-tries" class="headerlink" title="partricia Merkle tries"></a>partricia Merkle tries</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>Bitcoin is the frist blockchain-based contralization newwork ever. it popularizes the use of Merkle tree for scalable transactions inclusion. Ethereum also use Merkle tree but since Ethereum is different design. it also use ont other important tree data structures for some of its data storage needs: Partricia Merkle tries.</p><h2 id="Ethereum-block-structure"><a href="#Ethereum-block-structure" class="headerlink" title="Ethereum block structure"></a>Ethereum block structure</h2><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-202305192045539NsDFI.png" alt="Picsee-20230519204553.png"></p><h2 id="Trees-in-Ethereum"><a href="#Trees-in-Ethereum" class="headerlink" title="Trees in Ethereum"></a>Trees in Ethereum</h2><p>Ethereum make use a tree called â€œradix trie, also referenced to as a Partricia Merkle treeâ€ and combine this data structure with Merkle tree to create Partricia Merkle Tries.</p><p>A redix trie is a tree like data structure that used to retrieve a string by value triversing down a branch of nodes that store acciocated key that together lead to the end value can be returned.</p><p>A Merkle trie is a data structure that store key-value pairing. just like hash-table. in addition to that. it allow us to verify data integrity and the inclusion of key-value pairs.</p><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-202305192045539NsDFI.png" alt="Picsee-20230519204553.png"></p><p>PMTs groups similar-value nodes together in the tree. this way searching for â€˜helpâ€™ leads u along the same path as â€˜helloâ€™, the first three letter is same. good for space and efficiency.</p><h2 id="why-does-Etherum-use-a-PMTs"><a href="#why-does-Etherum-use-a-PMTs" class="headerlink" title="why does Etherum use a PMTs?"></a>why does Etherum use a PMTs?</h2><p>there are two different type of data:<br>Permenant:</p><ul><li>once a transaction occurs, that record is sealed forever.<ul><li>that means once u locate the transaction in a PMTs, u can return to the same path over and over to retrieve the same result.</li></ul></li></ul><p>Ephemeral:</p><ul><li>the Etherum, account state change all the time(ie. A user recieve some ether, interact with contractâ€¦)</li><li>nounce, balance, storageRoot, codeHash.</li></ul><p>It make sense Permenant and Ephemeral need storage separately. Merkle Tree, a perfect data structure for Permenant. PMTs are perfect for Ephemeral data.</p><h1 id="Etherum-Block-header"><a href="#Etherum-Block-header" class="headerlink" title="Etherum Block header"></a>Etherum Block header</h1><p>the block header contains many pieces of data. the block header is the hash result of all of the data element contained in the block. itâ€™s like giftwrap of the all of the block data.</p><ul><li>state root, the root hash of the state trie</li><li>transaction root, the root hash of the transaction</li><li>receipt root, the root hash of the receipt trie</li></ul><h2 id="State-Trie"><a href="#State-Trie" class="headerlink" title="State Trie"></a>State Trie</h2><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519214704LOIVt8.png" alt="Picsee-20230519214704.png"></p><p>as show in the above diagram, the state trie is mapping between address and account state.</p><p>it can be seen a global state that is constanly updated by transaction executions. all the information about account are stored in the world state trie and u can retrieve informantion by query it.</p><p>Account Example<br>as mentioned above, the state trie is just mapping that uses an address as the key and the account state(nount, balance) as the value returned. </p><h2 id="Transaction-Trie"><a href="#Transaction-Trie" class="headerlink" title="Transaction Trie"></a>Transaction Trie</h2><p>the transaction trie records transaction in Ethereum. once the block is mined, the transaction trie is never update.</p><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519221351dcOw9O.png" alt="Picsee-20230519221351.png"></p><p>each transaction in Ethereum record multiple pieces properties  for each transaction such as gasPrice and value. </p><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-202305192220048z4yRO.png" alt="Picsee-20230519222004.png"><br>You can even try querying the transactions trie directly using <a herf='https://composer.alchemy.com/'>Alchemy Composer</herf>.</p><h2 id="Transaction-Receipt-Trie"><a href="#Transaction-Receipt-Trie" class="headerlink" title="Transaction Receipt Trie"></a>Transaction Receipt Trie</h2><p>outcomes of transactions. data including gasUsed and logs(events emitted are contained here)<br>Once the block is mined, the transaction receipt trie is never updated.<br><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519222342e1W7xQ.png" alt="Picsee-20230519222342.png"><br>Try it out on the <code>&lt;a herf=&#39;https://composer.alchemy.com/&#39;&gt;Alchemy Composer&lt;/a&gt;</code> - just make sure to change the method to eth_getTransactionReceipt</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230519222433loEWhb.png" alt="Picsee-20230519222433.png"></p><p>the above diagram is an excellent visulaztion into how the trie all end up being committed in every block via their root hash. the raw data is stored elsewhere in Etherum, particularly achive nodes.</p><blockquote><p>good trview for <a href="https://medium.com/shyft-network/understanding-trie-databases-in-ethereum-9f03d2c3325d">PMTSs</a></p></blockquote><h1 id="aka"><a href="#aka" class="headerlink" title="aka"></a>aka</h1><p>ethereum: ä»¥å¤ªåŠ<br>Blockchain: åŒºå—é“¾<br>Cryptoï¼š åŠ å¯†<br>crytocurrencts: åŠ å¯†è´§å¸<br>decentralized: å»ä¸­å¿ƒåŒ–<br>bitcoinï¼š æ¯”ç‰¹å¸ï¼Œç¬¬ä¸€ä¸ªåŸºäºåŒºå—é“¾æŠ€æœ¯å®ç°çš„åŠ å¯†è´§å¸<br>fiancial incentivesï¼š é‡‘èå¥–åŠ±<br>mining the rewardsï¼š æŒ–çŸ¿<br>deterministic: ç¡®å®šæ€§<br>pseudorandom: ä¼ªéšæœº<br>collsion resistant: æŠ—ç¢°æ’<br>consensus: å…±è¯†ï¼Œä¸€ä¸ªç½‘ç»œå¯¹æ•°æ®çš„çŠ¶æ€è¾¾æˆå…±è¯†ã€‚<br>censorshipï¼šå®¡æŸ¥<br>bribeï¼š è´¿èµ‚<br>drill homeï¼š é’»ç ”<br>relatively travelï¼šç›¸å¯¹è¾ƒå°çš„<br>infeasibleï¼š ä¸å¯èƒ½<br>symmetric: å¯¹ç§°<br>digital signature: æ•°å­—ç­¾å<br>RSA: éå¯¹ç§°åŠ å¯†çš„ç»å…¸å®ç°<br>ECDSAï¼š bitcoiné‡‡ç”¨çš„éå¯¹ç§°åŠ å¯†ç®—æ³•<br>etherï¼š ä»¥å¤ªå¸<br>addressï¼š äº¤æ˜“å‘èµ·æ–¹ç±»ä¼¼äºip, bitcoin ä½¿ç”¨checksum and base58, ethereum is last 20 bytes of the hash of the public key.<br>Enforcementï¼š æ‰§è¡Œ<br>consensus rulesï¼š å…±è¯†è§„åˆ™<br>consensus mechanismsï¼šåå•†ä¸€è‡´<br>inter-changeable: å¯äº’æ¢çš„<br>cumulative: ç§¯ç´¯å‹<br>nakamoto consensusï¼š æœ€é•¿çš„chainå°†æ˜¯å…¶ä»–èŠ‚ç‚¹æ¥å—çš„ä¸€ä¸ªçœŸæ­£çš„é“¾ï¼Œä»–æ˜¯ç”±ä¸€æ¡é“¾ç§¯ç´¯çš„å·¥ä½œæ‰€å†³å®šçš„ã€‚<br>txs: transactions.<br>pos: proof of stack, posä¸­ï¼Œå‚ä¸è€…éœ€è¦æŒæœ‰ä¸€å®šæ•°é‡çš„crytocurrencyï¼Œå‚ä¸è®°è´¦è¿‡ç¨‹ï¼Œç›¸æ¯”powï¼Œposä¸éœ€è¦å¤§é‡çš„ç®—åŠ›<br>pow: proof of workï¼Œminersé€šè¿‡è®¡ç®—æ¥æ·»åŠ txså’Œblockï¼Œéœ€è¦æ¶ˆè€—ç®—åŠ›ã€‚å¯ä»¥å¢åŠ security of  blockchain<br>merkle rootï¼šé»˜å…‹å°”æ ¹ï¼Œç”¨æ¥éªŒè¯å’Œç¡®è®¤äº¤æ˜“æ˜¯å¦è¢«ç¯¡æ”¹ã€‚<br>underlying: åº•å±‚<br>hashcashï¼š Hashcashå·¥ä½œé‡è¯æ˜åŠŸèƒ½ç”±Adam Backäº 1997 å¹´å‘æ˜ï¼Œå¹¶å»ºè®®ç”¨äºå DoS ç”¨é€”<br>Byzantine Generalâ€™s Problemï¼š åœ¨p2påœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¯æ˜æ¯ä¸ªæœºå™¨éƒ½æ˜¯åœ¨å·¥ä½œçš„ã€‚<br>manipulateï¼š æ“ä½œ<br>Genesis Block: ç¬¬ä¸€ä¸ªåŠ å…¥åˆ°åŒºå—é“¾ä¸­çš„å—ï¼Œåˆå§‹å—<br>cost-effective: æˆæœ¬æ•ˆç›Š<br>UTXOï¼šUnspent Transaction Output, æœªä½¿ç”¨çš„äº¤æ˜“<br>Retrospectiveï¼š å›é¡¾<br>vulnerableï¼š è„†å¼±çš„<br>light nodes: è½»èŠ‚ç‚¹ ï¼ˆå­˜å‚¨å—å¤´çš„è½»èŠ‚ç‚¹ï¼‰<br>full nodesï¼šå®Œæ•´èŠ‚ç‚¹ï¼ˆå¸¸è§„èŠ‚ç‚¹ï¼‰<br>achieve nodes: å½’æ¡£èŠ‚ç‚¹ï¼Œ å®Œæ•´èŠ‚ç‚¹ï¼ˆå·²éªŒè¯çš„å­˜æ¡£èŠ‚ç‚¹ï¼‰<br>bandwidthï¼š å¸¦å®½<br>configure: é…ç½®<br>variablesï¼š å˜é‡<br>discrepanciesï¼š å·®å¼‚<br>tradeoffsï¼š æƒè¡¡åˆ©å¼Š<br>contrastï¼š å¯¹æ¯”<br>unfakeableï¼š ä¸å¯ä¼ªé€ <br>replicateï¼š å¤åˆ¶<br>Satoshi: â€œSatoshiâ€ refers to the smallest unit of the cryptocurrency Bitcoin<br>individualï¼š ä¸ªäºº<br>multitudeï¼š ä¼—å¤šçš„<br>aggregateï¼š æ€»æ•°<br>expediteï¼š åŠ å¿«<br>hefty prize ï¼š å·¨é¢å¥–é‡‘<br>controlled supplyï¼š å—æ§ä¾›åº”<br>intentional: æ•…æ„çš„<br>quirkï¼š æ€ªç™–<br>denial: å¦è®¤<br>distinguishï¼š è¾¨åˆ«<br>precedingï¼š å‰é¢<br>emergeï¼š å‡ºç°<br>hierarchically: å±‚æ¬¡åˆ†æ˜<br>intimidatingï¼š ä»¤äººç”Ÿç•çš„<br>underneathï¼š åº•ä¸‹<br>infactingï¼šè¿æ¥<br>concatenateï¼š ä¸²è”<br>optimizationï¼š ä¼˜åŒ–<br>inconsistencies: ä¸ä¸€è‡´<br>deveration: æ¨å¯¼<br>arbitraryï¼š éšæ„çš„<br>immutableï¼š ä¸å¯å˜<br>implications: å«ä¹‰<br>ledgerï¼š è´¦æœ¬<br>traversal: éå†<br>PMTs: Partricia Merkle tries<br>sealed: å¯†å°.<br>Permenant: æ°¸æ’çš„<br>Ephemeralï¼š çŸ­æš‚çš„<br>Constantly: ä¸æ–­çš„<br>prefixes: å‰ç¼€<br>recursion: é€’å½’<br>portionï¼š éƒ¨åˆ†<br>adjacent: é‚»è¿‘çš„<br>neat mechanisms: æ•´æ´çš„æœºåˆ¶<br>consists: åŒ…å«<br>crowdfunding: ä¼—ç­¹<br>parseï¼š è§£æ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Blockchain and cryto</title>
      <link href="/2023/05/11/blockchain-and-cryto/"/>
      <url>/2023/05/11/blockchain-and-cryto/</url>
      
        <content type="html"><![CDATA[<h1 id="Blockchain-and-cryto"><a href="#Blockchain-and-cryto" class="headerlink" title="Blockchain and cryto"></a>Blockchain and cryto</h1><h2 id="Purpose-of-blockchain"><a href="#Purpose-of-blockchain" class="headerlink" title="Purpose of blockchain"></a>Purpose of blockchain</h2><p>with a blockchain we can decentralize where code runs and agree on the output</p><ul><li>thereâ€™s no single owner of the codeâ€™s execution</li><li><ul><li>the code always run as a program.</li></ul></li><li><ul><li>the code transparently verifieable.<blockquote><p>the purpose of blockchain is to have a <b>network of computer agree upon a common state of data</b>.no person or organization can control this, erevryone should be able to practicipate in this process.</p></blockquote></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230511130710mneUCe.png?token=ALJ6LARDGOBC6O75NYEU56DELR4D6" alt="Picsee-20230511130710.png"></p><h2 id="blockchain-network"><a href="#blockchain-network" class="headerlink" title="blockchain network"></a>blockchain network</h2><ul><li>blockchain: protocal connecting these machines.</li><li>each machine or node will in the network will run code as it is writen.</li><li>the blockchain will enforce these rules.</li><li>since the program is enforced, it is called â€œsmart contractâ€.</li></ul><h2 id="bitcoin"><a href="#bitcoin" class="headerlink" title="bitcoin"></a>bitcoin</h2><ul><li>the first successful blockchain and crypto.</li><li>but there was much research and attempts before it</li><li>a lot of components were discovered today.</li></ul><h2 id="how-it-works"><a href="#how-it-works" class="headerlink" title="how it works"></a>how it works</h2><ul><li>proof of work - Security.</li><li>mining the rewards - fiancial incentives.</li><li>public key cryptography: Authenication.</li><li>linked data structures: chronology.</li><li>peer to peer connection: permissionless.<br>these components work together in concert.<br>decentralization emerges from a properly setup network</li></ul><h2 id="Cryto"><a href="#Cryto" class="headerlink" title="Cryto"></a>Cryto</h2><p>way before crytocurrences, there was cryto.<br>two important primitives for our purposes:</p><ul><li>crytographic hashes</li><li>publick key crytography.</li></ul><h3 id="hash-function"><a href="#hash-function" class="headerlink" title="hash function"></a>hash function</h3><p>hash: give me a input Iâ€™ll give u a fixed size output<br>input can be any type of data: image, string, video.</p><h3 id="crytographic-hash-function"><a href="#crytographic-hash-function" class="headerlink" title="crytographic hash function"></a>crytographic hash function</h3><p>a crytographic hash is a function with these  properties:</p><ul><li>deterministic</li><li>pseudorandom</li><li>one-way</li><li>fast to compute</li><li>collsion resistant.<br>sha256 is one such function which provides 256 bit outputs.</li></ul><h3 id="crytographic-hash-functions"><a href="#crytographic-hash-functions" class="headerlink" title="crytographic hash functions"></a>crytographic hash functions</h3><p>two important use cases for hash functions for us:</p><ul><li>commitments(smart contract)</li><li>proof of work</li></ul><h1 id="digital-signature"><a href="#digital-signature" class="headerlink" title="digital signature"></a>digital signature</h1><h2 id="symmetric-key"><a href="#symmetric-key" class="headerlink" title="symmetric key"></a>symmetric key</h2><p>same key on both sides.<br>communication security over an unsecured channels.<br>history</p><ul><li>military  </li><li><ul><li>key:324, msg: cat, encrypted: dog.<br>example:<br>aes: advanced encrypted standard.<br>downside: bothside must have the key beforehand.</li></ul></li></ul><h2 id="Asymmetric-key"><a href="#Asymmetric-key" class="headerlink" title="Asymmetric key"></a>Asymmetric key</h2><p>one public key, the other private key.<br>public key signs (encrypted).<br>private key verifies. (decrypted)</p><p>commonly referred to publicKey crytography.</p><h2 id="publick-key-in-web3"><a href="#publick-key-in-web3" class="headerlink" title="publick key in web3"></a>publick key in web3</h2><ul><li>users sign a transaction with their private key.</li><li>user boardcasts the transaction to blockchain.</li><li>blockchain nodes recover public key from signature from which the userâ€™s address is derived.</li></ul><h2 id="RSA-amp-ECDSA"><a href="#RSA-amp-ECDSA" class="headerlink" title="RSA &amp; ECDSA"></a>RSA &amp; ECDSA</h2><p>RSA based on publick key methonology. itâ€™s very easy to find the product of two prime numbers, yet extremely difficult to factor out those two prime numbers if you have the product</p><p>The ECDSA algorithm uses elliptic curves. It can provide the same level security as other public key algorithms with smaller key sizes, which is the reason itâ€™s become quite popular. It is the Digital Signing Algorithm used by Bitcoin, specifically the secp256k1 curve.</p><h1 id="proof-of-work-and-mining"><a href="#proof-of-work-and-mining" class="headerlink" title="proof of work and mining"></a>proof of work and mining</h1><h2 id="mining-key-points"><a href="#mining-key-points" class="headerlink" title="mining key points"></a>mining key points</h2><ol><li>mining is the process to create a block of transaction to be added to blockchain.</li><li>peers in the mining process are called â€˜minersâ€™</li></ol><ul><li>a. to network</li><li>b. miners provide processing power to network to exchange for chance to get rewards.</li></ul><p>mining has two main functions:</p><ol><li>consensus machanism </li><li>currency issuance</li></ol><p>in a decentralized enviorment we always have those issues:</p><ul><li>how  do all nodes agree on what current and future state of users account balance and contract interactions is?</li><li>who gets to add new blocks&#x2F;transactions to a chain.how do we know any blocks added are â€˜valuedâ€™</li><li>how we know all of these thing condinated without any central actor in place?</li></ul><p>the solution of those is consensus mechanism</p><h2 id="consensus-mechanism"><a href="#consensus-mechanism" class="headerlink" title="consensus mechanism"></a>consensus mechanism</h2><p>consensus mechanism means comming to a general agreement. <b> blockchain consensus mechanism typically means that at least 51% of nodes are in agreement over the current global state of the network</b>.</p><p>the main consensus  mechanism rules for proof-of-work typically look like religious commandments:</p><ul><li>cannot double spend</li><li>the longest chain will be the one the rest of the nodes accept as the one â€œtrueâ€ chain, determined by a chainâ€™s cumulative work. also known as <b>nakamoto consensus</b>.</li></ul><h2 id="mining-algorithm"><a href="#mining-algorithm" class="headerlink" title="mining algorithm"></a>mining algorithm</h2><p>when a miner â€˜minesâ€™ a block, what does the miner actually do?<br>mining software continously hashes a block until a hash is fount that meets a target difficulty.</p><h2 id="nonce"><a href="#nonce" class="headerlink" title="nonce"></a>nonce</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">sha256</span><span class="token punctuation">(</span><span class="token string">"Hi Grandma! coolgrandma555@hotmail.com 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f2d9e2â€¦</span><span class="token function">sha256</span><span class="token punctuation">(</span><span class="token string">"Hi Grandma! coolgrandma555@hotmail.com 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4ee36eâ€¦</span><span class="token function">sha256</span><span class="token punctuation">(</span><span class="token string">"Hi Grandma! coolgrandma555@hotmail.com 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c25e5câ€¦</span><span class="token comment">// keep on guessing, keep on guessingâ€¦</span><span class="token function">sha256</span><span class="token punctuation">(</span><span class="token string">"Hi Grandma! coolgrandma555@hotmail.com 424"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5552abâ€¦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ğŸ“– The number that weâ€™re appending on the end of the message here is generally referred to as a nonce. Weâ€™ll see how both Ethereum and Bitcoin make use of nonces in a few ways!</p></blockquote><h1 id="blockchain-structure"><a href="#blockchain-structure" class="headerlink" title="blockchain structure"></a>blockchain structure</h1><p>The image show three different ways of internet. the first way is centralized for trandional applications, if u want prove value, it decide by centre services. the second way is Decentralized, it always be missunderstanding to blockchain. but blockchain have a important way, it is peer to peer. so the last image shows blockchain.<br><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230512151717l6NMC5.png?token=ALJ6LAVM5B4V2TPXWKILYKTELXUDW" alt="Picsee-20230512151717.png"></p><p>thought challenges<br>Q: how do distributed p2p networks agree on what data is validated without a central administrator running the show?<br>A: Consensus machanisms</p><ul><li>the bitcoins network decides validity of new data based on who is able to produce a  prove of work.</li></ul><p>Q: how is the block hash calculate?<br>A: the hash function takes data as input and returns unique hashes.</p><p>Q: what is â€˜validâ€™ hash?<br>A: A valid hash is meet certain requirements.</p><ul><li>block index is greater than last block index.</li><li>block previous hash is equal to lastest block hash.</li><li>block hash meets difficulty requirements.</li><li>block hash is correct calculated.</li></ul><h1 id="UTXO-amp-Account-Models"><a href="#UTXO-amp-Account-Models" class="headerlink" title="UTXO &amp; Account Models"></a>UTXO &amp; Account Models</h1><p>trandional vs p2p<br><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230515201650tANILr.png" alt="Picsee-20230515201650.png"></p><p>Nodes in blockchain p2p network, like bitcoin, can leave and re-enter the network at will. bitcoin has nodes inclding the light nodes and full nodes.</p><ul><li><p>light nodes: a light node downloads only the block headers , which is the minimum data it need to transact on the network. a light node can validata a transaction because it is able to regenerate the spcific block it need to check by using this data. but this also have <b>limitations</b>, Light nodes will sometimes need to ask full nodes for the data they donâ€™t have access to, whilch could take longer than a full nodes validating the transaction. </p></li><li><p>full nodes: a full use and storage of data means that full nodes require a lot of computing and bandwidth resources. a full nodes download, stores, and verifies the full blockchain state-everything from block zero to the most recent blocks, which can take a weeks to sync.</p></li><li><p>achieve nodes: a full node trims entires that is no longer needed to verify, the latest interaction with the chain, the achive nodes maintain everything. these details are greating for querying information more efficiently and handy for a few applications, but are excessive for most case.</p></li></ul><h2 id="Account-models"><a href="#Account-models" class="headerlink" title="Account models"></a>Account models</h2><p>If you have a bank account, you are very familiar with this model of keeping track of user balances. The account model follows just that: accounts. It tracks the balances of users based on their overall account state, without any tracking on what constitutes the actual balance itself. In other words, an account-based ledger would mark an entry like this:<br><code>Acct #12345 -&gt; Name: Rick Sanchez -&gt; Balance: $142.62</code><br>Notice how the state of the account is kept very high-level? Rickâ€™s account balance is a dollar and cent amount and thatâ€™s it. There is no further information tracked on what the breakdown of the the balance is, for example: $142.62 is one $100 bill, one $20 bill, two $10 bills, eight quarters, five dimes, two nickels, two pennies. When Rick goes to an ATM and withdraws from his balance, he gets it in whatever bills + change the bank has at hand - not in the exact change it took to make up that balance in the first place.</p><p>What does a transaction look like in an account-based model?<br>  Alice has $60 total balance<br>  Bob has $20 total balance<br>  Bob sends Alice $5<br>  Bobâ€™s balance is subtracted $5, if the remaining balance is greater then 0, proceed, else revert<br>  Alice balance is summed $5<br>The ledger is marked in both ends to update total balances and that is the end of the transaction in an account-based model.<br>This might seem weird. Why would we want to keep track of these details for something as simple as a total balance? Weâ€™ll look at a model for keeping user balances that does include this feature: the UTXO model.</p><h2 id="UTXO"><a href="#UTXO" class="headerlink" title="UTXO"></a>UTXO</h2><p>Ethereum uses the account-based model, while Bitcoin uses UTXOs (short for Unspent Transaction Outputs) to keep track of user state&#x2F;balances.</p><p>The UTXO model differs pretty drastically from the account model. Itâ€™s a little bit more complex - mainly because it is not a familiar interface like the account model is! Yet it does set up some interesting featuresâ€¦</p><p>What is a UTXO? ğŸ¤”**<br>Alice sends Bob 5 BTC in the form of a transaction relayed to the Bitcoin network. At this point, if the transaction is valid (Alice has &gt; 5 BTC, Alice owns the relevant private keys and can produce a signature, etc), Alice is signaling an intent to change user state. When the Bitcoin network mines Aliceâ€™s transaction, Bob is credited with a UTXO worth 5 BTC. This is how the Bitcoin network keeps track of user balances - it keeps a really big long set of UTXOs - outputs out of state-changing transactions that credit users with a certain amount of BTC.</p><p>So when people say: â€œI own 3 bitcoinsâ€, they should really be saying: â€œI own some UTXOs that allow me to spend 3 bitcoins.â€ - or using the Drake meme:<br><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230516115235KUFjj8.png" alt="Picsee-20230516115235.png"></p><h2 id="Account-vs-UTXO"><a href="#Account-vs-UTXO" class="headerlink" title="Account vs UTXO"></a>Account vs UTXO</h2><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230516115016DvofGv.png" alt="Picsee-20230516115016.png"></p><h3 id="conclusions"><a href="#conclusions" class="headerlink" title="conclusions"></a>conclusions</h3><p>Deciding what model to go with is a game of design tradeoffs. Ethereum uses the account-based model transactions must be more flexible to account for the many moving pieces of state in the system. Bitcoin uses UTXOs as it is a network purposefully designed to be as simple and stateless as possible.</p><p>scriptPubKey<br>scriptPubKey also called â€œwitness scriptâ€ or the â€œlocking scriptâ€.<br>for each locking script there should be an unlocking script that will unlock the UTXO and allow it to spent. typically, all the unlocking scripts needs to provide is a signature for to verify ownership of the public key. then the public key need to match the address after two hashed twice.</p><blockquote><p>Here have a interesting things, the first block of bitcoin( or called genesis block ) canâ€™t be spent because it donâ€™t have coinbase, we donâ€™t why Satoshi donâ€™t give the block coinbase. but if a block that donâ€™t have coinbase, thus all of the nodes will reject the transaction. so we never spent! itâ€™s fovever bount to 1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa.</p></blockquote><p>bitcon script<br>the bitcon script language is meant to be a simple stack-based that has no loops so it also will be resolved and there are no denial of the service attacks. the language is basically a list of function like operations code.</p><blockquote><p><code>&lt;a href=&#39;https://bitcoin.stackexchange.com/questions/29754/history-behind-the-scripting-language-in-bitcoin/29763#29763&#39;&gt; bitcon script history&lt;/a&gt;</code></p></blockquote><h1 id="aka"><a href="#aka" class="headerlink" title="aka"></a>aka</h1><p>ethereum: ä»¥å¤ªåŠ<br>Blockchain: åŒºå—é“¾<br>Cryptoï¼š åŠ å¯†<br>crytocurrencts: åŠ å¯†è´§å¸<br>decentralized: å»ä¸­å¿ƒåŒ–<br>bitcoinï¼š æ¯”ç‰¹å¸ï¼Œç¬¬ä¸€ä¸ªåŸºäºåŒºå—é“¾æŠ€æœ¯å®ç°çš„åŠ å¯†è´§å¸<br>fiancial incentivesï¼š é‡‘èå¥–åŠ±<br>mining the rewardsï¼š æŒ–çŸ¿<br>deterministic: ç¡®å®šæ€§<br>pseudorandom: ä¼ªéšæœº<br>collsion resistant: æŠ—ç¢°æ’<br>consensus: å…±è¯†ï¼Œä¸€ä¸ªç½‘ç»œå¯¹æ•°æ®çš„çŠ¶æ€è¾¾æˆå…±è¯†ã€‚<br>censorshipï¼šå®¡æŸ¥<br>bribeï¼š è´¿èµ‚<br>drill homeï¼š é’»ç ”<br>relatively travelï¼šç›¸å¯¹è¾ƒå°çš„<br>infeasibleï¼š ä¸å¯èƒ½<br>symmetric: å¯¹ç§°<br>digital signature: æ•°å­—ç­¾å<br>RSA: éå¯¹ç§°åŠ å¯†çš„ç»å…¸å®ç°<br>ECDSAï¼š bitcoiné‡‡ç”¨çš„éå¯¹ç§°åŠ å¯†ç®—æ³•<br>etherï¼š ä»¥å¤ªå¸<br>addressï¼š äº¤æ˜“å‘èµ·æ–¹ç±»ä¼¼äºip, bitcoin ä½¿ç”¨checksum and base58, ethereum is last 20 bytes of the hash of the public key.<br>Enforcementï¼š æ‰§è¡Œ<br>consensus rulesï¼š å…±è¯†è§„åˆ™<br>consensus mechanismsï¼šåå•†ä¸€è‡´<br>inter-changeable: å¯äº’æ¢çš„<br>cumulative: ç§¯ç´¯å‹<br>nakamoto consensusï¼š æœ€é•¿çš„chainå°†æ˜¯å…¶ä»–èŠ‚ç‚¹æ¥å—çš„ä¸€ä¸ªçœŸæ­£çš„é“¾ï¼Œä»–æ˜¯ç”±ä¸€æ¡é“¾ç§¯ç´¯çš„å·¥ä½œæ‰€å†³å®šçš„ã€‚<br>txs: transactions.<br>pos: proof of stack, posä¸­ï¼Œå‚ä¸è€…éœ€è¦æŒæœ‰ä¸€å®šæ•°é‡çš„crytocurrencyï¼Œå‚ä¸è®°è´¦è¿‡ç¨‹ï¼Œç›¸æ¯”powï¼Œposä¸éœ€è¦å¤§é‡çš„ç®—åŠ›<br>pow: proof of workï¼Œminersé€šè¿‡è®¡ç®—æ¥æ·»åŠ txså’Œblockï¼Œéœ€è¦æ¶ˆè€—ç®—åŠ›ã€‚å¯ä»¥å¢åŠ security of  blockchain<br>merkle rootï¼šé»˜å…‹å°”æ ¹ï¼Œç”¨æ¥éªŒè¯å’Œç¡®è®¤äº¤æ˜“æ˜¯å¦è¢«ç¯¡æ”¹ã€‚<br>underlying: åº•å±‚<br>hashcashï¼š Hashcashå·¥ä½œé‡è¯æ˜åŠŸèƒ½ç”±Adam Backäº 1997 å¹´å‘æ˜ï¼Œå¹¶å»ºè®®ç”¨äºå DoS ç”¨é€”<br>Byzantine Generalâ€™s Problemï¼š åœ¨p2påœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¯æ˜æ¯ä¸ªæœºå™¨éƒ½æ˜¯åœ¨å·¥ä½œçš„ã€‚<br>manipulateï¼š æ“ä½œ<br>Genesis Block: ç¬¬ä¸€ä¸ªåŠ å…¥åˆ°åŒºå—é“¾ä¸­çš„å—ï¼Œåˆå§‹å—<br>cost-effective: æˆæœ¬æ•ˆç›Š<br>UTXOï¼šUnspent Transaction Output, æœªä½¿ç”¨çš„äº¤æ˜“<br>Retrospectiveï¼š å›é¡¾<br>vulnerableï¼š è„†å¼±çš„<br>light nodes: è½»èŠ‚ç‚¹ ï¼ˆå­˜å‚¨å—å¤´çš„è½»èŠ‚ç‚¹ï¼‰<br>full nodesï¼šå®Œæ•´èŠ‚ç‚¹ï¼ˆå¸¸è§„èŠ‚ç‚¹ï¼‰<br>achieve nodes: å½’æ¡£èŠ‚ç‚¹ï¼Œ å®Œæ•´èŠ‚ç‚¹ï¼ˆå·²éªŒè¯çš„å­˜æ¡£èŠ‚ç‚¹ï¼‰<br>bandwidthï¼š å¸¦å®½<br>configure: é…ç½®<br>variablesï¼š å˜é‡<br>discrepanciesï¼š å·®å¼‚<br>tradeoffsï¼š æƒè¡¡åˆ©å¼Š<br>contrastï¼š å¯¹æ¯”<br>unfakeableï¼š ä¸å¯ä¼ªé€ <br>replicateï¼š å¤åˆ¶<br>Satoshi: â€œSatoshiâ€ refers to the smallest unit of the cryptocurrency Bitcoin<br>individualï¼š ä¸ªäºº<br>multitudeï¼š ä¼—å¤šçš„<br>aggregateï¼š æ€»æ•°<br>expediteï¼š åŠ å¿«<br>hefty prize ï¼š å·¨é¢å¥–é‡‘<br>controlled supplyï¼š å—æ§ä¾›åº”<br>intentional: æ•…æ„çš„<br>quirkï¼š æ€ªç™–<br>denial: å¦è®¤<br>distinguishï¼š è¾¨åˆ«<br>precedingï¼š å‰é¢<br>emergeï¼š å‡ºç°<br>hierarchically: å±‚æ¬¡åˆ†æ˜<br>intimidatingï¼š ä»¤äººç”Ÿç•çš„<br>underneathï¼š åº•ä¸‹<br>infactingï¼šè¿æ¥<br>concatenateï¼š ä¸²è”<br>optimizationï¼š ä¼˜åŒ–<br>inconsistencies: ä¸ä¸€è‡´<br>deveration: æ¨å¯¼<br>arbitraryï¼š éšæ„çš„<br>immutableï¼š ä¸å¯å˜<br>implications: å«ä¹‰<br>ledgerï¼š è´¦æœ¬<br>traversing: éå†<br>PMTs: Partricia Merkle tries<br>sealed: å¯†å°.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Web3, Blockchain, </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-base</title>
      <link href="/2023/02/17/interview/"/>
      <url>/2023/02/17/interview/</url>
      
        <content type="html"><![CDATA[<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><h2 id="1-é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ-importæœ‰ä»€ä¹ˆåŒºåˆ«-html"><a href="#1-é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ-importæœ‰ä»€ä¹ˆåŒºåˆ«-html" class="headerlink" title="1.é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ@importæœ‰ä»€ä¹ˆåŒºåˆ«(html)"></a>1.é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ@importæœ‰ä»€ä¹ˆåŒºåˆ«(html)</h2><ol><li>link å±äºhtmlæä¾›çš„æ ‡ç­¾</li><li>@import å±äº css æä¾›çš„æ ‡ç­¾</li><li>link å¼•å…¥çš„æ ·å¼åœ¨é¡µé¢åŠ è½½æ—¶åŒæ—¶åŠ è½½ï¼Œè€Œ@importæ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹ååŠ è½½</li><li>link æ²¡æœ‰å…¼å®¹é—®é¢˜ï¼Œ@importåˆ™éœ€è¦åœ¨ES5ä»¥ä¸Šç‰ˆæœ¬</li><li>link å¼•å…¥çš„å¯ä»¥é€šè¿‡jsæ“ä½œdomï¼Œ è€Œ@import ä¸å¯ä»¥ã€‚</li></ol><h2 id="2-htmlçš„å…ƒç´ æœ‰å“ªäº›ï¼ˆåŒ…å«H5ï¼‰ï¼Ÿ-html"><a href="#2-htmlçš„å…ƒç´ æœ‰å“ªäº›ï¼ˆåŒ…å«H5ï¼‰ï¼Ÿ-html" class="headerlink" title="2.htmlçš„å…ƒç´ æœ‰å“ªäº›ï¼ˆåŒ…å«H5ï¼‰ï¼Ÿ(html)"></a>2.htmlçš„å…ƒç´ æœ‰å“ªäº›ï¼ˆåŒ…å«H5ï¼‰ï¼Ÿ(html)</h2><p>å—å…ƒç´ </p><ul><li>div</li><li>ul</li><li>li</li><li>header å¤´éƒ¨</li><li>body æ–‡æœ¬å†…å®¹</li><li>title æ ‡ç­¾</li><li>style æ ·å¼</li></ul><p>è¡Œå†…å…ƒç´  </p><ul><li>span</li><li>a</li><li>td</li><li>tl</li><li>b</li><li>button</li></ul><h2 id="3-iframeæ¡†æ¶éƒ½æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ-html"><a href="#3-iframeæ¡†æ¶éƒ½æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ-html" class="headerlink" title="3.iframeæ¡†æ¶éƒ½æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ(html)"></a>3.iframeæ¡†æ¶éƒ½æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ(html)</h2><p>Props:</p><ol><li>å¯ä»¥ç”¨ä½œè·¨åŸŸè¯·æ±‚</li><li>å•ä¸ªiframeçª—å£åˆ·æ–°ä¸ä¼šå½±å“æ•´ä½“é¡µé¢</li></ol><p>Cons:</p><ol><li>window.onload ä¼šåœ¨æ‰€æœ‰iframeçª—å£åŠ è½½å®Œæ¯•ä¹‹åå†æ‰§è¡Œ</li><li>iframe å­˜åœ¨å¤šä¸ªæ„å‘³ç€éœ€è¦åŠ è½½å¤šä¸ªcss\js æ–‡ä»¶ï¼Œå› æ­¤ä¼šåŠ å¤§æœåŠ¡å™¨çš„è´Ÿè·ã€‚</li><li>å¯¹æœç´¢ä¸å‹å¥½</li><li>æ»šåŠ¨æ¡é—®é¢˜</li></ol><h2 id="4-HTML5çš„æ–‡ä»¶ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ-html"><a href="#4-HTML5çš„æ–‡ä»¶ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ-html" class="headerlink" title="4. HTML5çš„æ–‡ä»¶ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ(html)"></a>4. HTML5çš„æ–‡ä»¶ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ(html)</h2><p>ä½¿ç”¨<br>ç°æœ‰çš„webæ¡†æ¶ï¼Œä¾‹å¦‚vueï¼Œreactç­‰å·²ç»å°†ç¦»çº¿å­˜å‚¨åˆå¹¶åˆ°æ¡†æ¶ä¸­ï¼Œå› æ­¤åŸºæœ¬æ˜¯å¼€ç®±å³ç”¨çš„<br>åŸç†<br>å½“å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨æ—¶é¦–å…ˆæ³¨å†Œä¸€ä¸ªservice workï¼Œç„¶ååˆ©ç”¨service workæ‹¦æˆªå¹¶ç¼“å­˜é¡µé¢æ‰€éœ€è¦çš„èµ„æºï¼Œå½“ç¦»çº¿çš„æ—¶ï¼Œä¼šä¼˜å…ˆä»service workè¯»å–éœ€è¦çš„èµ„æºã€‚</p><h2 id="5-æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ-html"><a href="#5-æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ-html" class="headerlink" title="5. æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ(html)"></a>5. æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ(html)</h2><p>åŒæº</p><ol><li>localstorage</li><li>cookie</li></ol><p>è·¨åŸŸ</p><ol><li>websocket</li><li>postMessage (iframe éœ€è¦å’Œçˆ¶çº§é¡µé¢é€šè®¯æ—¶å¯èƒ½ä¼šç”¨åˆ°</li></ol><h2 id="6-å¸¸è§çš„æµè§ˆå™¨å†…æ ¸éƒ½æœ‰å“ªäº›ï¼Ÿå¹¶ä»‹ç»ä¸‹ä½ å¯¹å†…æ ¸çš„ç†è§£-html"><a href="#6-å¸¸è§çš„æµè§ˆå™¨å†…æ ¸éƒ½æœ‰å“ªäº›ï¼Ÿå¹¶ä»‹ç»ä¸‹ä½ å¯¹å†…æ ¸çš„ç†è§£-html" class="headerlink" title="6. å¸¸è§çš„æµè§ˆå™¨å†…æ ¸éƒ½æœ‰å“ªäº›ï¼Ÿå¹¶ä»‹ç»ä¸‹ä½ å¯¹å†…æ ¸çš„ç†è§£(html)"></a>6. å¸¸è§çš„æµè§ˆå™¨å†…æ ¸éƒ½æœ‰å“ªäº›ï¼Ÿå¹¶ä»‹ç»ä¸‹ä½ å¯¹å†…æ ¸çš„ç†è§£(html)</h2><p>æµè§ˆå™¨å†…æ ¸åˆ†ä¸ºæ¸²æŸ“å¼•æ“å’Œjså¼•æ“</p><ol><li><p>æ¸²æŸ“å¼•æ“<br>ç”¨æ¥æ¸²æŸ“html,xmlæˆ–è€…å€ŸåŠ©æ’ä»¶æ¸²æŸ“pdfæ–‡ä»¶ç­‰ï¼Œæ ¹æ®htmlæ ‡ç­¾ç”Ÿæˆå¸ƒå±€æ ‘ï¼Œæ¸²æŸ“æ ‘ç­‰ã€‚<br>Chrome ï¼ˆwebkitï¼‰<br>Safari  ï¼ˆwebkitï¼Œå’ŒChromeå¸ˆå‡ºåŒé—¨ï¼Œä½†æ˜¯åç»­Safariçš„webkitåšäº†ä¸€äº›å•ç‹¬çš„æ”¹åŠ¨ï¼‰<br>Gecko ï¼ˆC++å¼•æ“ï¼Œfirefoxï¼‰<br>Trident ï¼ˆIE å†…æ ¸ï¼‰<br>Presto ï¼ˆOpera å†…æ ¸ï¼‰</p></li><li><p>jså¼•æ“<br>æ‰§è¡Œå’Œè§£æjsæ–‡ä»¶<br>V8 ï¼ˆchromeï¼‰</p></li></ol><h2 id="7-html5ä¸­çš„formæ€ä¹ˆå…³é—­è‡ªåŠ¨å®Œæˆ-html"><a href="#7-html5ä¸­çš„formæ€ä¹ˆå…³é—­è‡ªåŠ¨å®Œæˆ-html" class="headerlink" title="7.html5ä¸­çš„formæ€ä¹ˆå…³é—­è‡ªåŠ¨å®Œæˆ(html)"></a>7.html5ä¸­çš„formæ€ä¹ˆå…³é—­è‡ªåŠ¨å®Œæˆ(html)</h2><p>autocomplete &#x3D; â€œoffâ€</p><h2 id="8-ä¸ºä»€ä¹ˆHTML5åªéœ€è¦å†™-lt-DOCTYPE-HTML-gt-å°±å¯ä»¥ï¼Ÿ-html"><a href="#8-ä¸ºä»€ä¹ˆHTML5åªéœ€è¦å†™-lt-DOCTYPE-HTML-gt-å°±å¯ä»¥ï¼Ÿ-html" class="headerlink" title="8.ä¸ºä»€ä¹ˆHTML5åªéœ€è¦å†™&lt;!DOCTYPE HTML&gt;å°±å¯ä»¥ï¼Ÿ(html)"></a>8.ä¸ºä»€ä¹ˆHTML5åªéœ€è¦å†™<code>&lt;!DOCTYPE HTML&gt;</code>å°±å¯ä»¥ï¼Ÿ(html)</h2><p>H5ä¹‹å‰ä»¥DTDä¿è¯æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œè¿˜åˆ†ä¸ºä¸¥æ ¼æ¨¡å¼å’Œæ ‡å‡†æ¨¡å¼ï¼Œå¦‚æœä¸å†™çš„è¯åˆ™ä¼šå˜æˆæ€ªå¼‚æ¨¡å¼<br>H5ä¸åŸºäºDTDï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ä¸ªæ ¹å…ƒç´ å³å¯ã€‚</p><h2 id="9-æ€æ ·åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ-html"><a href="#9-æ€æ ·åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ-html" class="headerlink" title="9. æ€æ ·åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ(html)"></a>9. æ€æ ·åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ(html)</h2><ol><li>div, radius: 50%</li><li>a, radius: 50%</li><li>button, radius: 50%</li><li>canvas ç»˜åˆ¶åœ†ï¼Œç›‘å¬canvas</li></ol><h2 id="10-jsæ”¾åœ¨htmlçš„-lt-body-gt-å’Œ-lt-head-gt-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-html"><a href="#10-jsæ”¾åœ¨htmlçš„-lt-body-gt-å’Œ-lt-head-gt-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-html" class="headerlink" title="10. jsæ”¾åœ¨htmlçš„&lt;body&gt;å’Œ&lt;head&gt;æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ(html)"></a>10. jsæ”¾åœ¨htmlçš„<code>&lt;body&gt;</code>å’Œ<code>&lt;head&gt;</code>æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ(html)</h2><p>htmlæŒ‰ç…§æ ‡ç­¾é¡ºåºæ‰§è¡Œï¼ˆæœªåŠ defer || asyncæ ‡è®°çš„æƒ…å†µä¸‹ï¼‰ï¼Œå¦‚æœåŠ jsæ ‡ç­¾åŠ åœ¨headå°±ä¼šå¯¼è‡´domæ ‘è¿˜æ²¡æ¸²æŸ“ï¼Œå°±åŠ è½½jsçš„æƒ…å†µã€‚</p><h2 id="11-è¯´è¯´ä½ å¯¹å±æ€§data-çš„ç†è§£-html"><a href="#11-è¯´è¯´ä½ å¯¹å±æ€§data-çš„ç†è§£-html" class="headerlink" title="11.è¯´è¯´ä½ å¯¹å±æ€§data-çš„ç†è§£(html)"></a>11.è¯´è¯´ä½ å¯¹å±æ€§data-çš„ç†è§£(html)</h2><p>data- æ˜¯è‡ªå®šä¹‰å±æ€§ï¼Œç”¨æ¥æš‚å­˜éç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œåœ¨jsä¸­ä¹Ÿèƒ½è·å–ã€‚</p><h2 id="12-è¯·è¯´è¯´-lt-script-gt-ã€-lt-script-async-gt-å’Œ-lt-script-defer-gt-çš„åŒºåˆ«-html"><a href="#12-è¯·è¯´è¯´-lt-script-gt-ã€-lt-script-async-gt-å’Œ-lt-script-defer-gt-çš„åŒºåˆ«-html" class="headerlink" title="12. è¯·è¯´è¯´&lt;script&gt;ã€&lt;script async&gt;å’Œ&lt;script defer&gt;çš„åŒºåˆ«(html)"></a>12. è¯·è¯´è¯´<code>&lt;script&gt;ã€&lt;script async&gt;å’Œ&lt;script defer&gt;</code>çš„åŒºåˆ«(html)</h2><p>script ç«‹å³åŠ è½½<br>async åŠ è½½å’Œæ¸²æŸ“åŒæ—¶æ‰§è¡Œ<br>defer æ¸²æŸ“å®Œæˆåæ‰§è¡Œ</p><h2 id="13-è§£é‡Šä¸‹ä½ å¯¹GBKå’ŒUTF-8çš„ç†è§£ï¼Ÿå¹¶è¯´è¯´é¡µé¢ä¸Šäº§ç”Ÿä¹±ç çš„å¯èƒ½åŸå› -html"><a href="#13-è§£é‡Šä¸‹ä½ å¯¹GBKå’ŒUTF-8çš„ç†è§£ï¼Ÿå¹¶è¯´è¯´é¡µé¢ä¸Šäº§ç”Ÿä¹±ç çš„å¯èƒ½åŸå› -html" class="headerlink" title="13. è§£é‡Šä¸‹ä½ å¯¹GBKå’ŒUTF-8çš„ç†è§£ï¼Ÿå¹¶è¯´è¯´é¡µé¢ä¸Šäº§ç”Ÿä¹±ç çš„å¯èƒ½åŸå› (html)"></a>13. è§£é‡Šä¸‹ä½ å¯¹GBKå’ŒUTF-8çš„ç†è§£ï¼Ÿå¹¶è¯´è¯´é¡µé¢ä¸Šäº§ç”Ÿä¹±ç çš„å¯èƒ½åŸå› (html)</h2><p>GBK æ˜¯ä¸­å›½ä½¿ç”¨çš„è¯­è¨€ç¼–ç æ ‡å‡†ï¼ŒåŒ…æ‹¬ç®€ä½“å’Œç¹ä½“<br>UTF-8 æ˜¯å…¨çƒé€šç”¨çš„è¯­è¨€ç¼–ç æ ‡å‡†ï¼Œ<br>å¦‚æœäº§ç”Ÿä¹±ç ï¼Œå¯èƒ½æ˜¯html meta æ ‡ç­¾çš„è¯­è¨€ç¼–ç å’Œå®é™…ä½¿ç”¨ä¸ä¸€è‡´çš„æƒ…å†µ</p><h2 id="14-è¯´è¯´ä½ å¯¹-lt-meta-gt-æ ‡ç­¾çš„ç†è§£-html"><a href="#14-è¯´è¯´ä½ å¯¹-lt-meta-gt-æ ‡ç­¾çš„ç†è§£-html" class="headerlink" title="14. è¯´è¯´ä½ å¯¹&lt;meta&gt;æ ‡ç­¾çš„ç†è§£(html)"></a>14. è¯´è¯´ä½ å¯¹<code>&lt;meta&gt;</code>æ ‡ç­¾çš„ç†è§£(html)</h2><ol><li>meta æœ€å¸¸è§çš„ç”¨å¤„æ˜¯ç”¨æ¥å£°æ˜è¯­è¨€ç¼–ç æ ‡å‡†</li><li>æ­¤å¤– name:keywords: é…åˆseoä½¿ç”¨</li></ol><h2 id="15-ç½‘é¡µä¸Šçš„éªŒè¯ç æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯´è¯´ä½ äº†è§£çš„éªŒè¯ç ç§ç±»æœ‰å“ªäº›-html"><a href="#15-ç½‘é¡µä¸Šçš„éªŒè¯ç æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯´è¯´ä½ äº†è§£çš„éªŒè¯ç ç§ç±»æœ‰å“ªäº›-html" class="headerlink" title="15.ç½‘é¡µä¸Šçš„éªŒè¯ç æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯´è¯´ä½ äº†è§£çš„éªŒè¯ç ç§ç±»æœ‰å“ªäº›(html)"></a>15.ç½‘é¡µä¸Šçš„éªŒè¯ç æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè¯´è¯´ä½ äº†è§£çš„éªŒè¯ç ç§ç±»æœ‰å“ªäº›(html)</h2><ol><li>é˜²æ­¢ æœºå™¨è¡Œä¸º ï¼ˆé‡å¤è¯·æ±‚ï¼Œæ³¨å†Œï¼‰</li><li>ä¿æŠ¤æœåŠ¡å™¨ä¸ä¼šæ¥å—è¿‡å¤šè¯·æ±‚<br>å›¾å½¢ï¼Œæ»‘åŠ¨ï¼Œé€‰å­—</li></ol><h2 id="16-DOMå’ŒBOMæœ‰ä»€ä¹ˆåŒºåˆ«-html"><a href="#16-DOMå’ŒBOMæœ‰ä»€ä¹ˆåŒºåˆ«-html" class="headerlink" title="16. DOMå’ŒBOMæœ‰ä»€ä¹ˆåŒºåˆ«(html)"></a>16. DOMå’ŒBOMæœ‰ä»€ä¹ˆåŒºåˆ«(html)</h2><p>BOM: Browser of model<br>DOM: Document of model<br>BOM æ˜¯ç‹¬ç«‹äºå†…å®¹äºæµè§ˆå™¨è¿›è¡Œäº¤äº’çš„å¯¹è±¡ï¼Œæ˜¯æµè§ˆå™¨æä¾›ç»™jsç”¨æ¥å’Œæµè§ˆå™¨äº¤äº’çš„æ¥å£ï¼Œä¾‹å¦‚Windowå¯¹è±¡ä¸‹çš„æ–¹æ³•ï¼Œnavigation, history,<br>DOM æ˜¯htmlæä¾›ç»™jsçš„APIæ¥å£ï¼Œå¯ä»¥ç†è§£ä¸ºç”¨æ¥æ“ä½œhtmlå…ƒç´ çš„æ¥å£ï¼Œä¾‹å¦‚Documentå¯¹è±¡ä¸‹çš„æ–¹æ³•ã€‚<br><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230227162725aL5CT5.png?token=ALJ6LAVVI4JVZA6BAEC6PTLD7RU22" alt="Picsee-20230227162725.png"></p><h2 id="17-æ€ªå¼‚æ¨¡å¼Quirkså’Œæ ‡å‡†æ¨¡å¼Standardsæœ‰ä»€ä¹ˆåŒºåˆ«-html"><a href="#17-æ€ªå¼‚æ¨¡å¼Quirkså’Œæ ‡å‡†æ¨¡å¼Standardsæœ‰ä»€ä¹ˆåŒºåˆ«-html" class="headerlink" title="17. æ€ªå¼‚æ¨¡å¼Quirkså’Œæ ‡å‡†æ¨¡å¼Standardsæœ‰ä»€ä¹ˆåŒºåˆ«(html)"></a>17. æ€ªå¼‚æ¨¡å¼Quirkså’Œæ ‡å‡†æ¨¡å¼Standardsæœ‰ä»€ä¹ˆåŒºåˆ«(html)</h2><p>æ ‡å‡†æ¨¡å¼çš„å®½åº¦å°±æ˜¯ç»™å®šçš„æœ¬èº«ï¼Œè€Œæ€ªå¼‚æ¨¡å¼å†…å®¹åŠ padding + borderè€Œä¸ç®—ä¸Šmargin<br>é»˜è®¤æƒ…å†µä¸‹æµè§ˆå™¨ä½¿ç”¨çš„æ ‡å‡†æ¨¡å¼ï¼Œè€Œå¤§å®¶ä¸€èˆ¬ä¹ æƒ¯ä½¿ç”¨æ€ªå¼‚æ¨¡å¼ï¼Œæ‰€ä»¥åªéœ€è¦ä½¿ç”¨<code>border-sizing: border-box</code></p><h2 id="18-cookie-session-and-storage-BROWSER"><a href="#18-cookie-session-and-storage-BROWSER" class="headerlink" title="18. cookie, session and storage(BROWSER)"></a>18. cookie, session and storage(BROWSER)</h2><p>cookie æ˜¯ä¸€ç§åè®®ï¼Œä¸å±äºæœåŠ¡ç«¯ä¹Ÿä¸å±äºå®¢æœç«¯ï¼Œä½†æ˜¯é€šå¸¸åœ¨æœåŠ¡ç«¯äº§ç”Ÿã€‚<br>session åç«¯ä¼šè¯çš„ä¸€ç§æœºåˆ¶<br>storage åˆ†ä¸ºlocalstorage å’Œsessionstorage<br>localstorage æ˜¯å°†æ•°æ®æ°¸ä¹…å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå­˜å‚¨åˆ°äº†ç”µè„‘çš„å†…å­˜å’Œç¡¬ç›˜ä¸­ï¼ŒåŒæºå…±äº«</p><ul><li>ä¸ä¼šéšç€ä¼šè¯çš„å…³é—­è€Œæ¶ˆå¤±</li><li>å±æ€§åç›¸å…³çš„æƒ…å†µä¸‹ä¼šäº§ç”Ÿè¦†å†™</li><li>ä¸å¤§äº5MB</li><li>å­˜å‚¨çš„æ—¶å€™å­˜å‚¨çš„æ˜¯å­—ç¬¦ä¸²</li></ul><p>sessionstorage ä¼šè¯å­˜å‚¨ï¼Œä¸èƒ½å…±äº«ï¼Œå½“é¡µé¢å…³é—­æ—¶æ•°æ®ä¹Ÿä¼šæ¶ˆå¤±</p><p>cookie æ˜¯httpåè®®ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºhttpæ˜¯æ— çŠ¶æ€åè®®ï¼Œå› æ­¤å‰åç«¯ä¸ºäº†éªŒè¯æ˜¯å¦ç™»é™†çŠ¶æ€ï¼Œè€Œä½¿ç”¨cookieï¼Œå‰ç«¯åœ¨è·å–åˆ°cookieåå¯ä»¥å°†cookieå­˜å‚¨åœ¨æµè§ˆå™¨ï¼Œå¹¶ä¸”åœ¨æ¯ä¸€æ¬¡è¯·æ±‚æ—¶åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ï¼ŒæœåŠ¡ç«¯å¯ä»¥è¿›è¡ŒéªŒè¯ï¼Œä»¥æ­¤ç¡®è®¤ç™»é™†çŠ¶æ€</p><p>session æ˜¯æœåŠ¡å™¨å­˜å‚¨çš„ä¸€ç§æœºåˆ¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šå°†sessionå‘é€ç»™æµè§ˆå™¨ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚ç™»é™†æ—¶ï¼Œä¼šå°†è´¦å·å¯†ç ä¸€å¹¶å‘é€ç»™æœåŠ¡ç«¯ï¼Œå½“æœåŠ¡ç«¯éªŒè¯å®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ªsessionæ–‡ä»¶ï¼Œä¹‹åçš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šå°†session-idå†™å…¥cookieå¹¶ä¸”å°†cookieå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨è¯·æ±‚æ—¶å°†cookieæºå¸¦å‘ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è§£å¯†åå¾—åˆ°session- IDï¼Œæ ¹æ®session-idå»æŸ¥çœ‹sessionæ–‡ä»¶ï¼Œå¦‚æœåŒ¹é…åˆ™è¡¨æ˜ç™»é™†æˆåŠŸï¼Œã€‚</p><p>cookie vs session<br>å­˜å‚¨</p><ul><li>cookieå¦‚æœä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œéšç€æµè§ˆå™¨å…³é—­è€Œæ¶ˆå¤±ï¼Œè¿™ç§ç§°ä¸ºä¼šè¯cookieï¼Œå¦å¤–ä¸€ç§åˆ™ä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­</li><li>sessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯</li></ul><p>å­˜å‚¨å¤§å°</p><ul><li>cookie ä¸è¶…è¿‡4kb</li><li>session æ²¡æœ‰å¤§å°é™åˆ¶</li></ul><blockquote><p>è¯¦ç»†å¯å‚è€ƒ <a href="https://juejin.cn/post/6844903957916024839">https://juejin.cn/post/6844903957916024839</a></p></blockquote><h2 id="19-webSocketæ€ä¹ˆåšå…¼å®¹å¤„ç†ï¼Ÿ-PROTOCOL"><a href="#19-webSocketæ€ä¹ˆåšå…¼å®¹å¤„ç†ï¼Ÿ-PROTOCOL" class="headerlink" title="19.webSocketæ€ä¹ˆåšå…¼å®¹å¤„ç†ï¼Ÿ(PROTOCOL)"></a>19.webSocketæ€ä¹ˆåšå…¼å®¹å¤„ç†ï¼Ÿ(PROTOCOL)</h2><p>socket.io:<br>Adobe flash socket (éœ€è¦åœ¨æœåŠ¡å™¨å¼€ä¸€ä¸ªé¢å¤–çš„ç«¯å£)<br>Forever iframe<br>Ajax long polling<br>Ajax multipart streaming<br>JSONP polling</p><h2 id="20-å¦‚ä½•è®©å…ƒç´ å›ºå®šåœ¨é¡µé¢åº•éƒ¨ï¼Ÿæœ‰å“ªäº›æ¯”è¾ƒå¥½çš„å®è·µï¼Ÿ-CSS"><a href="#20-å¦‚ä½•è®©å…ƒç´ å›ºå®šåœ¨é¡µé¢åº•éƒ¨ï¼Ÿæœ‰å“ªäº›æ¯”è¾ƒå¥½çš„å®è·µï¼Ÿ-CSS" class="headerlink" title="20.å¦‚ä½•è®©å…ƒç´ å›ºå®šåœ¨é¡µé¢åº•éƒ¨ï¼Ÿæœ‰å“ªäº›æ¯”è¾ƒå¥½çš„å®è·µï¼Ÿ(CSS)"></a>20.å¦‚ä½•è®©å…ƒç´ å›ºå®šåœ¨é¡µé¢åº•éƒ¨ï¼Ÿæœ‰å“ªäº›æ¯”è¾ƒå¥½çš„å®è·µï¼Ÿ(CSS)</h2><ol><li>abousulte è¿›è¡Œå®šä½æ”¾åˆ°åº•éƒ¨ï¼Œéœ€è¦è‡ªè¡Œè®¡ç®—footerçš„é«˜åº¦</li><li>table ä½¿ç”¨è¡¨æ ¼å¸ƒå±€è¿›è¡Œåˆ’åˆ†ï¼Œå¦‚æœä½¿ç”¨marginç­‰ä¼šå­˜åœ¨å¾ˆå¤§çš„éº»çƒ¦</li><li>flex å¸ƒå±€ï¼Œåªéœ€è¦åœ¨å†…å®¹å—å¢åŠ flex:1, footer:0 å³å¯ï¼Œä½†æ˜¯éœ€è¦å¤„ç†å…¼å®¹é—®é¢˜<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">.wrapper &#123;  display: flex;  flex-direction: column;  overflow: auto;&#125;.content &#123;    flex: 1;&#125;.footer &#123;    flex: 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://jelly.jd.com/article/6006b1045b6c6a01506c87e3">https://jelly.jd.com/article/6006b1045b6c6a01506c87e3</a></p></blockquote></li></ol><h2 id="21-è¯´è¯´ä½ å¯¹WEBæ ‡å‡†å’ŒW3Cçš„ç†è§£ä¸è®¤è¯†ï¼Ÿ-html"><a href="#21-è¯´è¯´ä½ å¯¹WEBæ ‡å‡†å’ŒW3Cçš„ç†è§£ä¸è®¤è¯†ï¼Ÿ-html" class="headerlink" title="21. è¯´è¯´ä½ å¯¹WEBæ ‡å‡†å’ŒW3Cçš„ç†è§£ä¸è®¤è¯†ï¼Ÿ(html)"></a>21. è¯´è¯´ä½ å¯¹WEBæ ‡å‡†å’ŒW3Cçš„ç†è§£ä¸è®¤è¯†ï¼Ÿ(html)</h2><p>WEBæ ‡å‡†æŒ‡çš„æ˜¯éœ€è¦ç¬¦åˆECMAå’ŒW3C<br>W3Cæ˜¯é’ˆå¯¹css,html,js,xmlåˆ¶å®šçš„è§„èŒƒå¼€å‘è€…çš„åè®®å’Œå‡†å¤‡</p><h2 id="22-Formè¡¨å•æ˜¯æ€ä¹ˆä¸Šä¼ æ–‡ä»¶çš„ï¼Ÿä½ äº†è§£å®ƒçš„åŸç†å—ï¼Ÿ-html"><a href="#22-Formè¡¨å•æ˜¯æ€ä¹ˆä¸Šä¼ æ–‡ä»¶çš„ï¼Ÿä½ äº†è§£å®ƒçš„åŸç†å—ï¼Ÿ-html" class="headerlink" title="22. Formè¡¨å•æ˜¯æ€ä¹ˆä¸Šä¼ æ–‡ä»¶çš„ï¼Ÿä½ äº†è§£å®ƒçš„åŸç†å—ï¼Ÿ(html)"></a>22. Formè¡¨å•æ˜¯æ€ä¹ˆä¸Šä¼ æ–‡ä»¶çš„ï¼Ÿä½ äº†è§£å®ƒçš„åŸç†å—ï¼Ÿ(html)</h2><p><code>&lt;Input type = file/&gt;</code>æ˜¯ä¸€ä¸ªå—æ§å…ƒç´ ï¼Œä½¿ç”¨è¿™ä¸ªå…ƒç´ å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œè€Œæµè§ˆå™¨åœ¨æ¥å—åˆ°æ–‡ä»¶åä¼šå°†æ–‡ä»¶è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯éœ€è¦å’ŒæœåŠ¡ç«¯çº¦å®šå¥½enctypeï¼Œä¾‹å¦‚multipart&#x2F;form-dataï¼ŒæœåŠ¡ç«¯åœ¨æ¥å—åˆ°äºŒè¿›åˆ¶æ•°æ®åä¼šå°†å…¶è½¬æ¢ä¸ºæºæ–‡ä»¶å¹¶ä¸”ä¿å­˜ã€‚</p><h2 id="23-web-workersæœ‰ç”¨è¿‡å—ï¼Ÿèƒ½å¸®æˆ‘ä»¬è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ-BROWSER"><a href="#23-web-workersæœ‰ç”¨è¿‡å—ï¼Ÿèƒ½å¸®æˆ‘ä»¬è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ-BROWSER" class="headerlink" title="23.web workersæœ‰ç”¨è¿‡å—ï¼Ÿèƒ½å¸®æˆ‘ä»¬è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ(BROWSER)"></a>23.web workersæœ‰ç”¨è¿‡å—ï¼Ÿèƒ½å¸®æˆ‘ä»¬è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ(BROWSER)</h2><p>web workers æ˜¯h5æä¾›çš„èƒ½åŠ›ï¼Œæä¾›å¤šçº¿ç¨‹çš„èƒ½åŠ›ï¼Œå¦‚æœæ˜¯è¿ç®—å¯†é›†ä»»åŠ¡å¯ä»¥æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œç­‰è¿ç®—å®Œæ¯•åå†å‘é€å›ä¸»çº¿ç¨‹ã€‚å¹¶ä¸”å¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸cpu</p><h2 id="24-æœ‰ç”¨è¿‡HTML5çš„webSQLå’ŒIndexedDBå—ï¼Ÿè¯´è¯´ä½ å¯¹å®ƒä»¬çš„ç†è§£-HTML"><a href="#24-æœ‰ç”¨è¿‡HTML5çš„webSQLå’ŒIndexedDBå—ï¼Ÿè¯´è¯´ä½ å¯¹å®ƒä»¬çš„ç†è§£-HTML" class="headerlink" title="24.æœ‰ç”¨è¿‡HTML5çš„webSQLå’ŒIndexedDBå—ï¼Ÿè¯´è¯´ä½ å¯¹å®ƒä»¬çš„ç†è§£(HTML)"></a>24.æœ‰ç”¨è¿‡HTML5çš„webSQLå’ŒIndexedDBå—ï¼Ÿè¯´è¯´ä½ å¯¹å®ƒä»¬çš„ç†è§£(HTML)</h2><p>websql å’Œ indexdbéƒ½æ˜¯å®¢æˆ·ç«¯çš„å­˜å‚¨æ–¹æ¡ˆï¼Œwebsqlå·²ç»è¢«æ”¾å¼ƒï¼Œindexdbçš„ç‰¹ç‚¹æ˜¯ï¼šå­˜å‚¨ç©ºé—´å¤§ï¼Œå¯ä»¥ä½¿ç”¨å¼‚æ­¥å­˜å‚¨æ¨¡å¼ï¼Œå­˜æ”¾é”®å€¼å¯¹ï¼Œæ”¯æŒæ•°æ®åº“äº‹åŠ¡ï¼ŒåŒæ—¶å¯ä»¥å­˜å‚¨å¤šç§ç±»å‹åŒ…æ‹¬jså¯¹è±¡ç±»å‹ã€‚</p><h2 id="25-å†™ä¸ªä¾‹å­è¯´æ˜HTML5åœ¨ç§»åŠ¨ç«¯å¦‚ä½•æ‰“å¼€APP-HTML"><a href="#25-å†™ä¸ªä¾‹å­è¯´æ˜HTML5åœ¨ç§»åŠ¨ç«¯å¦‚ä½•æ‰“å¼€APP-HTML" class="headerlink" title="25. å†™ä¸ªä¾‹å­è¯´æ˜HTML5åœ¨ç§»åŠ¨ç«¯å¦‚ä½•æ‰“å¼€APP(HTML)"></a>25. å†™ä¸ªä¾‹å­è¯´æ˜HTML5åœ¨ç§»åŠ¨ç«¯å¦‚ä½•æ‰“å¼€APP(HTML)</h2><p>åœ¨Aæ ‡ç­¾å†…å®ç°</p><ul><li>Android ä½¿ç”¨deeplinkå”¤èµ·</li><li>ios ä½¿ç”¨URL Scheme ï¼ˆç›®å‰å·²ç»é€šç”¨ios &amp; abdroidï¼‰<ul><li>[scheme:][&#x2F;&#x2F;authority][path][?query][#fragment]</li></ul></li></ul><p>æœ¬è´¨ä¸Šå°±æ˜¯å¯»æ‰¾ç§»åŠ¨ç«¯çš„æ³¨å†Œæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™å”¤èµ·ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬ä¹Ÿå¯ä»¥å¢åŠ å”¤èµ·å¤±è´¥ï¼Œè·³è½¬ä¸‹è½½é¡µé¢ã€‚</p><blockquote><p>è¯¦æƒ… <a href="https://juejin.cn/post/7097784616961966094">https://juejin.cn/post/7097784616961966094</a></p></blockquote><h2 id="26-ç½‘ç«™çš„TDKè¯¥æ€ä¹ˆè®¾ç½®ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ-HTML"><a href="#26-ç½‘ç«™çš„TDKè¯¥æ€ä¹ˆè®¾ç½®ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ-HTML" class="headerlink" title="26. ç½‘ç«™çš„TDKè¯¥æ€ä¹ˆè®¾ç½®ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ(HTML)"></a>26. ç½‘ç«™çš„TDKè¯¥æ€ä¹ˆè®¾ç½®ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ(HTML)</h2><p>Title &amp; Describeï¼š æœç´¢ç»“æœæ—¶å€™å±•ç°<br>Keywords:æœç´¢å¼•æ“å…³é”®å­—</p><h2 id="27-è¯´è¯´form-dataã€x-www-form-urlencodedã€rawã€binaryçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ-PROTOCOL"><a href="#27-è¯´è¯´form-dataã€x-www-form-urlencodedã€rawã€binaryçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ-PROTOCOL" class="headerlink" title="27.è¯´è¯´form-dataã€x-www-form-urlencodedã€rawã€binaryçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ(PROTOCOL)"></a>27.è¯´è¯´form-dataã€x-www-form-urlencodedã€rawã€binaryçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ(PROTOCOL)</h2><ul><li>multipart&#x2F;form-data å…¶è¯·æ±‚å†…å®¹æ ¼å¼ä¸ºContent-Type: multipart&#x2F;form-data,ç”¨æ¥æŒ‡å®šè¯·æ±‚å†…å®¹çš„æ•°æ®ç¼–ç æ ¼å¼ï¼Œä¸€èˆ¬ç”¨æ¥æ–‡ä»¶ä¸Šä¼ ã€‚</li><li>x-www-form-urlencoded æ˜¯é»˜è®¤çš„postæ ¼å¼ï¼Œä½¿ç”¨URLEncodeæ–¹æ³•</li><li>rawå¯ä»¥ä¸Šä¼ å¤šç§æ ¼å¼ï¼Œtxtï¼Œjsonï¼Œhtmlç­‰</li><li>binary ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®</li></ul><h2 id="28-ä½¿ç”¨historyè·¯ç”±æ–¹å¼æ—¶ï¼Œä½ æœ‰è‡ªå·±åŠ¨æ‰‹é…ç½®è¿‡æœåŠ¡å™¨ç«¯å—ï¼Ÿä¸ºä»€ä¹ˆè¦é…æœåŠ¡å™¨ç«¯ï¼Ÿæ€ä¹ˆé…-ROUTER"><a href="#28-ä½¿ç”¨historyè·¯ç”±æ–¹å¼æ—¶ï¼Œä½ æœ‰è‡ªå·±åŠ¨æ‰‹é…ç½®è¿‡æœåŠ¡å™¨ç«¯å—ï¼Ÿä¸ºä»€ä¹ˆè¦é…æœåŠ¡å™¨ç«¯ï¼Ÿæ€ä¹ˆé…-ROUTER" class="headerlink" title="28. ä½¿ç”¨historyè·¯ç”±æ–¹å¼æ—¶ï¼Œä½ æœ‰è‡ªå·±åŠ¨æ‰‹é…ç½®è¿‡æœåŠ¡å™¨ç«¯å—ï¼Ÿä¸ºä»€ä¹ˆè¦é…æœåŠ¡å™¨ç«¯ï¼Ÿæ€ä¹ˆé…(ROUTER)"></a>28. ä½¿ç”¨historyè·¯ç”±æ–¹å¼æ—¶ï¼Œä½ æœ‰è‡ªå·±åŠ¨æ‰‹é…ç½®è¿‡æœåŠ¡å™¨ç«¯å—ï¼Ÿä¸ºä»€ä¹ˆè¦é…æœåŠ¡å™¨ç«¯ï¼Ÿæ€ä¹ˆé…(ROUTER)</h2><p>history éœ€è¦é…åˆæœåŠ¡å™¨è¯·æ±‚èµ„æºï¼Œå› æ­¤éœ€è¦æœåŠ¡ç«¯é…åˆè¿”å›ä¸€ä¸ªå›ºå®šçš„Indexé¡µé¢<br>ä»¥nginxä¸ºä¾‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">location <span class="token operator">/</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">tryfiles</span><span class="token operator">:</span> $uri $uri<span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šé¢çš„ <a href="http://www.example.com/post">http://www.example.com/post</a> ä¸ºä¾‹ï¼Œ$uri ä¼šåŒ¹é…åˆ° postï¼Œnginx å‘ç° dist ç›®å½•ä¸‹ä¸‹é¢æ²¡æœ‰ post è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰ post è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æœ€åä¼šè¿”å› dist ç›®å½•ä¸‹çš„ index.htmlã€‚è¿™æ ·ï¼Œindex.html è¢«æµè§ˆå™¨åŠ è½½ä¹‹åï¼Œå‰ç«¯è·¯ç”±å°±ä¼šå·¥ä½œï¼Œå°†ç”¨æˆ·éœ€è¦çš„èµ„æºåŠ è½½å‡ºæ¥ã€‚è€Œæˆ‘ä»¬ build å‡ºæ¥çš„ cssï¼Œjs æ–‡ä»¶ï¼Œç”±äºå¯ä»¥è¢« nginx æ­£ç¡®æ‰¾åˆ°ï¼Œåˆ™ä¸ä¼šå—åˆ°å½±å“ã€‚</p><h2 id="29-historyå’Œhashä¸¤ç§è·¯ç”±æ–¹å¼çš„æœ€å¤§åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ-ROUTER"><a href="#29-historyå’Œhashä¸¤ç§è·¯ç”±æ–¹å¼çš„æœ€å¤§åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ-ROUTER" class="headerlink" title="29. historyå’Œhashä¸¤ç§è·¯ç”±æ–¹å¼çš„æœ€å¤§åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ(ROUTER)"></a>29. historyå’Œhashä¸¤ç§è·¯ç”±æ–¹å¼çš„æœ€å¤§åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ(ROUTER)</h2><p>history é¡µé¢åˆ·æ–°ä¸ä¼šé‡æ–°åŠ è½½ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆï¼Œä½¿ç”¨pushstateå’Œreplacestateæ¥æ“ä½œurlçš„å˜åŒ–<br>hash ç”±hashå‘ç”Ÿçš„urlå˜åŒ–éƒ½ä¼šè¢«æµè§ˆå™¨è®°å½•ï¼Œhashä¸ä¼šå¸¦è¿‡æœåŠ¡å™¨ï¼Œä½¿ç”¨hahschangeæ¥ç›‘å¬urlçš„å˜åŒ–</p><h2 id="30-è¯·é—®ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¯ä»¥ä¸¾ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­å—ï¼Ÿ-JS"><a href="#30-è¯·é—®ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¯ä»¥ä¸¾ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­å—ï¼Ÿ-JS" class="headerlink" title="30. è¯·é—®ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¯ä»¥ä¸¾ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­å—ï¼Ÿ(JS)"></a>30. è¯·é—®ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿå¯ä»¥ä¸¾ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­å—ï¼Ÿ(JS)</h2><p>é—­åŒ…çš„å®šä¹‰æ˜¯æŒ‡åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ã€‚</p><h2 id="31-è¯·é—®ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ-JS"><a href="#31-è¯·é—®ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ-JS" class="headerlink" title="31. è¯·é—®ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ(JS)"></a>31. è¯·é—®ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ(JS)</h2><p>åŸå‹é“¾æŒ‡çš„æ˜¯åœ¨JavaScriptä¸­æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åˆå¯ä»¥é€šè¿‡å®ƒçš„åŸå‹å¯¹è±¡å»è®¿é—®å…¶ä»–å¯¹è±¡ï¼Œå½¢æˆäº†ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œè¿™ä¸ªé“¾å¼ç»“æ„å°±æ˜¯åŸå‹é“¾ã€‚ç»§æ‰¿å¯ä»¥é€šè¿‡åŸå‹é“¾å®ç°ï¼Œæ¯”å¦‚é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æ¥å®ç°ç»§æ‰¿ã€‚</p><h2 id="32-è¯·é—®ä»€ä¹ˆæ˜¯-Event-Loopï¼Ÿåœ¨-JavaScript-ä¸­æœ‰å“ªäº›å¸¸è§çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Ÿ-JS"><a href="#32-è¯·é—®ä»€ä¹ˆæ˜¯-Event-Loopï¼Ÿåœ¨-JavaScript-ä¸­æœ‰å“ªäº›å¸¸è§çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Ÿ-JS" class="headerlink" title="32. è¯·é—®ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿåœ¨ JavaScript ä¸­æœ‰å“ªäº›å¸¸è§çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Ÿ (JS)"></a>32. è¯·é—®ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿåœ¨ JavaScript ä¸­æœ‰å“ªäº›å¸¸è§çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Ÿ (JS)</h2><p>Event Loopæ˜¯JavaScriptçš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ä¹‹ä¸€ã€‚å®ƒæ˜¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œç”¨äºå¤„ç†JavaScriptä¸­çš„å¼‚æ­¥äº‹ä»¶ã€‚JavaScriptä¸­çš„å¼‚æ­¥äº‹ä»¶æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å®ä»»åŠ¡ï¼Œæ¯”å¦‚setTimeoutã€setIntervalç­‰ï¼›å¦ä¸€ç§æ˜¯å¾®ä»»åŠ¡ï¼Œæ¯”å¦‚Promise.thenã€MutationObserverç­‰ã€‚åœ¨æ¯ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œå…ˆæ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ï¼Œå†æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åå†æ‰§è¡Œä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ã€‚async&#x2F;awaitä¹Ÿæ˜¯åŸºäºPromiseå®ç°çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Œå®ƒä¹Ÿæ˜¯é€šè¿‡å¾®ä»»åŠ¡æ¥å®ç°çš„ã€‚</p><h2 id="33-è¯·é—®ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ-PROTOCOL"><a href="#33-è¯·é—®ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ-PROTOCOL" class="headerlink" title="33. è¯·é—®ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ(PROTOCOL)"></a>33. è¯·é—®ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ(PROTOCOL)</h2><p>è·¨åŸŸæŒ‡çš„æ˜¯æµè§ˆå™¨ä¸èƒ½ç›´æ¥è®¿é—®å…¶ä»–åŸŸåä¸‹çš„èµ„æºï¼Œå®ƒæ˜¯ç”±æµè§ˆå™¨çš„åŒæºç­–ç•¥æ‰€å¯¼è‡´çš„ã€‚åŒæºç­–ç•¥è¦æ±‚ç½‘é¡µåªèƒ½å¤Ÿè®¿é—®ä¸è‡ªèº«æ‰€åœ¨çš„åŸŸåã€åè®®ã€ç«¯å£å·ç›¸åŒçš„èµ„æºã€‚è§£å†³è·¨åŸŸé—®é¢˜æœ‰å¤šç§æ–¹å¼ï¼Œæ¯”å¦‚JSONPã€CORSã€ä»£ç†ã€WebSocketç­‰ã€‚</p><h2 id="34-è¯·é—®å¦‚ä½•ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿ-PERFORMANCE"><a href="#34-è¯·é—®å¦‚ä½•ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿ-PERFORMANCE" class="headerlink" title="34. è¯·é—®å¦‚ä½•ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿ(PERFORMANCE)"></a>34. è¯·é—®å¦‚ä½•ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ¡ˆå—ï¼Ÿ(PERFORMANCE)</h2><p>å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¯ä»¥ä»å¤šä¸ªæ–¹é¢å…¥æ‰‹ï¼ŒåŒ…æ‹¬ä»£ç æ–¹é¢ã€ç½‘ç»œè¯·æ±‚æ–¹é¢ã€æ¸²æŸ“æ–¹é¢ç­‰ã€‚å…¶ä¸­ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨å‹ç¼©å’Œæ··æ·†å·¥å…·æ¥å‡å°‘ä»£ç æ–‡ä»¶çš„å¤§å°ï¼Œä½¿ç”¨CDNåŠ é€Ÿç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨æµè§ˆå™¨ç¼“å­˜æ¥å‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½å’Œæ— é™æ»šåŠ¨æ¥å‡å°‘èµ„æºåŠ è½½æ¬¡æ•°ï¼Œé¿å…å¸ƒå±€æŠ–åŠ¨ã€å‡å°‘é‡ç»˜å’Œå›æµç­‰ã€‚</p><h2 id="35-è¯·é—®ä»€ä¹ˆæ˜¯-Virtual-DOMï¼Ÿå®ƒå’Œä¼ ç»Ÿ-DOM-æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ-HTML"><a href="#35-è¯·é—®ä»€ä¹ˆæ˜¯-Virtual-DOMï¼Ÿå®ƒå’Œä¼ ç»Ÿ-DOM-æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ-HTML" class="headerlink" title="35. è¯·é—®ä»€ä¹ˆæ˜¯ Virtual DOMï¼Ÿå®ƒå’Œä¼ ç»Ÿ DOM æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ(HTML)"></a>35. è¯·é—®ä»€ä¹ˆæ˜¯ Virtual DOMï¼Ÿå®ƒå’Œä¼ ç»Ÿ DOM æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ(HTML)</h2><ol><li>Virtual DOMï¼ˆè™šæ‹ŸDOMï¼‰æ˜¯æŒ‡ä¸€ä¸ªè™šæ‹Ÿçš„DOMæ ‘ï¼Œå®ƒæ˜¯ä»¥JavaScriptå¯¹è±¡çš„å½¢å¼è¡¨ç¤ºï¼Œé€šè¿‡å®ƒæ¥æ“ä½œå’Œæ›´æ–°çœŸå®çš„DOMæ ‘.Virtual DOMå¯ä»¥å°†DOMæ“ä½œé›†ä¸­å¤„ç†ï¼Œé¿å…é¢‘ç¹åœ°æ“ä½œDOMè€Œå¯¼è‡´é¡µé¢æ€§èƒ½ä¸‹é™ã€‚åœ¨è¿›è¡ŒDOMæ“ä½œæ—¶ï¼ŒVirtual DOMä¼šå¯¹æ¯”æ–°æ—§DOMæ ‘çš„å·®å¼‚ï¼Œå¹¶åªæ›´æ–°å·®å¼‚éƒ¨åˆ†ï¼Œä»è€Œæé«˜é¡µé¢çš„æ¸²æŸ“æ•ˆç‡ã€‚</li><li>Virtual DOMå’Œä¼ ç»ŸDOMçš„ä¸»è¦ä¸åŒç‚¹åœ¨äºï¼ŒVirtual DOMé€šè¿‡JavaScriptå¯¹è±¡æ¥è¡¨ç¤ºDOMèŠ‚ç‚¹å’Œå…¶å±æ€§ï¼Œä»è€Œé¿å…äº†ç›´æ¥æ“ä½œçœŸå®çš„DOMèŠ‚ç‚¹ã€‚è¿™æ ·å¯ä»¥æé«˜æ¸²æŸ“æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†ä¸€äº›å¸¸è§çš„é—®é¢˜ï¼Œæ¯”å¦‚æµè§ˆå™¨å…¼å®¹æ€§ã€æ€§èƒ½é—®é¢˜ç­‰ã€‚</li></ol><h2 id="è¯·é—®ä»€ä¹ˆæ˜¯-Webpackï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ-Webpack"><a href="#è¯·é—®ä»€ä¹ˆæ˜¯-Webpackï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ-Webpack" class="headerlink" title="è¯·é—®ä»€ä¹ˆæ˜¯ Webpackï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ(Webpack)"></a>è¯·é—®ä»€ä¹ˆæ˜¯ Webpackï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ(Webpack)</h2><p>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå®ƒå¯ä»¥å°†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ˆjsï¼Œcssï¼Œå›¾ç‰‡ç­‰ï¼‰è§†ä¸ºæ¨¡å—ï¼Œå¹¶å°†ä»–ä»¬æ‰“åŒ…æˆä¸€ä¸ªæˆ–è€…å¤šä¸ªé™æ€èµ„æºæ–‡ä»¶ã€‚æ­¤å¤–webpackè¿˜æä¾›äº†å¼ºå¤§çš„æ’ä»¶å’Œloaderæœºåˆ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä»£ç å‹ç¼©ï¼Œåˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ç­‰æ“ä½œã€‚åŒæ—¶å¯ä»¥ä½¿ç”¨sassï¼Œlessç­‰é¢„å¤„ç†å™¨æ¥ç¼–å†™css</p><h2 id="è¯·é—®ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµï¼Ÿå®ƒå’ŒåŒå‘æ•°æ®ç»‘å®šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼ˆJSï¼‰"><a href="#è¯·é—®ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµï¼Ÿå®ƒå’ŒåŒå‘æ•°æ®ç»‘å®šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼ˆJSï¼‰" class="headerlink" title="è¯·é—®ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµï¼Ÿå®ƒå’ŒåŒå‘æ•°æ®ç»‘å®šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼ˆJSï¼‰"></a>è¯·é—®ä»€ä¹ˆæ˜¯å•å‘æ•°æ®æµï¼Ÿå®ƒå’ŒåŒå‘æ•°æ®ç»‘å®šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼ˆJSï¼‰</h2><p>å•å‘æ•°æ®æµæ˜¯æŒ‡æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡propsæ¥æ”¶æ•°æ®ï¼Œè€Œæ— æ³•ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚è€ŒåŒå‘æ•°æ®ç»‘å®šåœ¨è¿™é“é¢˜ä¸­çš„æ„æ€æ˜¯æŒ‡ï¼Œæ•°æ®å¯ä»¥åœ¨çˆ¶å­ç»„ä»¶ä¸­åŒå‘æµåŠ¨ï¼Œå­ç»„ä»¶ä¸ä»…å¯ä»¥æ¥å—æ•°æ®ä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶çš„å½¢å¼ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚åœ¨vueä¸­æˆ‘ä»¬å¯ä»¥ç”¨v-modelå®ç°ã€‚åœ¨reactä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»‘å®šæ–¹æ³•çš„æƒ…å†µè¿›è¡Œå®ç°ã€‚</p><h2 id="è¯·é—®å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿæœ‰å“ªäº›å¸¸è§çš„å‰ç«¯è·¯ç”±æ¡†æ¶ï¼Ÿï¼ˆROUTERï¼‰"><a href="#è¯·é—®å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿæœ‰å“ªäº›å¸¸è§çš„å‰ç«¯è·¯ç”±æ¡†æ¶ï¼Ÿï¼ˆROUTERï¼‰" class="headerlink" title="è¯·é—®å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿæœ‰å“ªäº›å¸¸è§çš„å‰ç«¯è·¯ç”±æ¡†æ¶ï¼Ÿï¼ˆROUTERï¼‰"></a>è¯·é—®å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿæœ‰å“ªäº›å¸¸è§çš„å‰ç«¯è·¯ç”±æ¡†æ¶ï¼Ÿï¼ˆROUTERï¼‰</h2><p>å‰ç«¯è·¯ç”±æŒ‡çš„æ˜¯é€šè¿‡æ›´æ”¹urlè·¯å¾„æ¥åŠ è½½é¡µé¢ï¼Œå³SPAæ¨¡å¼ï¼Œå®ç°å‰ç«¯è·¯ç”±çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯Hashï¼ˆ#ï¼‰æ¨¡å¼çš„è·¯ç”±ï¼Œå¦å¤–ä¸€ç§æ˜¯History APIå¾—è·¯ç”±ã€‚å¸¸è§çš„å‰ç«¯è·¯ç”±æ¡†æ¶æœ‰react-routerå’Œvue router</p><h2 id="è¯·é—®å¦‚ä½•è¿›è¡Œå‰ç«¯å®‰å…¨é˜²èŒƒï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„å‰ç«¯å®‰å…¨æ”»å‡»æ–¹å¼å’Œé˜²èŒƒæªæ–½å—ï¼Ÿï¼ˆSAFETYï¼‰"><a href="#è¯·é—®å¦‚ä½•è¿›è¡Œå‰ç«¯å®‰å…¨é˜²èŒƒï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„å‰ç«¯å®‰å…¨æ”»å‡»æ–¹å¼å’Œé˜²èŒƒæªæ–½å—ï¼Ÿï¼ˆSAFETYï¼‰" class="headerlink" title="è¯·é—®å¦‚ä½•è¿›è¡Œå‰ç«¯å®‰å…¨é˜²èŒƒï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„å‰ç«¯å®‰å…¨æ”»å‡»æ–¹å¼å’Œé˜²èŒƒæªæ–½å—ï¼Ÿï¼ˆSAFETYï¼‰"></a>è¯·é—®å¦‚ä½•è¿›è¡Œå‰ç«¯å®‰å…¨é˜²èŒƒï¼Ÿå¯ä»¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„å‰ç«¯å®‰å…¨æ”»å‡»æ–¹å¼å’Œé˜²èŒƒæªæ–½å—ï¼Ÿï¼ˆSAFETYï¼‰</h2><p>å¸¸è§çš„å®‰å…¨é—®é¢˜æœ‰Xssï¼Œcsrfç­‰ã€‚é¢„é˜²xssæ”»å‡»å¯ä»¥é€šè¿‡å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹å’Œè½¬ç§»æ¥é˜²æ­¢æ¶æ„è„šæœ¬æ³¨å…¥ã€‚é¢„é˜²CSRFæ”»å‡»å¯ä»¥é‡‡ç”¨tokenéªŒè¯ï¼Œsamesiteç­‰å±æ€§æ¥é˜²æ­¢è·¨ç«™è¯·æ±‚æœªæ²¾ã€‚é€šè¿‡å‰ç«¯å¯ä»¥é€šè¿‡HTTPSï¼ŒCSPç­‰æ–¹å¼åŠ å¼ºé¡µé¢çš„å®‰å…¨æ€§ã€‚<br>CSPæ˜¯Content security policyï¼Œå¯ä»¥é€šè¿‡åœ¨httpç›¸åº”å¤´ä¸­è®¾ç½®cspå­—æ®µæˆ–è€…åœ¨htmlçš„metaæ ‡ç­¾å½¢å¼æ¥å®ç°ã€‚</p><ol><li>åœ¨httpä¸­å®ç°<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token operator">:</span> <span class="token keyword">default</span><span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span> script<span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token string">'unsafe-inline'</span> <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span> img<span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p>å…¶ä¸­ï¼Œdefault-src è¡¨ç¤ºé»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨åªèƒ½åŠ è½½æ¥è‡ªåŒæºçš„èµ„æºï¼Œè€Œ script-src å’Œ img-src åˆ†åˆ«è¡¨ç¤ºå¯ä»¥åŠ è½½ JavaScript å’Œå›¾ç‰‡èµ„æºçš„æ¥æºã€‚è¿™é‡Œä½¿ç”¨çš„ â€˜selfâ€™ è¡¨ç¤ºå¯ä»¥ä»åŒæºåŠ è½½èµ„æºï¼Œè€Œ <a href="https://example.com/">https://example.com</a> åˆ™è¡¨ç¤ºå¯ä»¥ä»è¯¥åŸŸååŠ è½½èµ„æºã€‚æ³¨æ„ï¼Œä½¿ç”¨ unsafe-inline å¯ä»¥å…è®¸å†…è”è„šæœ¬çš„ä½¿ç”¨ï¼Œä½†è¿™å¯èƒ½ä¼šå¢åŠ å®‰å…¨é£é™©ã€‚</p><ol start="2"><li>åœ¨ HTML çš„ head ä¸­ä½¿ç”¨ meta æ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥è®¾ç½®ï¼š<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"Content-Security-Policy"</span> content<span class="token operator">=</span><span class="token string">"default-src 'self'; script-src 'self' 'unsafe-inline' https://example.com; img-src 'self' https://example.com;"</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p>è¿™ç§æ–¹å¼çš„è®¾ç½®ä¸ä¸Šè¿°åœ¨ HTTP å“åº”å¤´ä¸­è®¾ç½® CSP çš„æ–¹å¼ç›¸ä¼¼ï¼Œåªä¸è¿‡æ˜¯ä½¿ç”¨ meta æ ‡ç­¾æ¥è®¾ç½®ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCSP çš„å…·ä½“è®¾ç½®æ–¹å¼ä¼šå› ä¸ºç½‘ç«™çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè®¾ç½®ã€‚åŒæ—¶ï¼ŒCSP ä¹Ÿéœ€è¦åœ¨ç½‘ç«™å¼€å‘å’Œç»´æŠ¤è¿‡ç¨‹ä¸­ä¸æ–­è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ï¼Œä»¥ä¿è¯ç½‘ç«™çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚</p><h2 id="32-è¯·é—®æµè§ˆå™¨ç¼“å­˜çš„åˆ†ç±»æœ‰å“ªäº›ï¼Ÿå¦‚ä½•è®¾ç½®æµè§ˆå™¨ç¼“å­˜ï¼Ÿ-Browser"><a href="#32-è¯·é—®æµè§ˆå™¨ç¼“å­˜çš„åˆ†ç±»æœ‰å“ªäº›ï¼Ÿå¦‚ä½•è®¾ç½®æµè§ˆå™¨ç¼“å­˜ï¼Ÿ-Browser" class="headerlink" title="32. è¯·é—®æµè§ˆå™¨ç¼“å­˜çš„åˆ†ç±»æœ‰å“ªäº›ï¼Ÿå¦‚ä½•è®¾ç½®æµè§ˆå™¨ç¼“å­˜ï¼Ÿ(Browser)"></a>32. è¯·é—®æµè§ˆå™¨ç¼“å­˜çš„åˆ†ç±»æœ‰å“ªäº›ï¼Ÿå¦‚ä½•è®¾ç½®æµè§ˆå™¨ç¼“å­˜ï¼Ÿ(Browser)</h2><p>æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ç¡®å®åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å…¶ä¸­ï¼Œå¼ºç¼“å­˜æ˜¯é€šè¿‡è®¾ç½®HTTPå“åº”å¤´ä¸­çš„Cache-Controlå’ŒExpireså­—æ®µæ¥å®ç°çš„ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®è¿™äº›å­—æ®µçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚è€Œåå•†ç¼“å­˜åˆ™æ˜¯é€šè¿‡è®¾ç½®HTTPå“åº”å¤´ä¸­çš„Last-Modifiedå’ŒETagå­—æ®µæ¥å®ç°çš„ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡è¿™äº›å­—æ®µæ¥åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸæˆ–è€…éœ€è¦é‡æ–°è·å–èµ„æºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“Cache-Controlå’ŒExpireséƒ½å­˜åœ¨æ—¶ï¼ŒCache-Controlä¼˜å…ˆçº§æ›´é«˜ã€‚</p><p>å½“å¼ºç¼“å­˜å¤±æ•ˆæˆ–è€…æœªå‘½ä¸­æ—¶ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨åå•†ç¼“å­˜æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜å‰¯æœ¬ï¼Œåå•†ç¼“å­˜ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè¯¢é—®å½“å‰çš„èµ„æºæ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœèµ„æºæœªå˜åŒ–ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›204 NOT modifiedå“åº”ï¼Œæµè§ˆå™¨å¯ä»¥ä½¿ç”¨ç¼“å­˜çš„å‰¯æœ¬ã€‚å¦‚æœå‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›æ–°èµ„æºï¼Œæµè§ˆå™¨ä¼šå­˜å‚¨å¹¶ä¸”é‡‡ç”¨æ–°çš„èµ„æºæ¸²æŸ“ã€‚</p><p>å¦‚æœéœ€è¦å¼ºåˆ¶ä½¿ç”¨å¼ºç¼“å­˜ï¼Œå¯ä»¥åœ¨å“åº”ä¸­æ·»åŠ HTTPå“åº”å¤´</p><pre class="line-numbers language-none"><code class="language-none">Cache-control: max-age&#x3D;xxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>xxxè¡¨ç¤ºç¼“å­˜æ—¶é—´ï¼Œè¿™å‘Šè¯‰æµè§ˆå™¨åœ¨ç¼“å­˜æ—¶é—´å†…å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œè€Œæ— éœ€å‘æµè§ˆå™¨å‘é€è¯·æ±‚ã€‚<br>å¼ºåˆ¶ä½¿ç”¨å¼ºç¼“å­˜ï¼Œå¦‚æœå¤±è´¥åï¼Œæ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œé™¤éæ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–è€…ç¼“å­˜å›½æ——ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•åªé€‚ç”¨äºèµ„æºæ›´æ–°è¦æ±‚ä¸é«˜çš„é™æ€ç½‘ç«™ã€‚</p><h2 id="33-è¯·é—®-React-çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰å“ªäº›ï¼Ÿå®ƒä»¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™è¢«è§¦å‘ï¼Ÿ-REACT"><a href="#33-è¯·é—®-React-çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰å“ªäº›ï¼Ÿå®ƒä»¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™è¢«è§¦å‘ï¼Ÿ-REACT" class="headerlink" title="33. è¯·é—® React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰å“ªäº›ï¼Ÿå®ƒä»¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™è¢«è§¦å‘ï¼Ÿ(REACT)"></a>33. è¯·é—® React çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰å“ªäº›ï¼Ÿå®ƒä»¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™è¢«è§¦å‘ï¼Ÿ(REACT)</h2><p>reactçš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰å¤§é˜¶æ®µï¼ŒæŒ‚è½½ï¼Œæ›´æ–°å’Œå¸è½½ã€‚<br>åœ¨æŒ‚è½½é˜¶æ®µæœ‰componentwillmount,componentdidmount,componentWillReceiveProps<br>åœ¨æ›´æ–°é˜¶æ®µæœ‰componentwillupdate,componentshouldupdate, componentdidupdate<br>åœ¨å¸è½½é˜¶æ®µæœ‰componentWillUnmount<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒcomponentWillUpdateå’ŒcomponentDidUpdateå¹¶ä¸æ˜¯æ¸²æŸ“æ‰§è¡Œç»“æŸå‰å’Œæ¸²æŸ“ç»“æŸåçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒä»¬æ˜¯åœ¨ç»„ä»¶æ›´æ–°å‰å’Œæ›´æ–°åè¢«è°ƒç”¨çš„ã€‚</p><p>åœ¨æŒ‚è½½é˜¶æ®µconstructor è°ƒç”¨ï¼Œç„¶åä¾æ¬¡è°ƒç”¨componentwillmount,render, componentdidmountä¸‰ä¸ªå‡½æ•°ã€‚<br>åœ¨ç»„ä»¶çš„propsæˆ–è€…stateå‘ç”Ÿå˜æ›´æ—¶è°ƒç”¨componentwillreceiveprops,shouldComponentUpdateã€componentWillUpdateã€renderå’ŒcomponentDidUpdate.<br>åœ¨å¸è½½é˜¶æ®µè°ƒç”¨componentwillUNmountå‡½æ•°<br>å¦‚æœéœ€è¦å®ç°ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºreact.componentè¿›è¡Œå®ç°ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶æŒ‚è½½ä¹‹åè°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæ—¶è°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶propsæˆ–stateå‘ç”Ÿå˜åŒ–æ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶å³å°†æ›´æ–°æ—¶è°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶æ›´æ–°å®Œæˆåè°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åœ¨ç»„ä»¶å¸è½½æ—¶è°ƒç”¨</span>  <span class="token punctuation">&#125;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token comment">// ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="34-è¯·é—®ç®—æ³•ä¸­çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿå¦‚ä½•è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Ÿï¼ˆALGOITHUMï¼‰"><a href="#34-è¯·é—®ç®—æ³•ä¸­çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿå¦‚ä½•è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Ÿï¼ˆALGOITHUMï¼‰" class="headerlink" title="34. è¯·é—®ç®—æ³•ä¸­çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿå¦‚ä½•è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Ÿï¼ˆALGOITHUMï¼‰"></a>34. è¯·é—®ç®—æ³•ä¸­çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿå¦‚ä½•è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Ÿï¼ˆALGOITHUMï¼‰</h2><p>ç©ºé—´å¤æ‚åº¦æ˜¯è¡¡é‡ç®—æ³•æ‰€éœ€çš„ç©ºé—´èµ„æºçš„ä¸€èˆ¬ä½¿ç”¨å¤§Oè®°æ³•è¡¨ç¤ºï¼Œæ—¶é—´å¤æ‚åº¦åˆ™æ˜¯è¡¨ç¤ºç®—æ³•è¿è¡Œæ‰€éœ€çš„æ—¶é—´èµ„æºï¼ŒåŒæ ·ä½¿ç”¨å¤§Oè®¡æ³•ã€‚ä¸¤è€…å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯„ä¼°ç®—æ³•çš„æ•ˆç‡ï¼Œé€‰æ‹©æœ€ä¼˜çš„ç®—æ³•ã€‚<br>å¤§Oè®°æ³•æè¿°çš„æ˜¯ç®—æ³•çš„æ¸è¿›å¤æ‚åº¦ã€‚é€šå¸¸ç”¨O(F(n))ï¼Œæ¥è¡¨ç¤ºç©ºé—´æˆ–è€…æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­f(n)è¡¨ç¤ºç®—æ³•æ‰§è¡Œæ—¶é—´ä¸è¾“å…¥è§„æ¨¡nçš„å¢é•¿å…³ç³»ã€‚å…·ä½“æ¥è¯´O(f(n))è¡¨ç¤ºç®—æ³•çš„æ‰§è¡Œæ—¶é—´æˆ–è€…ç©ºé—´åœ¨æœ€åæƒ…å†µä¸‹çš„å¢åŠ ç‡ã€‚<br>ä¾‹å¦‚ï¼Œä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œè¡¨ç¤ºåœ¨æœ€åæƒ…å†µä¸‹ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¸è¾“å…¥è§„æ¨¡ n çš„å¹³æ–¹æˆæ­£æ¯”ã€‚å¦ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ï¼Œè¡¨ç¤ºåœ¨æœ€åæƒ…å†µä¸‹ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¸è¾“å…¥è§„æ¨¡ n çš„å¯¹æ•°ä¸ n çš„ä¹˜ç§¯æˆæ­£æ¯”ã€‚</p><h2 id="35-è¯·ç®€è¿°-HTML5-ä¸­æ–°å¢çš„è¯­ä¹‰åŒ–æ ‡ç­¾åŠå…¶ä½œç”¨-HTML"><a href="#35-è¯·ç®€è¿°-HTML5-ä¸­æ–°å¢çš„è¯­ä¹‰åŒ–æ ‡ç­¾åŠå…¶ä½œç”¨-HTML" class="headerlink" title="35. è¯·ç®€è¿° HTML5 ä¸­æ–°å¢çš„è¯­ä¹‰åŒ–æ ‡ç­¾åŠå…¶ä½œç”¨(HTML)"></a>35. è¯·ç®€è¿° HTML5 ä¸­æ–°å¢çš„è¯­ä¹‰åŒ–æ ‡ç­¾åŠå…¶ä½œç”¨(HTML)</h2><p>  è¯­ä¹‰åŒ–æ ‡ç­¾æ˜¯ä¸ºäº†è®©å¼€å‘äººå‘˜æ›´å¥½çš„é˜…è¯»æ ‡ç­¾çš„ä½œç”¨ï¼Œä¾‹å¦‚ulï¼Œliç­‰</p><h2 id="36-è§£é‡Š-CSS-ç›’æ¨¡å‹ï¼ŒåŒ…æ‹¬-contentã€paddingã€border-å’Œ-margin-å››ä¸ªéƒ¨åˆ†çš„ä½œç”¨-CSS"><a href="#36-è§£é‡Š-CSS-ç›’æ¨¡å‹ï¼ŒåŒ…æ‹¬-contentã€paddingã€border-å’Œ-margin-å››ä¸ªéƒ¨åˆ†çš„ä½œç”¨-CSS" class="headerlink" title="36. è§£é‡Š CSS ç›’æ¨¡å‹ï¼ŒåŒ…æ‹¬ contentã€paddingã€border å’Œ margin å››ä¸ªéƒ¨åˆ†çš„ä½œç”¨(CSS)"></a>36. è§£é‡Š CSS ç›’æ¨¡å‹ï¼ŒåŒ…æ‹¬ contentã€paddingã€border å’Œ margin å››ä¸ªéƒ¨åˆ†çš„ä½œç”¨(CSS)</h2><p>  content æ˜¯å†…å®¹ç›’å­<br>  padding æ˜¯å†…è¾¹è·<br>  border æ˜¯è¾¹æ¡†çº¿å®½<br>  margin æ˜¯å¤–è¾¹è·<br>  æ•´ä¸ªç›’æ¨¡å‹åˆ†ä¸ºæ€ªå¼‚ç›’å­å’Œæ ‡å‡†ç›’å­ï¼Œæ ‡å‡†ç›’å­çš„å®½åº¦åŒ…å«paddingå’Œborderï¼Œæ€ªå¼‚ç›’å­çš„å®½åº¦ä»…åŒ…å«content</p><h2 id="37-ç®€è¿°-Flex-å¸ƒå±€å’Œ-Grid-å¸ƒå±€ï¼Œå¹¶è¯´æ˜ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«-CSS"><a href="#37-ç®€è¿°-Flex-å¸ƒå±€å’Œ-Grid-å¸ƒå±€ï¼Œå¹¶è¯´æ˜ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«-CSS" class="headerlink" title="37. ç®€è¿° Flex å¸ƒå±€å’Œ Grid å¸ƒå±€ï¼Œå¹¶è¯´æ˜ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«(CSS)"></a>37. ç®€è¿° Flex å¸ƒå±€å’Œ Grid å¸ƒå±€ï¼Œå¹¶è¯´æ˜ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«(CSS)</h2><p>  flex å¸ƒå±€æ˜¯ä¸€ç»´å¼¹æ€§å¸ƒå±€ï¼Œè®¾ç½®flexæƒé‡åï¼Œflexç›’å­å†…çš„å…ƒç´ ä¼šæ ¹æ®å‰©ä½™å®½åº¦è‡ªè¡Œå¸ƒå±€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡flex-directionæ›´æ”¹çºµè½´æˆ–è€…ç«–è½´å¸ƒå±€<br>  Gridå¸ƒå±€ä¸ºäºŒç»´ç½‘æ ¼å¸ƒå±€ï¼Œå¯ä»¥åˆ†ä¸ºè¡Œå’Œåˆ—ï¼Œé€šè¿‡grid-template-columnså’Œgrid-template-rowså±æ€§è¿›è¡Œè®¾ç½®ï¼Œè®¾ç½®æ¯ä¸€ä¸ªå…ƒç´ çš„æ¯”ä¾‹ï¼Œæ¥åˆ†å¸ƒç›’å­ã€‚<br>  flexå¸ƒå±€çš„ä¼˜åŠ¿åœ¨ä¸€ç»´çŠ¶æ€ä¸‹æ¯”è¾ƒæ˜æ˜¾ï¼Œç®€å•æ˜“ç”¨ï¼Œçµæ´»åº¦é«˜ï¼Œå¯ä»¥å“åº”å¸ƒå±€ï¼Œç¼ºç‚¹æ˜¯ä¸é€‚ç”¨äºŒç»´å¸ƒå±€ï¼Œå­˜åœ¨å…¼å®¹é—®é¢˜ã€‚<br>  Gridå¸ƒå±€çš„ä¼˜ç‚¹æ˜¯æ”¯æŒäºŒç»´æ’åˆ—ï¼Œè™½ç„¶å¯ä»¥æ”¯æŒå“åº”å¼å¸ƒå±€ï¼Œä½†æ˜¯éœ€è¦é€šè¿‡media querieså®ç°ã€‚ç¼ºç‚¹æ˜¯è§„åˆ™å¤šï¼Œå¯è¯»æ€§ä¸ä½³</p><h2 id="38-å¦‚ä½•å®ç°-CSS-åŠ¨ç”»ï¼Ÿè¯·åˆ—ä¸¾ä¸€äº›-CSS-å±æ€§å¹¶è¯´æ˜å…¶ä½œç”¨-CSS"><a href="#38-å¦‚ä½•å®ç°-CSS-åŠ¨ç”»ï¼Ÿè¯·åˆ—ä¸¾ä¸€äº›-CSS-å±æ€§å¹¶è¯´æ˜å…¶ä½œç”¨-CSS" class="headerlink" title="38. å¦‚ä½•å®ç° CSS åŠ¨ç”»ï¼Ÿè¯·åˆ—ä¸¾ä¸€äº› CSS å±æ€§å¹¶è¯´æ˜å…¶ä½œç”¨ (CSS)"></a>38. å¦‚ä½•å®ç° CSS åŠ¨ç”»ï¼Ÿè¯·åˆ—ä¸¾ä¸€äº› CSS å±æ€§å¹¶è¯´æ˜å…¶ä½œç”¨ (CSS)</h2><p>  CssåŠ¨ç”»æˆ‘ä»¬å¯ä»¥é€šè¿‡animationå®ç°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦å¯¹å…ƒç´ è®¾ç½®keyframeï¼Œä»¥æ­¤è§„å®šåŠ¨ç”»åœ¨æŒ‡å®šå¸§çš„è¡Œä¸º</p><h2 id="39-ç§»åŠ¨ç«¯é€‚é…æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿè¯·åˆ—ä¸¾å¹¶è¯´æ˜å„è‡ªçš„ä¼˜ç¼ºç‚¹-CSS"><a href="#39-ç§»åŠ¨ç«¯é€‚é…æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿè¯·åˆ—ä¸¾å¹¶è¯´æ˜å„è‡ªçš„ä¼˜ç¼ºç‚¹-CSS" class="headerlink" title="39. ç§»åŠ¨ç«¯é€‚é…æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿè¯·åˆ—ä¸¾å¹¶è¯´æ˜å„è‡ªçš„ä¼˜ç¼ºç‚¹(CSS)"></a>39. ç§»åŠ¨ç«¯é€‚é…æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿè¯·åˆ—ä¸¾å¹¶è¯´æ˜å„è‡ªçš„ä¼˜ç¼ºç‚¹(CSS)</h2><p>  åª’ä½“æŸ¥è¯¢ï¼šé€šè¿‡ CSS3 çš„åª’ä½“æŸ¥è¯¢æŠ€æœ¯ï¼Œæ ¹æ®ä¸åŒçš„å±å¹•å°ºå¯¸å’Œè®¾å¤‡ç±»å‹ï¼ŒåŠ¨æ€åœ°æ”¹å˜é¡µé¢æ ·å¼ã€‚<br>  ä¼˜ç‚¹ï¼šèƒ½å¤Ÿæ ¹æ®ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸å’Œåƒç´ å¯†åº¦è¿›è¡Œé€‚é…ï¼Œå¼€å‘æˆæœ¬ç›¸å¯¹è¾ƒä½ã€‚<br>  ç¼ºç‚¹ï¼šå¯¹äºå±å¹•å°ºå¯¸å˜åŒ–è¾ƒå¤§çš„è®¾å¤‡ï¼Œå¸ƒå±€å¯èƒ½ä¼šå¤±çœŸã€‚</p><p>  rem å¸ƒå±€ï¼šé€šè¿‡è®¾ç½®æ ¹å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œæ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è®¡ç®—å‡ºå„ä¸ªå…ƒç´ çš„å¤§å°ï¼Œä»è€Œå®ç°é€‚é…ã€‚<br>  ä¼˜ç‚¹ï¼šé€‚é…æ•ˆæœæ¯”è¾ƒç¨³å®šï¼Œé€‚åˆå¤šç§å±å¹•å°ºå¯¸å’Œåˆ†è¾¨ç‡çš„è®¾å¤‡ã€‚<br>  ç¼ºç‚¹ï¼šéœ€è¦åœ¨ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸å’Œåƒç´ å¯†åº¦ä¸‹è¿›è¡Œè°ƒè¯•ï¼Œå¼€å‘æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p><p>  flexbox å¸ƒå±€ï¼šé€šè¿‡ CSS3 çš„ flexbox å¸ƒå±€ï¼Œå®ç°è‡ªé€‚åº”å¸ƒå±€ã€‚<br>  ä¼˜ç‚¹ï¼šèƒ½å¤Ÿæ ¹æ®ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸å’Œåƒç´ å¯†åº¦è¿›è¡Œé€‚é…ï¼Œå¼€å‘æˆæœ¬ç›¸å¯¹è¾ƒä½ã€‚<br>  ç¼ºç‚¹ï¼šå¯¹äºæŸäº›è€æ—§è®¾å¤‡çš„æµè§ˆå™¨æ”¯æŒä¸å¥½ã€‚</p><p>  viewport å¸ƒå±€ï¼šé€šè¿‡è®¾ç½® viewport çš„å±æ€§ï¼Œæ”¹å˜è®¾å¤‡çš„é»˜è®¤ç¼©æ”¾æ¯”ä¾‹ï¼Œå®ç°é€‚é…ã€‚<br>  ä¼˜ç‚¹ï¼šèƒ½å¤Ÿé€‚åº”ä¸åŒå°ºå¯¸çš„è®¾å¤‡ï¼Œå®ç°è‡ªé€‚åº”å¸ƒå±€ã€‚<br>  ç¼ºç‚¹ï¼šéœ€è¦é’ˆå¯¹ä¸åŒçš„è®¾å¤‡è¿›è¡Œè°ƒæ•´ï¼Œä¸å¤Ÿçµæ´»ã€‚</p><h2 id="40-è§£é‡Š-JavaScript-ä¸­çš„â€œä¼ å‚æ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’â€ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜-JS"><a href="#40-è§£é‡Š-JavaScript-ä¸­çš„â€œä¼ å‚æ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’â€ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜-JS" class="headerlink" title="40. è§£é‡Š JavaScript ä¸­çš„â€œä¼ å‚æ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’â€ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜ (JS)"></a>40. è§£é‡Š JavaScript ä¸­çš„â€œä¼ å‚æ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’â€ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜ (JS)</h2><p>  æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨èˆ¹ä½“éœ€è¦æ ¹æ®æ•°æ®ç±»å‹è¿›è¡Œåˆ†æã€‚åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œå³ä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼Œä¿®æ”¹å€¼ä¸ä¼šå½±å“åŸå§‹å˜é‡ã€‚è€Œå¯¹å¤æ‚å˜é‡ï¼Œä¾‹å¦‚æ•°ç»„ï¼Œå¯¹è±¡ç­‰ï¼Œæ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ï¼Œä¿®æ”¹å€¼ä¼šå½±å“åŸæ¥çš„å€¼ã€‚</p><h2 id="41-è§£é‡Š-JavaScript-ä¸­çš„-this-å…³é”®å­—ï¼Œå¹¶è¯´æ˜å…¶æŒ‡å‘çš„å…·ä½“å¯¹è±¡-JS"><a href="#41-è§£é‡Š-JavaScript-ä¸­çš„-this-å…³é”®å­—ï¼Œå¹¶è¯´æ˜å…¶æŒ‡å‘çš„å…·ä½“å¯¹è±¡-JS" class="headerlink" title="41. è§£é‡Š JavaScript ä¸­çš„ this å…³é”®å­—ï¼Œå¹¶è¯´æ˜å…¶æŒ‡å‘çš„å…·ä½“å¯¹è±¡ (JS)"></a>41. è§£é‡Š JavaScript ä¸­çš„ this å…³é”®å­—ï¼Œå¹¶è¯´æ˜å…¶æŒ‡å‘çš„å…·ä½“å¯¹è±¡ (JS)</h2><p>  this å…³é”®å­—æ˜¯æŒ‡å‘å½“å‰ä½œç”¨åŸŸçš„ï¼Œå¦‚æœåœ¨å‡½æ•°å¤–éƒ¨ä½¿ç”¨ï¼Œåœ¨é¢å‘æµè§ˆå™¨ä¸­ä¼šè¢«æŒ‡å‘windowï¼Œè€Œnodeä¸­ä¼šæŒ‡å‘globalã€‚<br>  ä½¿ç”¨applyï¼Œcallï¼Œbindç­‰å¯ä»¥æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„thisæŒ‡å‘ã€‚<br>  åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œthisçš„æŒ‡å‘æ˜¯å®ƒæ‰€å¤„çš„è¯æ³•ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼Œä¸€åŠæ˜¯çˆ¶çº§ä½œç”¨åŸŸçš„this</p><h2 id="42-è§£é‡Š-Promise-çš„æ¦‚å¿µåŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è§£é‡Š-Promise-ä¸­çš„-then-å’Œ-catch-æ–¹æ³•-ï¼ˆJSï¼‰"><a href="#42-è§£é‡Š-Promise-çš„æ¦‚å¿µåŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è§£é‡Š-Promise-ä¸­çš„-then-å’Œ-catch-æ–¹æ³•-ï¼ˆJSï¼‰" class="headerlink" title="42. è§£é‡Š Promise çš„æ¦‚å¿µåŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è§£é‡Š Promise ä¸­çš„ then å’Œ catch æ–¹æ³• ï¼ˆJSï¼‰"></a>42. è§£é‡Š Promise çš„æ¦‚å¿µåŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è§£é‡Š Promise ä¸­çš„ then å’Œ catch æ–¹æ³• ï¼ˆJSï¼‰</h2><p>  promiseæ˜¯ä¸€ç§å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡å¯¹å¼‚æ­¥æ“ä½œçš„ç»“æœè¿›è¡Œå°è£…ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œç¬¦åˆåŒæ­¥æ“ä½œçš„å†™æ³•é£æ ¼ï¼Œå®ƒä½¿ç”¨resolveå’Œrejectè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚<br>  åœ¨promiseä¸­é€šè¿‡thenæ–¹æ³•æ¥å—promiseè¿”å›çš„ç»“æœï¼Œthenä¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æˆåŠŸçš„å›è°ƒï¼Œä¸€ä¸ªæ˜¯å¤±è´¥çš„å›è°ƒï¼Œthenæ–¹æ³•è¿”å›çš„ä¾æ—§æ˜¯promiseå¯¹è±¡ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨thenæ–¹æ³•è¿›è¡Œé“¾å¼è°ƒç”¨<br>  catchæ˜¯promiseçš„é”™è¯¯æ•æ‰æ–¹æ³•ï¼Œpromiseä¸­çš„ä»»æ„ä¸€ä¸ªthenæ–¹æ³•æˆ–è€…promiseå¯¹è±¡æœ¬èº«å‡ºé”™éƒ½ä¼šç«‹å³æ‰§è¡Œcatchæ–¹æ³•</p><h2 id="43-è§£é‡Š-JavaScript-ä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ¦‚å¿µï¼Œåˆ—ä¸¾å¸¸è§çš„å®ç°æ–¹æ³•-ï¼ˆJSï¼‰"><a href="#43-è§£é‡Š-JavaScript-ä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ¦‚å¿µï¼Œåˆ—ä¸¾å¸¸è§çš„å®ç°æ–¹æ³•-ï¼ˆJSï¼‰" class="headerlink" title="43. è§£é‡Š JavaScript ä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ¦‚å¿µï¼Œåˆ—ä¸¾å¸¸è§çš„å®ç°æ–¹æ³• ï¼ˆJSï¼‰"></a>43. è§£é‡Š JavaScript ä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ¦‚å¿µï¼Œåˆ—ä¸¾å¸¸è§çš„å®ç°æ–¹æ³• ï¼ˆJSï¼‰</h2><p>æ·±æ‹·è´æ˜¯æŒ‡åœ¨æ‹·è´ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸ä»…æ‹·è´å¯¹è±¡çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿˜æ‹·è´å®ƒçš„å¼•ç”¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å †å†…å­˜ä¸­æ–°å»ºä¸€ä¸ªæ•°æ®ï¼Œä¸ç®¡æ˜¯å¼•ç”¨ç±»å‹è¿˜æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œéƒ½ä¼šå¼€é—­æ–°çš„ç©ºé—´ï¼Œå½¼æ­¤ä¸å½±å“<br>æµ…æ‹·è´æ˜¯æŒ‡åœ¨æ‹·è´å¯¹è±¡æ—¶ï¼Œåªæ‹·è´åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œä¸æ‹·è´å¼•ç”¨å¯¹è±¡ï¼Œå³æ‹·è´å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯æœ¬èº«ï¼Œåœ¨æ–°çš„å¯¹è±¡ä¸­ä¿®æ”¹å¯¹è±¡ä¼šå¯¼è‡´åŸå§‹å¯¹è±¡ä¸­çš„å¼•ç”¨ç±»å‹å˜é‡ä¹Ÿå‘ç”Ÿå˜åŒ–ã€‚<br>å®ç°æ–¹æ³•ã€‚</p><p>æ‰‹å†™é€’å½’å®ç°æ·±æ‹·è´</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      reuslt<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°<br><code>&lt;code&gt;JSON.parse(JSON.stringify(obj))&lt;/code&gt;</code><br>ä¹Ÿå¯ä»¥é€šè¿‡lodashå®ç°</p><h2 id="PROMISE-A-JS"><a href="#PROMISE-A-JS" class="headerlink" title="PROMISE A+ (JS)"></a>PROMISE A+ (JS)</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆå§‹åŒ–Promiseçš„çŠ¶æ€ä¸ºpending</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">"pending"</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// å®šä¹‰resolveå’Œrejectæ–¹æ³•ï¼Œç”¨äºæ”¹å˜Promiseçš„çŠ¶æ€</span>    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// åªæœ‰åœ¨PromiseçŠ¶æ€ä¸ºpendingæ—¶æ‰èƒ½æ”¹å˜çŠ¶æ€</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">"pending"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">"fulfilled"</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token comment">// æ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„onFulfilledå›è°ƒå‡½æ•°</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// åªæœ‰åœ¨PromiseçŠ¶æ€ä¸ºpendingæ—¶æ‰èƒ½æ”¹å˜çŠ¶æ€</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">"pending"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">"rejected"</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> reason<span class="token punctuation">;</span>        <span class="token comment">// æ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„onRejectedå›è°ƒå‡½æ•°</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// æ‰§è¡Œexecutorå‡½æ•°ï¼Œä¼ å…¥resolveå’Œrejectæ–¹æ³•</span>      <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// å¦‚æœexecutorå‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥è°ƒç”¨rejectæ–¹æ³•</span>      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ›å»ºæ–°çš„Promiseå®ä¾‹</span>    <span class="token keyword">const</span> promise2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> <span class="token function-variable function">onFulfilledCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœonFulfilledæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒï¼Œå¹¶ä¼ å…¥å½“å‰Promiseçš„å€¼</span>          <span class="token comment">// å¦‚æœonFulfilledä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ç›´æ¥å°†å½“å‰Promiseçš„å€¼ä¼ é€’ç»™ä¸‹ä¸€ä¸ªPromise</span>          <span class="token keyword">const</span> x <span class="token operator">=</span> onFulfilled <span class="token operator">?</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">;</span>          <span class="token comment">// é€’å½’å¤„ç†è¿”å›å€¼ï¼Œå†³å®šæ–°Promiseçš„çŠ¶æ€å’Œå€¼</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolvePromise</span><span class="token punctuation">(</span>promise2<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœæ‰§è¡ŒonFulfilledå›è°ƒå‡½æ•°æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè°ƒç”¨rejectæ–¹æ³•</span>          <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> <span class="token function-variable function">onRejectedCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœonRejectedæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒï¼Œå¹¶ä¼ å…¥å½“å‰Promiseçš„æ‹’å› </span>          <span class="token comment">// å¦‚æœonRejectedä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ç›´æ¥å°†å½“å‰Promiseçš„æ‹’å› ä¼ é€’ç»™ä¸‹ä¸€ä¸ªPromise</span>          <span class="token keyword">const</span> x <span class="token operator">=</span> onRejected <span class="token operator">?</span> <span class="token function">onRejected</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span> <span class="token operator">:</span> reason<span class="token punctuation">;</span>          <span class="token comment">// é€’å½’å¤„ç†è¿”å›å€¼ï¼Œå†³å®šæ–°Promiseçš„çŠ¶æ€å’Œå€¼</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolvePromise</span><span class="token punctuation">(</span>promise2<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœæ‰§è¡ŒonRejectedå›è°ƒå‡½æ•°æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè°ƒç”¨rejectæ–¹æ³•</span>          <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">"fulfilled"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœå½“å‰Promiseå·²ç»å˜ä¸ºfulfilledçŠ¶æ€ï¼Œå¼‚æ­¥æ‰§è¡ŒonFulfilledå›è°ƒå‡½æ•°</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onFulfilledCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">"rejected"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœå½“å‰Promiseå·²ç»å˜ä¸ºrejectedçŠ¶æ€ï¼Œå¼‚æ­¥æ‰§è¡ŒonRejectedå›è°ƒå‡½æ•°</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onRejectedCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœå½“å‰Promiseè¿˜å¤„äºpendingçŠ¶æ€ï¼Œå°†onFulfilled/onRejectedå›è°ƒå‡½æ•°å­˜å‚¨èµ·æ¥</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onFulfilledCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">onRejectedCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿”å›æ–°çš„Promiseå®ä¾‹</span>    <span class="token keyword">return</span> promise2<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">resolvePromise</span><span class="token punctuation">(</span><span class="token parameter">promise2<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¦‚æœæ–°çš„Promiseå®ä¾‹å’Œè¿”å›å€¼ç›¸ç­‰ï¼Œåˆ™ç›´æ¥æŠ›å‡ºé”™è¯¯</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>promise2 <span class="token operator">===</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Chaining cycle detected for promise"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ¤æ–­è¿”å›å€¼çš„ç±»å‹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> called <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–thenæ–¹æ³•</span>        <span class="token keyword">const</span> then <span class="token operator">=</span> x<span class="token punctuation">.</span>then<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> then <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼Œè°ƒç”¨å®ƒçš„thenæ–¹æ³•</span>          <span class="token function">then</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>            x<span class="token punctuation">,</span>            <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>              <span class="token comment">// é€’å½’å¤„ç†è¿”å›å€¼</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>              called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolvePromise</span><span class="token punctuation">(</span>promise2<span class="token punctuation">,</span> y<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>              <span class="token comment">// å¦‚æœè°ƒç”¨thenæ–¹æ³•æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè°ƒç”¨rejectæ–¹æ³•</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>              called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>              <span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªæ™®é€šå€¼ï¼Œç›´æ¥å°†å…¶ä½œä¸ºæ–°Promiseçš„å€¼</span>          <span class="token function">resolve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœè°ƒç”¨thenæ–¹æ³•æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè°ƒç”¨rejectæ–¹æ³•</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªæ™®é€šå€¼ï¼Œç›´æ¥å°†å…¶ä½œä¸ºæ–°Promiseçš„å€¼</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// catchæ–¹æ³•å®é™…ä¸Šæ˜¯thenæ–¹æ³•çš„ç®€å†™ï¼Œåªæ³¨å†ŒonRejectedå›è°ƒå‡½æ•°</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Promise.resolveæ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç»resolvedçš„Promiseå®ä¾‹</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Promise.rejectæ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç»rejectedçš„Promiseå®ä¾‹</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Promise.allæ–¹æ³•æ¥æ”¶ä¸€ä¸ªPromiseæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>          <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å°†æ¯ä¸ªPromiseçš„å€¼å­˜å‚¨èµ·æ¥</span>            results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>            count<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token comment">// å¦‚æœæ‰€æœ‰Promiseéƒ½å·²ç»resolvedï¼Œåˆ™resolveæ–°çš„Promise</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token function">resolve</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœä»»ä½•ä¸€ä¸ªPromiseè¢«rejectedï¼Œåˆ™rejectæ–°çš„Promise</span>            <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Promise.raceæ–¹æ³•æ¥æ”¶ä¸€ä¸ªPromiseæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>          <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœä»»ä½•ä¸€ä¸ªPromiseè¢«resolvedï¼Œåˆ™resolveæ–°çš„Promise</span>            <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœä»»ä½•ä¸€ä¸ªPromiseè¢«rejectedï¼Œåˆ™rejectæ–°çš„Promise</span>            <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="44-ç®€è¿°å¸¸è§çš„æ’åºç®—æ³•ï¼Œå¹¶ç»™å‡ºå…·ä½“å®ç°-Algorithms"><a href="#44-ç®€è¿°å¸¸è§çš„æ’åºç®—æ³•ï¼Œå¹¶ç»™å‡ºå…·ä½“å®ç°-Algorithms" class="headerlink" title="44. ç®€è¿°å¸¸è§çš„æ’åºç®—æ³•ï¼Œå¹¶ç»™å‡ºå…·ä½“å®ç° (Algorithms)"></a>44. ç®€è¿°å¸¸è§çš„æ’åºç®—æ³•ï¼Œå¹¶ç»™å‡ºå…·ä½“å®ç° (Algorithms)</h2><p>å†’æ³¡æ’åºï¼ŒO(n^2),æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ å¤§å°ï¼Œç„¶åäº¤æ¢ä½ç½®</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// æ­¤å¤„çš„ len - iè¡¨ç¤ºæœªå®Œæˆæ’åºçš„åˆ—è¡¨ï¼Œä¾‹å¦‚i=0æ—¶ï¼Œarrçš„é•¿åº¦ä¸º4æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çš„ç¬¬äºŒä¸ªå¾ªç¯ä¸­åº”è¯¥æ˜¯0ï¼Œ1ï¼Œ2,</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> arr<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¿«æ’ï¼ŒO(nlog(n)),æ‰¾åˆ°ä¸€ä¸ªå¯¹æ¯”æ•°å­—ï¼Œç„¶åä»¥æ­¤ä¸ºåŸºå‡†ï¼Œå°†å°äºåŸºå‡†å…ƒç´ çš„å€¼ç§»åˆ°å·¦è¾¹çš„æ•°ç»„ï¼Œå¤§äºåŸºå‡†çš„å€¼ç§»åˆ°å³è¾¹ï¼Œç„¶åé€’å½’å¿«æ’æ–¹æ³•è¿›è¡Œæ’åº</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> left <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> right <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      left<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      right<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">quicksort</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> pivot<span class="token punctuation">,</span><span class="token function">quicksort</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="45-ç®€è¿°-React-Hooks-çš„ä½¿ç”¨ï¼Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„-Hook-å¹¶è¯´æ˜å…¶ä½œç”¨"><a href="#45-ç®€è¿°-React-Hooks-çš„ä½¿ç”¨ï¼Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„-Hook-å¹¶è¯´æ˜å…¶ä½œç”¨" class="headerlink" title="45. ç®€è¿° React Hooks çš„ä½¿ç”¨ï¼Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ Hook å¹¶è¯´æ˜å…¶ä½œç”¨"></a>45. ç®€è¿° React Hooks çš„ä½¿ç”¨ï¼Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ Hook å¹¶è¯´æ˜å…¶ä½œç”¨</h2><ol><li>useState: ç”¨äºå£°æ˜çŠ¶æ€ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥è®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰å˜æ›´çŠ¶æ€çš„èƒ½åŠ›</li><li>useEffect: ç”¨äºç»„ä»¶æŒ‚è½½ï¼Œæ›´æ–°å’Œå¸è½½æ‰§è¡Œå‰¯ä½œç”¨ï¼Œä¾‹å¦‚æ•°æ®è·å–ã€DOMæ“ä½œã€å¼‚æ­¥è¯·æ±‚ç­‰ï¼Œå¯ä»¥çœ‹ä½œæ˜¯CompoentDidMountï¼ŒcomponentDidupdateå’ŒcomponentWillUnmountä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç»„åˆ</li><li>useContext: é…åˆcreateContextä½¿å¾—å­ç»„ä»¶è·å¾—å…±äº«çš„å±€éƒ¨æˆ–è€…å…¨å±€çŠ¶æ€</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">const</span> myContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">parentComponent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> ChangeData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">&#123;</span>data<span class="token punctuation">&#125;</span><span class="token operator">></span>      <span class="token operator">&lt;</span>ChildComponent<span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>Mycontext<span class="token punctuation">.</span>Provider<span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">ChildComponent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>Mycontext<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span>data<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>useReducer: ç±»ä¼¼äºReduxçš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºæ‰¹é‡ç®¡ç†å‡½æ•°ç»„ä»¶çŠ¶æ€</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token string">'INCREMENT'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'DECREMENT'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span>dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span>state<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'INCREMENT'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div onClick <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>useCallback: ç”¨äºç¼“å­˜å‡½æ•°ï¼Œé¿å…å‡½æ•°é‡æ–°æ¸²æŸ“å¯¼è‡´é‡å¤æ‰§è¡Œï¼Œæé«˜æ€§èƒ½</li><li>useMemo: ç±»ä¼¼äºuseCallbackï¼Œ ç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚ useCallbackå’ŒuseMemoæœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜reactç»„ä»¶çš„æ€§èƒ½ï¼Œé¿å…é‡å¤è®¡ç®—å’Œç”Ÿæˆå‡½æ•°ã€‚<br>åœ¨æºä»£ç ä¸­<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token function">useMemo</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> callback<span class="token punctuation">,</span>deps<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">function</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token parameter">factory<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è·å–ä¸Šä¸€æ¬¡çš„memoized å€¼å’Œä¾èµ–é¡¹</span>  <span class="token keyword">const</span> lastResult <span class="token operator">=</span> hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>  <span class="token keyword">const</span> lastDeps <span class="token operator">=</span> hook<span class="token punctuation">.</span>memoizedStateDeps<span class="token punctuation">;</span>  <span class="token keyword">const</span> same <span class="token operator">=</span> <span class="token function">areHookInputsEqual</span><span class="token punctuation">(</span>deps<span class="token punctuation">,</span> lastDeps<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ¤æ–­ä¾èµ–é¡¹æ˜¯å¦å˜åŒ–</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>same<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    hook<span class="token punctuation">.</span>memoizedStateDeps <span class="token operator">=</span> deps<span class="token punctuation">;</span>    <span class="token keyword">return</span> lastResult<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä½¿ç”¨factorè®¡ç®—memoizedå€¼</span>  <span class="token keyword">const</span> nextResult <span class="token operator">=</span> <span class="token function">factor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  hook<span class="token punctuation">.</span>memoizedStateDeps <span class="token operator">=</span> deps  hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> nextResult<span class="token punctuation">;</span>  <span class="token keyword">return</span> nextResult<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>useRef: åˆ›å»ºå¼•ç”¨ï¼Œåœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…è®¿é—®ï¼Œå¹¶å¯ä»¥ä¿å­˜ä¸€äº›æ•°æ®ã€‚ä¸»è¦ä½œç”¨æ˜¯è·å–DOMå’Œä½¿ç”¨Refä½¿å¾—å­ç»„ä»¶ä½¿ç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•ã€‚</li></ol><h2 id="46-React-çˆ¶å­ç»„ä»¶é€šè®¯çš„æ–¹å¼-REACT"><a href="#46-React-çˆ¶å­ç»„ä»¶é€šè®¯çš„æ–¹å¼-REACT" class="headerlink" title="46. React çˆ¶å­ç»„ä»¶é€šè®¯çš„æ–¹å¼ (REACT)"></a>46. React çˆ¶å­ç»„ä»¶é€šè®¯çš„æ–¹å¼ (REACT)</h2><p>çˆ¶å­ç»„ä»¶é€šè®¯ä¸»è¦é€šè¿‡propså’ŒContextè¿›è¡Œï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡propsä¼ é€’æ•°æ®å’Œå‡½æ•°åˆ°å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡propsè·å–çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®å’Œå‡½æ•°è¿›è¡Œæ“ä½œï¼Œç„¶åå†é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼å°†æ“ä½œåçš„ç»“æœä¼ é€’å›çˆ¶ç»„ä»¶ã€‚<br>æ­¤å¤–ä¹Ÿå¯ä»¥é€šè¿‡react Context æ¥å®ç°å…¨å±€çŠ¶æ€çš„ç®¡ç†ã€‚</p><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é¿å…å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶å€¼çš„æƒ…å†µï¼Œé¿å…ç»„ä»¶ä¸å¯æ§ã€‚æ­¤å¤–è¿˜éœ€è¦æ³¨æ„å­ç»„ä»¶æœ€å¥½æŠ½ç¦»ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œæ‰€å±•ç¤ºçš„æ•°æ®å‡æ¥è‡ªçˆ¶çº§åˆ«çš„çŠ¶æ€ç»„ä»¶ã€‚</p></blockquote><h2 id="è¯·ç®€è¿°ä¸€ä¸‹-React-ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·æœ‰å“ªäº›ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹-REACT-STATEMENT"><a href="#è¯·ç®€è¿°ä¸€ä¸‹-React-ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·æœ‰å“ªäº›ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹-REACT-STATEMENT" class="headerlink" title="è¯·ç®€è¿°ä¸€ä¸‹ React ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·æœ‰å“ªäº›ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ (REACT STATEMENT)"></a>è¯·ç®€è¿°ä¸€ä¸‹ React ä¸­å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·æœ‰å“ªäº›ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ (REACT STATEMENT)</h2><ol><li>Redux<br>reduxæ˜¯ä¸€ä¸ªåŸºäºfluxæ¶æ„çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒçš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬storeã€actionå’Œreducerï¼Œé€šè¿‡è¿™ä¸‰ä¸ªæ¦‚å¿µæ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ï¼Œreduxçš„ä¼˜ç‚¹æ˜¯ç®¡ç†å¤æ‚çŠ¶æ€æ–¹ä¾¿ï¼Œå¯ä»¥é¿å…ç»„ä»¶é—´çš„çŠ¶æ€ä¼ é€’é—®é¢˜ï¼ŒåŒæ—¶é€šè¿‡ä¸­é—´ä»¶æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œé€‚åˆå¤§å‹åº”ç”¨çš„çŠ¶æ€ç®¡ç†ã€‚ç¼ºç‚¹æ˜¯ä½¿ç”¨å¤æ‚ï¼Œè€Œä¸”ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§å’Œè€¦åˆæ€§ã€‚</li><li>MOBX<br>mobxæ˜¯åŸºäºå“åº”å¼ç¼–ç¨‹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæä¾›äº†obsereableçš„è£…é¥°å™¨ï¼Œå¯ä»¥å°†æ™®é€šå¯¹è±¡è½¬æ¢ä¸ºå¯è§‚å¯Ÿå¯¹è±¡ï¼Œå½“å¯è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œmobxä¼šè‡ªåŠ¨æ›´æ–°ä¾èµ–çš„è§†å›¾ã€‚é€šè¿‡actionï¼Œå¯ä»¥å®šä¹‰çŠ¶æ€å˜æ›´ï¼ŒåŒæ—¶åœ¨çŠ¶æ€å˜æ›´æ—¶é€šè¿‡ä¾èµ–çš„ç»„ä»¶ã€‚ä¼˜ç‚¹æ˜¯ä½¿ç”¨ç®€å•ï¼Œèƒ½å¤Ÿå¿«é€Ÿå“åº”ï¼Œç¼ºç‚¹æ˜¯éœ€è¦æ³¨æ„æ€§èƒ½é—®é¢˜ã€‚</li><li>Context<br>contextæ˜¯reactè‡ªå¸¦çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å…¨å±€æˆ–å±€éƒ¨çŠ¶æ€çš„å…±äº«ï¼Œ é€šè¿‡createcontextå’Œusecontextæ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿çš„åœ¨ç»„ä»¶é—´å…±äº«çŠ¶æ€ï¼Œç¼ºç‚¹æ˜¯åœ¨ç»„ä»¶å±‚æ¬¡è¾ƒæ·±æˆ–è€…çŠ¶æ€è¿‡å¤šæ—¶ï¼Œå¢åŠ ç»´æŠ¤çš„éš¾åº¦ã€‚</li></ol><ul><li>FLUXæ¶æ„ ï¼ˆreduxï¼‰<br>fluxæ¶æ„æ˜¯åŸºäºå•å‘æ•°æ®æµæ€æƒ³æå‡ºçš„æ¶æ„æ¨¡å¼ï¼Œåœ¨fluxæ¶æ„ä¸­ï¼Œæ•°æ®å…·æœ‰å•å‘æµåŠ¨å‹ï¼Œä»dispatch-&gt;store-&gt;view. è¿™ç§å•å‘çš„æ•°æ®æµè®¾è®¡é¿å…äº†æ•°æ®çš„å¾ªç¯ä¾èµ–å’Œç›¸äº’å½±å“ã€‚<br>FLUXçš„æ ¸å¿ƒæ¦‚å¿µ</li></ul><ol><li>ACTION: æ•°æ®è¡Œä¸ºï¼Œä¸€èˆ¬æ˜¯jså¯¹è±¡ï¼ŒåŒ…å«typeå’Œpayloadå±æ€§</li><li>Dispatcher: ç”¨äºå°†actionåˆ†å‘æ³¨å†Œçš„storeï¼Œä¸€èˆ¬æ˜¯å•ä¾‹æ¨¡å¼ï¼Œåœ¨fluxæ¶æ„ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå…¨å±€çš„dispatcherï¼Œè´Ÿè´£åè°ƒactionå’Œstoreçš„é€šä¿¡</li><li>Storeï¼šæ•°æ®æºï¼Œä¸€èˆ¬æ˜¯å•ä¾‹å¯¹è±¡ï¼ŒStore æ¥æ”¶Dispatcheråˆ†å‘çš„actionï¼Œç„¶åæ ¹æ®actionçš„ç±»å‹ï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ›´æ–°çŠ¶æ€ï¼ŒçŠ¶æ€æ›´æ–°åï¼Œé€šè¿‡viewæ¸²æŸ“é¡µé¢</li><li>Viewï¼š reactç»„ä»¶ï¼Œviewä»storeè·å–æ•°æ®ï¼Œæ ¹æ®æ•°æ®æ¸²æŸ“ç•Œé¢ã€‚<br>Fluxæ¶æ„çš„ä¼˜ç‚¹åœ¨äºï¼Œæ•°æ®æµåŠ¨çš„å•å‘æ€§ä¿è¯äº†ä»£ç çš„å¯é¢„æµ‹æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´åŠ å¥å£®å’Œå¯æ‰©å±•ã€‚ä½†åŒæ—¶ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œä¾‹å¦‚å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºï¼ŒFluxæ¶æ„éœ€è¦ç¼–å†™å¤§é‡çš„ä»£ç ï¼Œå¢åŠ äº†å¼€å‘çš„å·¥ä½œé‡</li></ol><ul><li>å“åº”å¼ç¼–ç¨‹ ï¼ˆMOBXï¼‰<br>å“åº”å¼ç¼–ç¨‹é€šè¿‡å°†æ•°æ®æµçš„å˜åŒ–å°è£…æˆä¸€ä¸ªå¯è§‚å¯Ÿçš„åºåˆ—ï¼Œå½“æ•°æ®æµçš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨å‘å‡ºé€šçŸ¥ï¼Œä»è€Œå®ç°å¯¹æ•°æ®æµçš„å“åº”å¼å¤„ç†ã€‚å…¶æ ¸å¿ƒæ˜¯è§‚å¯Ÿè€…æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œå…¶ä¸­è§‚å¯Ÿè€…æ¨¡å¼ç”¨äºå®æ—¶å¯¹æ•°æ®å˜åŒ–çš„è®¢é˜…å’Œé€šçŸ¥ï¼Œå‡½æ•°å¼ç¼–ç¨‹åˆ™ç”¨äºå¯¹æ•°æ®æµçš„å¤„ç†ã€‚</li></ul><h2 id="Redux-ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåˆ†åˆ«è§£é‡Šå…¶ä½œç”¨å’Œå…³ç³»ï¼ˆREDUXï¼‰"><a href="#Redux-ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåˆ†åˆ«è§£é‡Šå…¶ä½œç”¨å’Œå…³ç³»ï¼ˆREDUXï¼‰" class="headerlink" title="Redux ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåˆ†åˆ«è§£é‡Šå…¶ä½œç”¨å’Œå…³ç³»ï¼ˆREDUXï¼‰"></a>Redux ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿåˆ†åˆ«è§£é‡Šå…¶ä½œç”¨å’Œå…³ç³»ï¼ˆREDUXï¼‰</h2><p>Reduxçš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯ storeã€actionå’Œreducer</p><ul><li>store æ˜¯reduxä¿å­˜æ‰€æœ‰stateçš„åœ°æ–¹ï¼Œå¯ä»¥ç”¨è¿‡store.getStateè·å–å½“å‰çš„stateï¼Œé€šè¿‡store.dispatch(action) åˆ†å‘actionæ¥æ›´æ–°stateï¼Œé€šè¿‡store.subscribe(listener)æ¥æ³¨å†Œstateå˜åŒ–æ—¶çš„å›è°ƒå‡½æ•°</li><li>actionæ˜¯ä¸€ä¸ªæ™®é€šçš„jså¯¹è±¡ï¼Œæè¿°åŠ¨ä½œï¼Œä½“é‡éœ€è¦åŒ…å«ä¸€ä¸ªtypeå­—æ®µæ¥æŒ‡å®šäº‹ä»¶ç±»å‹ï¼Œé€šè¿‡dispatchæ–¹æ³•å‘é€actionï¼Œä»è€Œè§¦å‘reduceræ›´æ–°state</li><li>reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰çš„stateå’Œactionï¼Œè¿”å›ä¸€ä¸ªæ–°çš„stateï¼Œreducer çš„è®¾è®¡éœ€è¦æ ¹æ®åº”ç”¨çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚æ¥å®ç°ï¼Œä½†éœ€è¦æ»¡è¶³ä»¥ä¸‹ç‰¹ç‚¹ï¼šä¼ å…¥çš„ state å’Œ action ä¸å˜æ—¶ï¼Œè¿”å›çš„æ–° state ä¹Ÿä¸å˜ï¼›ä¸åº”è¯¥åœ¨ reducer ä¸­æ‰§è¡Œä»»ä½•å‰¯ä½œç”¨ï¼Œå¦‚è°ƒç”¨ API æˆ–ä¿®æ”¹å¤–éƒ¨çŠ¶æ€</li></ul><p>actionè§¦å‘reduceræ›´æ–°stateä¸­çš„stateï¼Œç»„ä»¶ä»storeä¸­è·å–stateå¹¶æ›´å…·stateçš„å˜åŒ–æ›´æ–°viewï¼Œæµç¨‹ä¸ºaction-&gt;reducer-&gt;store-&gt; viewã€‚è¿™ç§æ¶æ„å¯ä»¥æœ‰æ•ˆçš„åˆ†ç¦»çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘ã€‚</p><h2 id="MobX-ä¸­çš„-observableã€-action-å’Œ-computed-åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¾‹è¯´æ˜å…¶ä½¿ç”¨æ–¹æ³•å’Œä½œç”¨ã€‚ï¼ˆMOBXï¼‰"><a href="#MobX-ä¸­çš„-observableã€-action-å’Œ-computed-åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¾‹è¯´æ˜å…¶ä½¿ç”¨æ–¹æ³•å’Œä½œç”¨ã€‚ï¼ˆMOBXï¼‰" class="headerlink" title="MobX ä¸­çš„ @observableã€@action å’Œ @computed åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¾‹è¯´æ˜å…¶ä½¿ç”¨æ–¹æ³•å’Œä½œç”¨ã€‚ï¼ˆMOBXï¼‰"></a>MobX ä¸­çš„ @observableã€@action å’Œ @computed åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸¾ä¾‹è¯´æ˜å…¶ä½¿ç”¨æ–¹æ³•å’Œä½œç”¨ã€‚ï¼ˆMOBXï¼‰</h2><ul><li><p>obserableæ˜¯mobxçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå°†æ•°æ®è½¬æ¢ä¸ºå¯è§‚å¯Ÿå¯¹è±¡ï¼Œä½¿å…¶èƒ½å¤Ÿè¢«mobxè¿½è¸ªå’Œå“åº”ï¼Œåœ¨mobxä¸­ï¼Œobserableå¯¹è±¡çš„å€¼å¯ä»¥è¢«ç›´æ¥æ›´æ”¹ï¼Œå½“ä»–æ›´æ”¹åï¼Œæ‰€æœ‰ä¾èµ–è¯¥å¯¹è±¡çš„è§‚å¯Ÿè€…éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p></li><li><p>actionè£…é¥°å™¨å°†æ™®é€šå‡½æ•°ç»‘å®šåˆ°obserableå¯¹è±¡ä¸Šï¼Œä»¥ä¾¿ä½¿ç”¨å®ƒæ¥ä¿®æ”¹obserableå¯¹è±¡çš„å€¼ã€‚åœ¨mobxä¸­ï¼Œä½¿ç”¨actionè£…é¥°å™¨åŒ…è£…ä¿®æ”¹obserableå¯¹è±¡çš„æ“ä½œï¼Œå¯ä»¥ä¿è¯è¿™äº›æ“ä½œéƒ½æ˜¯åœ¨äº‹åŠ¡ä¸­è¿›è¡Œçš„ï¼Œä»è€Œç¡®ä¿æ‰§è¡Œå®Œæ¯•åä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰çš„è§‚å¯Ÿè€…ã€‚</p></li><li><p>computedè£…é¥°å™¨æ˜¯ç”¨äºåˆ›å»ºè®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§æ˜¯æ ¹æ®obserableå¯¹è±¡çš„å€¼è‡ªåŠ¨æ›´æ–°è‡ªå·±çš„å€¼ã€‚</p></li></ul><h2 id="å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„mobxï¼Œä½“ç°è§‚å¯Ÿè€…æ¨¡å¼å’Œå“åº”å¼ç¼–ç¨‹ï¼Œæ‹¥æœ‰obserable-action-computed"><a href="#å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„mobxï¼Œä½“ç°è§‚å¯Ÿè€…æ¨¡å¼å’Œå“åº”å¼ç¼–ç¨‹ï¼Œæ‹¥æœ‰obserable-action-computed" class="headerlink" title="å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„mobxï¼Œä½“ç°è§‚å¯Ÿè€…æ¨¡å¼å’Œå“åº”å¼ç¼–ç¨‹ï¼Œæ‹¥æœ‰obserable,action,computed."></a>å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„mobxï¼Œä½“ç°è§‚å¯Ÿè€…æ¨¡å¼å’Œå“åº”å¼ç¼–ç¨‹ï¼Œæ‹¥æœ‰obserable,action,computed.</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Obserable</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span>  <span class="token function">subscribers</span><span class="token punctuation">(</span><span class="token parameter">subscribers</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>subscribers<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">foreach</span><span class="token punctuation">(</span><span class="token parameter">subscribers</span> <span class="token operator">=></span> <span class="token function">subscribers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token function">set</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">[</span>props<span class="token punctuation">]</span><span class="token operator">=</span>value<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">get</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// exm</span><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>state<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'state changed'</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">const</span> doubled <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">// ä¿®æ”¹çŠ¶æ€</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// è·å– computed å€¼</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doubled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="mobxå’Œreactç»“åˆä¸€èˆ¬ä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œä½ å¯ä»¥è§£é‡Šè£…é¥°å™¨è¯­æ³•çš„åŸç†å—ï¼Ÿ"><a href="#mobxå’Œreactç»“åˆä¸€èˆ¬ä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œä½ å¯ä»¥è§£é‡Šè£…é¥°å™¨è¯­æ³•çš„åŸç†å—ï¼Ÿ" class="headerlink" title="mobxå’Œreactç»“åˆä¸€èˆ¬ä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œä½ å¯ä»¥è§£é‡Šè£…é¥°å™¨è¯­æ³•çš„åŸç†å—ï¼Ÿ"></a>mobxå’Œreactç»“åˆä¸€èˆ¬ä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œä½ å¯ä»¥è§£é‡Šè£…é¥°å™¨è¯­æ³•çš„åŸç†å—ï¼Ÿ</h3><p>mobxä¹‹æ‰€ä»¥å¯ä»¥åœ¨reactä¸­é‡‡ç”¨è£…é¥°å™¨è¯­æ³•æ˜¯å› ä¸ºbabelæ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å…è®¸å¼€å‘äººå‘˜ç¼–å†™å’Œæ³¨å†Œè‡ªå®šä¹‰çš„è£…é¥°å™¨ã€‚å½“babelé‡åˆ°ä¸€ä¸ªè¢«è£…é¥°å™¨ä¿®é¥°çš„èŠ‚ç‚¹æ—¶ï¼Œæ’ä»¶ä¼šå¤„ç†è¯¥èŠ‚ç‚¹ï¼Œä¼šå°†è£…é¥°å™¨èŠ‚ç‚¹è½¬æ¢ä¸ºä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œè¯¥å‡½æ•°æ¥æ”¶è¢«è£…é¥°çš„èŠ‚ç‚¹ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹<br>MobXæ˜¯é€šè¿‡Babelçš„è£…é¥°å™¨æ’ä»¶æ¥å®ç°è£…é¥°å™¨è¯­æ³•çš„æ”¯æŒçš„ã€‚å®ƒä½¿ç”¨äº†babel-plugin-transform-decorators-legacyæ’ä»¶æ¥å®ç°è£…é¥°å™¨çš„è½¬æ¢ã€‚</p><p>è¯¥æ’ä»¶ä¼šå°†æ‰€æœ‰çš„è£…é¥°å™¨èŠ‚ç‚¹è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†mobxçš„observableè£…é¥°å™¨æ¥å®šä¹‰å¯è§‚å¯Ÿçš„å±æ€§ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> observable <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token keyword">class</span> <span class="token class-name">MyStore</span> <span class="token punctuation">&#123;</span>  @observable count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ç»è¿‡babel-plugin-transform-decorators-legacyæ’ä»¶çš„è½¬æ¢åï¼Œè¯¥ä»£ç å°†è¢«è½¬æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> observable <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token keyword">class</span> <span class="token class-name">Mystore</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è½¬æ¢åçš„ä»£ç ä¸­ï¼Œobservableè£…é¥°å™¨è¢«è½¬æ¢ä¸ºäº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨observable(this, â€œcountâ€, 0)ï¼Œè¯¥å‡½æ•°ä¼šæ¥å—å½“å‰çš„å¯¹è±¡ã€å±æ€§åå’Œåˆå§‹å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯è§‚å¯Ÿçš„å±æ€§ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè£…é¥°å™¨è¯­æ³•æ˜¯ä¸€ä¸ªææ¡ˆæ ‡å‡†ï¼Œå°šæœªæˆä¸ºå®˜æ–¹çš„ECMAScriptè¯­æ³•ï¼Œå› æ­¤åœ¨ä½¿ç”¨è£…é¥°å™¨è¯­æ³•æ—¶éœ€è¦ä½¿ç”¨babel-plugin-transform-decorators-legacyæ’ä»¶æ¥è¿›è¡Œè½¬æ¢ï¼Œä»¥å…¼å®¹ä¸åŒçš„æµè§ˆå™¨å’ŒNode.jsç‰ˆæœ¬ã€‚</p><p>æ­¤å¤–ï¼ŒMobXä¹Ÿæä¾›äº†å¦å¤–ä¸€ä¸ªbabelæ’ä»¶babel-plugin-transform-decoratorsç”¨äºæ”¯æŒæœ€æ–°ç‰ˆçš„è£…é¥°å™¨è¯­æ³•ã€‚ä½ å¯ä»¥é€šè¿‡npmå®‰è£…è¯¥æ’ä»¶ï¼Œç„¶ååœ¨.babelrcæˆ–è€…webpacké…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä½¿å…¶æ”¯æŒæœ€æ–°çš„è£…é¥°å™¨è¯­æ³•ã€‚</p><h2 id="Context-API-æ˜¯-React-æä¾›çš„åŸç”ŸçŠ¶æ€ç®¡ç†å·¥å…·ï¼Œè¯·ç®€è¿°å…¶åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è¯´æ˜å…¶é€‚ç”¨åœºæ™¯"><a href="#Context-API-æ˜¯-React-æä¾›çš„åŸç”ŸçŠ¶æ€ç®¡ç†å·¥å…·ï¼Œè¯·ç®€è¿°å…¶åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è¯´æ˜å…¶é€‚ç”¨åœºæ™¯" class="headerlink" title="Context API æ˜¯ React æä¾›çš„åŸç”ŸçŠ¶æ€ç®¡ç†å·¥å…·ï¼Œè¯·ç®€è¿°å…¶åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è¯´æ˜å…¶é€‚ç”¨åœºæ™¯"></a>Context API æ˜¯ React æä¾›çš„åŸç”ŸçŠ¶æ€ç®¡ç†å·¥å…·ï¼Œè¯·ç®€è¿°å…¶åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è¯´æ˜å…¶é€‚ç”¨åœºæ™¯</h2><p>Context æ˜¯ React ä¸­çš„ä¸€ä¸ª APIï¼Œå®ƒç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­ä¼ é€’æ•°æ®ã€‚é€šè¿‡ä½¿ç”¨ Contextï¼Œå¯ä»¥å°†æ•°æ®ç›´æ¥ä¼ é€’ç»™æ‰€æœ‰å­ç»„ä»¶ï¼Œè€Œä¸å¿…å°†æ•°æ®é€å±‚ä¼ é€’ç»™æ¯ä¸ªå­ç»„ä»¶ã€‚åœ¨ä½¿ç”¨ Context æ—¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ Provider åŒ…è£…è¦ä¼ é€’çš„æ•°æ®ï¼Œç„¶ååœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ useContext é’©å­æ¥è·å–æ•°æ®ã€‚</p><p>åœ¨ React ä¸­ï¼ŒContext å¯ä»¥ç”¨äºå®ç°å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä½†å®ƒå¹¶ä¸åƒ Redux é‚£æ ·æä¾›äº†ä¸€å¥—å®Œæ•´çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚ç›¸æ¯”äº Reduxï¼ŒContext æ›´åŠ è½»é‡çº§ï¼Œé€‚ç”¨äºå°å‹åº”ç”¨æˆ–å±€éƒ¨çŠ¶æ€å…±äº«çš„åœºæ™¯ã€‚åŒæ—¶ï¼ŒContext å¯ä»¥å’Œ useContext é’©å­ä¸€èµ·ä½¿ç”¨ï¼Œè®©ç»„ä»¶åœ¨ä¸åŒå±‚çº§é—´è·å–å’Œå…±äº«çŠ¶æ€æ›´åŠ æ–¹ä¾¿ã€‚</p><h2 id="è¯·ç»“åˆä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Œåˆ†åˆ«ä½¿ç”¨-Redux-å’Œ-MobX-å®ç°è¯¥åœºæ™¯ä¸‹çš„çŠ¶æ€ç®¡ç†ï¼Œå¹¶æ¯”è¾ƒä¸¤ç§æ–¹æ¡ˆçš„å¼‚åŒã€‚"><a href="#è¯·ç»“åˆä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Œåˆ†åˆ«ä½¿ç”¨-Redux-å’Œ-MobX-å®ç°è¯¥åœºæ™¯ä¸‹çš„çŠ¶æ€ç®¡ç†ï¼Œå¹¶æ¯”è¾ƒä¸¤ç§æ–¹æ¡ˆçš„å¼‚åŒã€‚" class="headerlink" title="è¯·ç»“åˆä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Œåˆ†åˆ«ä½¿ç”¨ Redux å’Œ MobX å®ç°è¯¥åœºæ™¯ä¸‹çš„çŠ¶æ€ç®¡ç†ï¼Œå¹¶æ¯”è¾ƒä¸¤ç§æ–¹æ¡ˆçš„å¼‚åŒã€‚"></a>è¯·ç»“åˆä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼Œåˆ†åˆ«ä½¿ç”¨ Redux å’Œ MobX å®ç°è¯¥åœºæ™¯ä¸‹çš„çŠ¶æ€ç®¡ç†ï¼Œå¹¶æ¯”è¾ƒä¸¤ç§æ–¹æ¡ˆçš„å¼‚åŒã€‚</h2><p>å‡è®¾æœ‰ä¸€ä¸ªè´­ç‰©è½¦é¡µé¢ï¼Œéœ€è¦ç®¡ç†è´­ç‰©è½¦ä¸­å•†å“çš„çŠ¶æ€ï¼Œæ•°é‡ï¼Œæ€»ä»·åŠåŠ è½½çŠ¶æ€ç­‰ã€‚</p><h3 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h3><p>1.å®šä¹‰storeï¼ŒåŒ…å«ä¸Šè¿°çŠ¶æ€<br>2.é€šè¿‡actionçš„typeå®šä¹‰å„ä¸ªçŠ¶æ€çš„è¡Œä¸º<br>3.æ‰§è¡Œconnectå‡½æ•°ï¼Œå‚æ•°æ˜¯mapStateToPropså’ŒmapDispatchToPropsä»¥åŠå½“å‰ç»„ä»¶ã€‚è¿æ¥ç»„ä»¶å’Œreduxçš„storeå’Œactionã€‚<br>4.é€šè¿‡mapStateToPropsä½¿ç»„ä»¶è·å–storeçŠ¶æ€ï¼Œé€šè¿‡mapDispatchToPropsè·å–dispatchå‡½æ•°ï¼Œä½¿ç”¨dispatchå‡½æ•°æ‰§è¡Œaction<br>5.é€šè¿‡propsè·å–å’Œä¿®æ”¹çŠ¶æ€ï¼Œè§¦å‘actionæ¥ä¿®æ”¹storeçš„çŠ¶æ€<br>6.ç»„ä»¶é‡æ¸²æŸ“</p><p>store</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> initalState <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">=</span>initalState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token string">'INCREMENT'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'DECREMENT'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>      <span class="token keyword">return</span> state<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>react</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>count<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>increment<span class="token punctuation">&#125;</span><span class="token operator">></span>increment<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">&#123;</span>props<span class="token punctuation">.</span>decrement<span class="token punctuation">&#125;</span><span class="token operator">></span>decrement<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>    <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'increment'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function-variable function">decrement</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'decrement'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToprops<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="mobx"><a href="#mobx" class="headerlink" title="mobx"></a>mobx</h3><p>1.åˆ›å»ºstateï¼ŒåŒ…å«ä¸Šè¿°çŠ¶æ€<br>2.ä½¿ç”¨observableå°†stateè½¬æ¢ä¸ºå¯è§‚å¯Ÿå¯¹è±¡ï¼Œä½¿å…¶æˆä¸ºå“åº”å¼<br>3.é€šè¿‡actionå‡½æ•°å®šä¹‰å„ä¸ªçŠ¶æ€çš„è¡Œä¸º<br>4.é€šè¿‡observableè¿æ¥storeå’Œcomponentï¼Œè·å–çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ã€‚<br>5.é€šè¿‡useEffectå’ŒuseObservableè·å–å’Œç›‘æ§çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘actionæ¥æ”¹å˜state<br>6.ç»„ä»¶é‡æ¸²æŸ“ã€‚</p><p>å¼‚åŒç‚¹ï¼š<br>1.reduxåŸºäºactionå’Œreducerï¼Œä¿®æ”¹çŠ¶æ€éœ€è¦é€šè¿‡dispatchå’Œactionæ”¹å˜storeä¸­çš„çŠ¶æ€ã€‚è€Œmobxç›´æ¥ä¿®æ”¹å¯è§‚å¯Ÿå¯¹è±¡ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ã€‚<br>2.reduxä½¿ç”¨å¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰actionå’Œreducerï¼Œè€Œmobxåªéœ€è¦ä½¿ç”¨observableå’Œactionå‡½æ•°å°±å¯ä»¥ã€‚<br>3.reduxé€»è¾‘æ¸…æ™°ä½†ä½¿ç”¨ç¹çï¼Œå¯ä»¥é¿å…ä¸åŒç»„ä»¶çš„çŠ¶æ€å†²çªã€‚mobxç®€å•æ˜“ç”¨ï¼Œé€‚åˆå°å‹é¡¹ç›®ã€‚</p><h2 id="è§£é‡Š-React-ä¸­çš„é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ¦‚å¿µå’Œä½œç”¨ï¼Œå¹¶åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯"><a href="#è§£é‡Š-React-ä¸­çš„é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ¦‚å¿µå’Œä½œç”¨ï¼Œå¹¶åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="è§£é‡Š React ä¸­çš„é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ¦‚å¿µå’Œä½œç”¨ï¼Œå¹¶åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯"></a>è§£é‡Š React ä¸­çš„é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ¦‚å¿µå’Œä½œç”¨ï¼Œå¹¶åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯</h2><p>HOCæœ¬è´¨ä¸Šæ˜¯ä¸€ç§å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼ŒHOCä¸ä¼šä¿®æ”¹ä¼ å…¥çš„ç»„ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨åŒ…è£…ç»„ä»¶åŒ…è£¹èµ·æ¥ï¼Œå¢å¼ºåŠŸèƒ½ã€‚<br>HOCå¹¶ä¸æ˜¯reactç‹¬æœ‰çš„ï¼Œå…¶å®æ˜¯å‡½æ•°ç¼–ç¨‹çš„ä¸€ç§æ¨¡å¼ï¼Œå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚<br>HOCå¸¸ç”¨åœºæ™¯</p><ol><li>ç»„ä»¶å¤ç”¨ï¼šä½¿ç”¨HOCå°†é€šç”¨åŠŸèƒ½å°è£…æˆä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œä½¿å¾—å¤šä¸ªç»„ä»¶å¯ä»¥å¤ç”¨ã€‚</li><li>æ¸²æŸ“åŠ«æŒï¼š é€šè¿‡åŒ…è£¹ç»„ä»¶çš„å½¢å¼å¯¹å­ç»„ä»¶è¿›è¡Œpropså¹²é¢„</li><li>æ¡ä»¶æ¸²æŸ“ï¼š æ ¹æ®å®é™…æƒ…å†µå†³å®šæ˜¯å¦æ¸²æŸ“å­ç»„ä»¶ï¼Œä¾‹å¦‚ loading</li><li>çŠ¶æ€æŠ½è±¡</li></ol><h2 id="MVC-amp-MVVM-amp-FLUX"><a href="#MVC-amp-MVVM-amp-FLUX" class="headerlink" title="MVC &amp; MVVM &amp; FLUX"></a>MVC &amp; MVVM &amp; FLUX</h2><h3 id="1-MVC"><a href="#1-MVC" class="headerlink" title="1.MVC"></a>1.MVC</h3><p>View: æ•°æ®å±•ç¤ºå’Œç”¨æˆ·è¾“å…¥<br>Controller: å“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œå¯¹æ•°æ®è¿›è¡Œæ“ä½œ<br>Model: ç®¡ç†ç¨‹åºéœ€è¦çš„æ•°æ®ï¼Œå®šä¹‰æ“ä½œæ•°æ®çš„è¡Œä¸ºã€‚</p><p><img src="https://pic1.zhimg.com/80/3d2abf5c8d81424c4797201384b456ac_1440w.webp"><br>ä»viewå¼€å§‹ï¼Œç”¨æˆ·åœ¨uiä¸Šè¿›è¡Œæ“ä½œåï¼Œç”¨æˆ·çš„æ“ä½œè¢«è½¬å‘åˆ°äº†controlleä¸Šï¼Œcontrolleræ ¹æ®ç”¨æˆ·çš„æ“ä½œå¯¹æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œæ•°æ®æ›´æ–°åï¼ŒModelå±‚æ¥å—åˆ°å˜æ›´ï¼ŒModelå¯¹æ‰€æœ‰ä¾èµ–çš„æ˜¯å›¾å‘å‡ºæ›´æ–°é€šçŸ¥ï¼Œæ”¶åˆ°é€šçŸ¥çš„è§†å›¾è·å–æœ€æ–°çš„æ•°æ®ã€‚</p><p>åœ¨reactä¸­mvcçš„ä½“ç°å¯ä»¥ç†è§£æˆï¼Œmodelä¸ºç»„ä»¶çš„çŠ¶æ€ï¼Œcontrolleræ˜¯setStateæˆ–è€…useStateï¼Œè€Œviewåˆ™æ˜¯renderä¸­çš„ç»„ä»¶ã€‚<br>å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œç”¨æˆ·è¾“å…¥äº†è¡¨å•ï¼Œå½“viewæ¥æ”¶åˆ°æ•°æ®åï¼ŒControllerï¼ˆuseStateï¼‰æ›´æ–°å€¼ï¼Œmodelï¼ˆstateå‘ç”Ÿå˜åŒ–ï¼‰ï¼Œviewå†æ¬¡æ›´æ–°ã€‚</p><p>MVCæ¨¡å¼åœ¨ç†æƒ³çŠ¶æ€ä¸‹æ˜¯1:1:1çš„å…³ç³»ï¼Œä½†æ˜¯ç°å®ä¸­é€šå¸¸æ˜¯å¤šè§†å›¾ï¼Œå¤šæ¨¡å‹ã€‚æ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹viewå’Œmodelå¯ä»¥æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´å•ä¸ªviewå¯èƒ½æ¥è‡ªå¤šä¸ªmodelã€‚å•ä¸ªmodelæ›´æ–°éœ€è¦é€šçŸ¥å¤šä¸ªviewã€‚ç”¨æˆ·åœ¨viewä¸Šçš„æ“ä½œå¯ä»¥å¯¹å¤šä¸ªmodelé€ æˆå½±å“ã€‚æœ€è‡´å‘½çš„åæœï¼Œæ˜¯viewå’Œmodelå½¢æˆç›¸äº’æ›´æ–°çš„æ­»å¾ªç¯ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç™»é™†è¡¨å•ï¼Œå½“ç”¨æˆ·å¯†ç é”™è¯¯åï¼Œéœ€è¦æç¤ºç”¨æˆ·å¯†ç é”™è¯¯ï¼Œå¹¶ä¸”æ¸…ç©ºè´¦æˆ·åå’Œå¯†ç ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­viewä¸ºaccount inputå’Œpassword inputï¼Œå½“ä¸¤è€…å‘ç”Ÿå˜åŒ–åï¼Œaccount component å’Œpassword component çš„Controllerå‘ç”Ÿå˜åŒ–ï¼Œä¸¤è€…çš„stateå‘ç”Ÿå˜åŒ–ï¼Œviewæ›´æ–°ã€‚ï¼ˆ1viewï¼š2modelï¼š2controllerï¼‰æ­¤æ—¶çŠ¶æ€å›¾å¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="https://pic4.zhimg.com/80/74383cc223b0a29bec6650826bdc72cb_1440w.webp"></p><h3 id="2-FLUX"><a href="#2-FLUX" class="headerlink" title="2.FLUX"></a>2.FLUX</h3><p><img src="https://pic1.zhimg.com/80/004fe0045e9e2b0fe1673a5a9542230c_1440w.webp"><br>Action: ç»„ä»¶è§¦å‘åŠ¨ä½œ<br>Dispatch: fluxçš„ä¸­æ¢ï¼Œæ‰€æœ‰çš„actionéƒ½ä¼šè¢«dispatchå¤„ç†ï¼Œdispatcheråœ¨æ¥æ”¶åˆ°actionä¹‹åï¼Œè°ƒç”¨storeä¸­çš„å›è°ƒï¼Œdispatcherä¸å«ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯ä¸€ä¸ªåˆ†å‘ä¸­å¿ƒï¼Œæˆ–è€…è¯´è§„åˆ™ã€‚<br>Store:  storeåªåŒ…å«æ¥æ”¶åˆ°actionè¡Œä¸ºå çŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä¸æä¾›æ“ä½œæ•°æ®çš„å€Ÿå£ã€‚actionå’Œdispatcheréƒ½æ— æ³•ç›´æ¥æ“ä½œstoreã€‚<br>View:  è§†å›¾å±‚ï¼Œå±•ç¤ºæ•°æ®ä¹Ÿå¤„ç†ç”¨æˆ·çš„äº¤äº’è¯·æ±‚ï¼ŒviewåŒæ—¶ä¹Ÿç›‘å¬ç€storeä¸­çš„æ•°æ®æ›´å˜ï¼Œä¸€æ—¦æ”¹å˜åˆ™é‡æ–°è¯·æ±‚æ•°æ®ã€‚<br>å¤æ‚çš„fluxæµè¡Œå›¾å¦‚å›¾æ‰€ç¤º<br><img src="https://pic2.zhimg.com/80/5b3b3765741c4735792e9824be265835_1440w.webp"></p><h2 id="ä»€ä¹ˆæ˜¯-React-Fiber-æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆ-React-éœ€è¦å¼•å…¥-Fiber-æ¶æ„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-React-Fiber-æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆ-React-éœ€è¦å¼•å…¥-Fiber-æ¶æ„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ React Fiber æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆ React éœ€è¦å¼•å…¥ Fiber æ¶æ„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ React Fiber æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆ React éœ€è¦å¼•å…¥ Fiber æ¶æ„ï¼Ÿ</h2><p>Fiber æ¶æ„æ˜¯react16ä¸­å¼•å…¥çš„ä¸€ç§åè°ƒç®—æ³•å’Œæ¶æ„ï¼Œä»–çš„ç›®çš„æ˜¯æé«˜reactæ¸²æŸ“æ•ˆç‡å’Œæ€§èƒ½ã€‚<br>åœ¨ä¼ ç»Ÿçš„reactæ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œreactåœ¨æ›´æ–°æ—¶ä¼šå…ˆæ„å»ºä¸€ä¸ªè™šæ‹Ÿdomæ ‘ï¼Œç„¶åå¯¹æ¯”ä¹‹å‰çš„vm treeï¼Œæ‰¾åˆ°å·®å¼‚éƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚è¿™ç§éå†å’Œæ¯”è¾ƒçš„è¿‡ç¨‹æ˜¯åŒæ­¥çš„ã€‚è€Œjsåœ¨æµè§ˆå™¨ä¸­æ˜¯å•çº¿ç¨‹ä»»åŠ¡ï¼Œæµè§ˆå™¨çš„ä¸»çº¿ç¨‹ä¼šè¢«å ç”¨ï¼Œç›´åˆ°æ›´æ–°å®Œæˆã€‚åœ¨ç»„ä»¶æ ‘è¾ƒå¤§æˆ–è€…æ›´æ–°é¢‘ç¹æ—¶ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreactå¼•å…¥äº†fiberæ¶æ„ï¼Œfiberçš„åè°ƒç®—æ³•æä¾›äº†ä¸€ç§åŸºäºæ—¶é—´ç‰‡çš„æœºåˆ¶ï¼Œå°†æ›´æ–°è¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªæ—¶é—´ç‰‡ï¼Œä½¿å¾—æ›´æ–°è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ã€æ¢å¤å’Œä¼˜å…ˆçº§è°ƒåº¦ï¼Œä»è€Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´ï¼Œæé«˜æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚fiberæ¶æ„è¿˜é€šè¿‡å®ç°å¼‚æ­¥æ¸²æŸ“å’Œå¢é‡æ¸²æŸ“ç­‰æœºåˆ¶ï¼Œæé«˜äº†reactæ€§èƒ½ã€‚</p><h2 id="fiberä¸­çš„åè°ƒç®—æ³•å…·ä½“åœ¨å“ªäº›æ–¹é¢ä½“ç°"><a href="#fiberä¸­çš„åè°ƒç®—æ³•å…·ä½“åœ¨å“ªäº›æ–¹é¢ä½“ç°" class="headerlink" title="fiberä¸­çš„åè°ƒç®—æ³•å…·ä½“åœ¨å“ªäº›æ–¹é¢ä½“ç°"></a>fiberä¸­çš„åè°ƒç®—æ³•å…·ä½“åœ¨å“ªäº›æ–¹é¢ä½“ç°</h2><p>react fiber æ¶æ„ä¸­çš„åè°ƒç®—æ³•æ˜¯åŸºäºfiber treeçš„æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•å®ç°çš„ï¼Œè¯¥ç®—æ³•ç§°ä¸ºreact fiber reconcilerã€‚<br>react fiber reconcilerçš„åŸºæœ¬æ€æƒ³æ˜¯å°†ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹æ‹†åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œå¹¶åœ¨æ¯ä¸ªé˜¶æ®µä¹‹é—´è¿›è¡Œä¼˜å…ˆçº§åˆ¤æ–­å’Œè°ƒåº¦ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªç»„ä»¶çš„fiberèŠ‚ç‚¹éƒ½ä¼šæ ‡è®°ä¸ºä¸åŒçš„çŠ¶æ€ï¼Œä»¥ä¾¿è°ƒåº¦å™¨åœ¨åç»­çš„æ›´æ–°ä¸­ä¼˜å…ˆè€ƒè™‘å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„èŠ‚ç‚¹ã€‚<br>react fiberæ¶æ„ä¸­çš„åè°ƒç®—æ³•ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢</p><ol><li>å¼‚æ­¥æ¸²æŸ“ï¼š fiberæ¶æ„ä¸­å¼•å…¥äº†æ—¶é—´åˆ‡ç‰‡å’Œä»»åŠ¡ä¼˜å…ˆçº§ï¼Œå¯ä»¥è®©reactç¨‹åºåœ¨å¤„ç†å¤§é‡ç¨‹åºæ—¶æ›´å¥½çš„å“åº”ç”¨æˆ·æ“ä½œ</li><li>å¯ä¸­æ–­çš„æ¸²æŸ“ï¼š å› ä¸ºfiberæ¶æ„å°†æ¸²æŸ“è¿‡ç¨‹è¿›è¡Œæ‹†åˆ†ï¼Œå› æ­¤ä»»åŠ¡å¯ä¸­æ–­ï¼Œä½¿å¾—ä»»åŠ¡å•å…ƒæ›´å°ï¼Œé¿å…é•¿æ—¶é—´ä»»åŠ¡å¯¼è‡´æµè§ˆå™¨æ¸²æŸ“çº¿ç¨‹é˜»å¡ã€‚</li><li>æ‰¹å¤„ç†æ›´æ–°ï¼š fiberæ¶æ„å°†ç»„ä»¶æ›´æ–°è¿‡ç¨‹æ‹†åˆ†ä¸ºå¤šä¸ªå°çš„ä»»åŠ¡å•å…ƒï¼Œå¹¶ä½¿ç”¨requestIdleCallback API åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´è¿›è¡Œè°ƒåº¦ã€‚</li></ol><h2 id="React-Fiber-æ¶æ„ç›¸å¯¹äºæ—§çš„-Stack-æ¶æ„æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œæ”¹è¿›ï¼Ÿ"><a href="#React-Fiber-æ¶æ„ç›¸å¯¹äºæ—§çš„-Stack-æ¶æ„æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œæ”¹è¿›ï¼Ÿ" class="headerlink" title="React Fiber æ¶æ„ç›¸å¯¹äºæ—§çš„ Stack æ¶æ„æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œæ”¹è¿›ï¼Ÿ"></a>React Fiber æ¶æ„ç›¸å¯¹äºæ—§çš„ Stack æ¶æ„æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œæ”¹è¿›ï¼Ÿ</h2><ol><li>å¼‚æ­¥æ¸²æŸ“</li><li>é€’è¿›å¼æ›´æ–°ï¼š æ¸²æŸ“è¿›ç¨‹æ‹†åˆ†åä»»åŠ¡æ›´æ–°å•å…ƒæ›´å°ï¼Œå¯ä»¥é€šè¿‡ä¼˜å…ˆçº§ç®—æ³•æ§åˆ¶ä¼˜å…ˆåº¦å’Œé¡ºåºï¼Œä»¥æ›´åŠ ç»†è‡´çš„æ§åˆ¶æ›´æ–°çš„è¿‡ç¨‹ã€‚</li><li>æ–°çš„åè°ƒç®—æ³•ï¼š å°†ç»„ä»¶çš„æ›´æ–°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µreconciliationå’Œcommitï¼Œreconciliationé˜¶æ®µä¼šæ¯”è¾ƒå‰åä¸¤æ¬¡çš„æ›´æ–°çš„å·®å¼‚ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ›´æ–°æ ‘ï¼Œcommité˜¶æ®µå°†æ›´æ–°æ ‘æ˜ å°„åˆ°å®é™…çš„domæ ‘ä¸Šã€‚</li></ol><h2 id="React-Fiber-æ¶æ„æ˜¯å¦‚ä½•å®ç°å¼‚æ­¥æ¸²æŸ“çš„ï¼Ÿ"><a href="#React-Fiber-æ¶æ„æ˜¯å¦‚ä½•å®ç°å¼‚æ­¥æ¸²æŸ“çš„ï¼Ÿ" class="headerlink" title="React Fiber æ¶æ„æ˜¯å¦‚ä½•å®ç°å¼‚æ­¥æ¸²æŸ“çš„ï¼Ÿ"></a>React Fiber æ¶æ„æ˜¯å¦‚ä½•å®ç°å¼‚æ­¥æ¸²æŸ“çš„ï¼Ÿ</h2><p>Fiberæ¶æ„å®ç°å¼‚æ­¥æ¸²æŸ“çš„æ–¹å¼æ˜¯é€šè¿‡å¼•å…¥åè°ƒå™¨å’Œè°ƒåº¦å™¨æ¥å®ç°ã€‚fiberå°†æ¸²æŸ“ä»»åŠ¡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šreconciliationå’Œcommitã€‚recé˜¶æ®µçš„ä»»åŠ¡æ˜¯å¯¹vm treeè¿›è¡Œdiffï¼Œæ‰¾å‡ºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œcommité˜¶æ®µæ˜¯å°†æ›´æ–°è¿›è¡Œæ¸²æŸ“ã€‚</p><p>åœ¨recé˜¶æ®µï¼Œfiberé‡‡ç”¨äº†fiberNodeï¼Œæ¯ä¸ªfiberNodeå¯¹åº”ä¸€ä¸ªç»„ä»¶ï¼Œå…¶ä¸­åŒ…å«ç»„ä»¶çš„çŠ¶æ€ã€propsã€refsç­‰ä¿¡æ¯ã€‚fiberNodeä¹‹é—´é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥ï¼Œå½¢æˆfiber tree</p><p>åœ¨commité˜¶æ®µï¼Œfiberå¼•å…¥è°ƒåº¦å™¨Schedulerï¼Œå®ƒè´Ÿè´£æ ¹æ®ä¼˜å…ˆçº§å’Œè¿‡æœŸæ—¶é—´æ¥å†³å®šå“ªäº›fiberNodeå…ˆè¢«æ‰§è¡Œã€‚æ¯ä¸ªfiberNodeéƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§å’Œè¿‡æœŸæ—¶é—´ï¼Œè°ƒåº¦å™¨ä¼šæ ¹æ®ç®—æ³•è®¡ç®—fiberNodeçš„ä¼˜å…ˆçº§å’Œè¿‡æœŸæ—¶é—´ï¼Œç„¶åæ ¹æ®ä¼˜å…ˆçº§é¡ºåºæ‰§è¡Œä»»åŠ¡ã€‚</p><p>å¦‚æœä¸€ä¸ªFiberNodeåœ¨åè°ƒé˜¶æ®µæ›´æ–°æ—¶è¢«æ ‡è®°è¿‡æœŸï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è°ƒåº¦é˜¶æ®µä¼˜å…ˆæ‰§è¡Œã€‚å½“è°ƒåº¦å™¨åœ¨è°ƒåº¦æ—¶ï¼Œæ—¶é—´ç‰‡ç»“æŸäº†ï¼Œé‚£ä¹ˆå®ƒä¼šæŒ‚èµ·å½“å‰ä»»åŠ¡ï¼Œè¿”å›æ§åˆ¶æƒç»™æµè§ˆå™¨ï¼Œç­‰åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´ç‰‡å†ç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„ä»»åŠ¡ï¼Œå®ç°äº†å¼‚æ­¥æ¸²æŸ“çš„æ•ˆæœã€‚</p><h2 id="fiberä¸­çš„åŒå‘é“¾è¡¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–åŒå‘é“¾è¡¨-React"><a href="#fiberä¸­çš„åŒå‘é“¾è¡¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–åŒå‘é“¾è¡¨-React" class="headerlink" title="fiberä¸­çš„åŒå‘é“¾è¡¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–åŒå‘é“¾è¡¨(React)"></a>fiberä¸­çš„åŒå‘é“¾è¡¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–åŒå‘é“¾è¡¨(React)</h2><p>åœ¨fiberæ¶æ„ä¸­ï¼ŒåŒå‘é“¾è¡¨è¢«ç”¨æ¥è¡¨ç¤ºfiberèŠ‚ç‚¹çš„æ ‘å½¢ç»“æ„ï¼Œæ˜¯ä¸€ç§åŸºäºé“¾è¡¨ç»“æ„çš„æ•°æ®ç»“æ„ã€‚<br>åŒå‘é“¾è¡¨ç”±å¤šä¸ªfiberèŠ‚ç‚¹æ„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¿å­˜äº†ä¸€ä¸ªç»„ä»¶çš„ä¿¡æ¯å’Œå®ƒå­èŠ‚ç‚¹çš„å¼•ç”¨ã€‚åŒå‘é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«äº†å®ƒçš„å‰åèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™ä½¿å¾—åœ¨è¿›è¡Œåè°ƒç®—æ³•æ—¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è®¿é—®ç›¸é‚»èŠ‚ç‚¹ã€‚</p><p>åŒå‘é“¾è¡¨çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’Œç§»åŠ¨èŠ‚ç‚¹ï¼Œä½¿å¾—åœ¨è¿›è¡Œå¢é‡æ¸²æŸ“å’Œä¸­æ–­æ“ä½œæ—¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¿®æ”¹æ ‘çš„ç»“æ„ã€‚åŒå‘é“¾è¡¨è¿˜å¯ä»¥æ”¯æŒåŒå‘éå†ï¼Œè¿™ä½¿å¾—åœ¨è¿›è¡Œåè°ƒç®—æ³•æ—¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¿é—®ç›¸é‚»èŠ‚ç‚¹ã€‚å› ä¸ºfiberæ¶æ„éœ€è¦å°†æ¸²æŸ“ä»»åŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶ä¸”é€šè¿‡schedulerè¿›è¡Œä¼˜å…ˆçº§è°ƒåº¦ï¼Œæ¶‰åŠåˆ°ä»»åŠ¡çš„æ’å…¥ã€æ›´æ–°å’Œå¢åŠ ï¼Œå› æ­¤åŒå‘é“¾è¡¨çš„ä¼˜åŠ¿éå¸¸ç¬¦åˆfiberæ¶æ„ã€‚</p><h2 id="React-Fiber-æ¶æ„ä¸­çš„å·¥ä½œå•å…ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•ç»„ç»‡å’Œè°ƒåº¦çš„ï¼Ÿ"><a href="#React-Fiber-æ¶æ„ä¸­çš„å·¥ä½œå•å…ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•ç»„ç»‡å’Œè°ƒåº¦çš„ï¼Ÿ" class="headerlink" title="React Fiber æ¶æ„ä¸­çš„å·¥ä½œå•å…ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•ç»„ç»‡å’Œè°ƒåº¦çš„ï¼Ÿ"></a>React Fiber æ¶æ„ä¸­çš„å·¥ä½œå•å…ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬æ˜¯å¦‚ä½•ç»„ç»‡å’Œè°ƒåº¦çš„ï¼Ÿ</h2><p>å·¥ä½œå•å…ƒæ˜¯fiberNodeï¼Œfibernodeè¢«ç»„ç»‡ç§°ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªå•å…ƒã€‚fiberèŠ‚ç‚¹é‡‡ç”¨åŒå‘é“¾è¡¨æ¥ç»„ç»‡ï¼Œæ¯ä¸ªfibernodeåŒ…å«å½“å‰èŠ‚ç‚¹çš„çŠ¶æ€ã€å­èŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹çš„ä¿¡æ¯ã€‚åœ¨fiberæ¶æ„ä¸­ï¼Œreactä¼šé€šè¿‡reconcileç¡®å®šéœ€è¦è¢«æ‰§è¡Œçš„èŠ‚ç‚¹åŠå…¶ä¼˜å…ˆçº§ã€‚å½“fibernodeè¢«é€‰ä¸­æ—¶ï¼Œreactä¼šæ ¹æ®fibernodeè®°å½•çš„ä¿¡æ¯æ‰§è¡Œæ›´æ–°ã€‚</p><p>fiberèŠ‚ç‚¹çš„è°ƒåº¦æ˜¯é€šè¿‡reconcilerçš„æ¨¡å—å®Œæˆçš„ã€‚reconcilerä¼šæ ¹æ®fibernodeçš„çŠ¶æ€å’Œä¼˜å…ˆçº§æ¥ç¡®å®šé¡ºåºï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œé˜Ÿåˆ—ï¼Œreactçš„æ¸²æŸ“å¼•æ“ä¼šä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œï¼Œå½“ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ¸²æŸ“å¼•æ“ä¼šæ£€æŸ¥å½“å‰ä»»åŠ¡çš„ä¼˜å…ˆçº§ä»¥åŠæ˜¯å¦æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡éœ€è¦è¢«æ‰§è¡Œï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸­æ–­å½“å‰ä»»åŠ¡ï¼Œæ‰§è¡Œæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚</p><h2 id="React-Fiber-æ¶æ„ä¸­çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å¤„ç†å‰¯ä½œç”¨ï¼Ÿ"><a href="#React-Fiber-æ¶æ„ä¸­çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å¤„ç†å‰¯ä½œç”¨ï¼Ÿ" class="headerlink" title="React Fiber æ¶æ„ä¸­çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å¤„ç†å‰¯ä½œç”¨ï¼Ÿ"></a>React Fiber æ¶æ„ä¸­çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å¤„ç†å‰¯ä½œç”¨ï¼Ÿ</h2><p>å‰¯ä½œç”¨æ˜¯æŒ‡ä¸ç»„ä»¶æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œä¾‹å¦‚domæ“ä½œï¼Œå¼‚æ­¥æ“ä½œï¼ŒçŠ¶æ€ç­‰ã€‚<br>åœ¨fiberæ¶æ„ä¸­ï¼Œæ¯ä¸ªfibernodeéƒ½åŒ…å«effect listã€‚è¿™ä¸ªeffect listä¼šåœ¨fiber nodeå®Œæˆæ›´æ–°åï¼Œè¢«ä¼ é€’ç»™çˆ¶èŠ‚ç‚¹ï¼Œæœ€åä¼ é€’ç»™æ ¹èŠ‚ç‚¹ï¼Œæœ€åå½¢æˆä¸€ä¸ªeffecté“¾è¡¨ï¼Œè¿™ä¸ªé“¾è¡¨åŒ…å«æ‰€æœ‰éœ€è¦è¿›è¡Œçš„å‰¯ä½œç”¨æ“ä½œã€‚effecté“¾è¡¨åŒæ ·æ˜¯é€šè¿‡Scheduleræ¨¡å—æ ¹æ®ä¼˜å…ˆçº§ä¾æ¬¡å¤„ç†æ¯ä¸ªfibernodeå®Œæˆçš„ã€‚<br>åœ¨fiberæ¶æ„ä¸­ï¼Œä¸ºäº†é¿å…å¤šä½™çš„æ“ä½œå’Œè®¡ç®—ï¼Œé€šå¸¸ä¼šé‡‡å–åˆå¹¶å‰¯ä½œç”¨ï¼Œæ‰¹é‡æ›´æ–°ç­‰æ“ä½œæ¥å¤„ç†å‰¯ä½œç”¨ã€‚<br>å…·ä½“å°±æ˜¯ä¸€ä¸ªuseeffectä¸­åŒ…å«å¤šä¸ªå¼‚æ­¥æ“ä½œç­‰ã€‚æˆ–è€…é‡‡ç”¨è‡ªå®šä¹‰hookï¼Œå¯¹å‰¯ä½œç”¨è¿›è¡Œç®¡ç†å’Œæ§åˆ¶ã€‚</p><h2 id="typeå’Œinterfaceçš„åŒºåˆ«"><a href="#typeå’Œinterfaceçš„åŒºåˆ«" class="headerlink" title="typeå’Œinterfaceçš„åŒºåˆ«"></a>typeå’Œinterfaceçš„åŒºåˆ«</h2><h2 id="commitçš„æ ¼å¼æ£€æŸ¥é…ç½®å¦‚ä½•åš"><a href="#commitçš„æ ¼å¼æ£€æŸ¥é…ç½®å¦‚ä½•åš" class="headerlink" title="commitçš„æ ¼å¼æ£€æŸ¥é…ç½®å¦‚ä½•åš"></a>commitçš„æ ¼å¼æ£€æŸ¥é…ç½®å¦‚ä½•åš</h2><h2 id="hskyå¦‚ä½•è°ƒç”¨é’©å­"><a href="#hskyå¦‚ä½•è°ƒç”¨é’©å­" class="headerlink" title="hskyå¦‚ä½•è°ƒç”¨é’©å­"></a>hskyå¦‚ä½•è°ƒç”¨é’©å­</h2><h2 id="å¦‚æœé¡µé¢åŠ è½½å®Œæˆåï¼Œé€šè¿‡ref-current-ä¿®æ”¹é¡µé¢ä¼šæ€ä¹ˆæ ·"><a href="#å¦‚æœé¡µé¢åŠ è½½å®Œæˆåï¼Œé€šè¿‡ref-current-ä¿®æ”¹é¡µé¢ä¼šæ€ä¹ˆæ ·" class="headerlink" title="å¦‚æœé¡µé¢åŠ è½½å®Œæˆåï¼Œé€šè¿‡ref.current ä¿®æ”¹é¡µé¢ä¼šæ€ä¹ˆæ ·"></a>å¦‚æœé¡µé¢åŠ è½½å®Œæˆåï¼Œé€šè¿‡ref.current ä¿®æ”¹é¡µé¢ä¼šæ€ä¹ˆæ ·</h2><h2 id="å°è£…è¿‡ä»€ä¹ˆhook"><a href="#å°è£…è¿‡ä»€ä¹ˆhook" class="headerlink" title="å°è£…è¿‡ä»€ä¹ˆhook"></a>å°è£…è¿‡ä»€ä¹ˆhook</h2><h2 id="ç”¨hooksç¢°åˆ°è¿‡ä»€ä¹ˆé—®é¢˜"><a href="#ç”¨hooksç¢°åˆ°è¿‡ä»€ä¹ˆé—®é¢˜" class="headerlink" title="ç”¨hooksç¢°åˆ°è¿‡ä»€ä¹ˆé—®é¢˜"></a>ç”¨hooksç¢°åˆ°è¿‡ä»€ä¹ˆé—®é¢˜</h2><h2 id="å¦‚æœé¡µé¢éœ€è¦é”€æ¯ä¸€ä¸ªç»„ä»¶æ€ä¹ˆå¤„ç†"><a href="#å¦‚æœé¡µé¢éœ€è¦é”€æ¯ä¸€ä¸ªç»„ä»¶æ€ä¹ˆå¤„ç†" class="headerlink" title="å¦‚æœé¡µé¢éœ€è¦é”€æ¯ä¸€ä¸ªç»„ä»¶æ€ä¹ˆå¤„ç†"></a>å¦‚æœé¡µé¢éœ€è¦é”€æ¯ä¸€ä¸ªç»„ä»¶æ€ä¹ˆå¤„ç†</h2><h2 id="äº‹ä»¶å¾ªç¯ä»‹ç»"><a href="#äº‹ä»¶å¾ªç¯ä»‹ç»" class="headerlink" title="äº‹ä»¶å¾ªç¯ä»‹ç»"></a>äº‹ä»¶å¾ªç¯ä»‹ç»</h2><h2 id="å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€åŒæ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåº"><a href="#å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€åŒæ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåº" class="headerlink" title="å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€åŒæ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåº"></a>å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€åŒæ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåº</h2><h2 id="å®ä»»åŠ¡æœ‰å“ªäº›"><a href="#å®ä»»åŠ¡æœ‰å“ªäº›" class="headerlink" title="å®ä»»åŠ¡æœ‰å“ªäº›"></a>å®ä»»åŠ¡æœ‰å“ªäº›</h2><h2 id="å¦‚æœä¸€ä¸ªåˆ—è¡¨æœ‰10000æ¡æ•°æ®ï¼Œè¿™ä¸ªæ€ä¹ˆè¿›è¡Œå±•ç¤ºï¼ˆperformanceï¼‰"><a href="#å¦‚æœä¸€ä¸ªåˆ—è¡¨æœ‰10000æ¡æ•°æ®ï¼Œè¿™ä¸ªæ€ä¹ˆè¿›è¡Œå±•ç¤ºï¼ˆperformanceï¼‰" class="headerlink" title="å¦‚æœä¸€ä¸ªåˆ—è¡¨æœ‰10000æ¡æ•°æ®ï¼Œè¿™ä¸ªæ€ä¹ˆè¿›è¡Œå±•ç¤ºï¼ˆperformanceï¼‰"></a>å¦‚æœä¸€ä¸ªåˆ—è¡¨æœ‰10000æ¡æ•°æ®ï¼Œè¿™ä¸ªæ€ä¹ˆè¿›è¡Œå±•ç¤ºï¼ˆperformanceï¼‰</h2><h2 id="æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹çš„å€¼"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹çš„å€¼" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹çš„å€¼"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹çš„å€¼</h2><h2 id="é¡¹ç›®ä¸­åŠ¨æ€è·¯ç”±å’Œç™»é™†æ‹¦æˆªæŒ‰é’®å¦‚ä½•å®ç°"><a href="#é¡¹ç›®ä¸­åŠ¨æ€è·¯ç”±å’Œç™»é™†æ‹¦æˆªæŒ‰é’®å¦‚ä½•å®ç°" class="headerlink" title="é¡¹ç›®ä¸­åŠ¨æ€è·¯ç”±å’Œç™»é™†æ‹¦æˆªæŒ‰é’®å¦‚ä½•å®ç°"></a>é¡¹ç›®ä¸­åŠ¨æ€è·¯ç”±å’Œç™»é™†æ‹¦æˆªæŒ‰é’®å¦‚ä½•å®ç°</h2><h2 id="corsè¯·æ±‚ä¸ºå•¥ä¼šæœ‰ä¸€ä¸ªoption"><a href="#corsè¯·æ±‚ä¸ºå•¥ä¼šæœ‰ä¸€ä¸ªoption" class="headerlink" title="corsè¯·æ±‚ä¸ºå•¥ä¼šæœ‰ä¸€ä¸ªoption"></a>corsè¯·æ±‚ä¸ºå•¥ä¼šæœ‰ä¸€ä¸ªoption</h2><h2 id="jså¤šç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„"><a href="#jså¤šç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„" class="headerlink" title="jså¤šç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„"></a>jså¤šç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„</h2><h2 id="å•ç‚¹ç™»å½•æ€ä¹ˆåšï¼Œå¦‚ä½•å°†å¤šä¸ªå•ç‚¹ç™»å½•æ•´åˆåˆ°ä¸€ä¸ªé¡¹ç›®"><a href="#å•ç‚¹ç™»å½•æ€ä¹ˆåšï¼Œå¦‚ä½•å°†å¤šä¸ªå•ç‚¹ç™»å½•æ•´åˆåˆ°ä¸€ä¸ªé¡¹ç›®" class="headerlink" title="å•ç‚¹ç™»å½•æ€ä¹ˆåšï¼Œå¦‚ä½•å°†å¤šä¸ªå•ç‚¹ç™»å½•æ•´åˆåˆ°ä¸€ä¸ªé¡¹ç›®"></a>å•ç‚¹ç™»å½•æ€ä¹ˆåšï¼Œå¦‚ä½•å°†å¤šä¸ªå•ç‚¹ç™»å½•æ•´åˆåˆ°ä¸€ä¸ªé¡¹ç›®</h2><h2 id="å›¾ç‰‡å¤ªå¤§ä¸Šä¼ å¡é¡¿å¦‚ä½•ä¼˜åŒ–"><a href="#å›¾ç‰‡å¤ªå¤§ä¸Šä¼ å¡é¡¿å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="å›¾ç‰‡å¤ªå¤§ä¸Šä¼ å¡é¡¿å¦‚ä½•ä¼˜åŒ–"></a>å›¾ç‰‡å¤ªå¤§ä¸Šä¼ å¡é¡¿å¦‚ä½•ä¼˜åŒ–</h2><h2 id="ç™»å½•ç»„ä»¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘ä»€ä¹ˆ"><a href="#ç™»å½•ç»„ä»¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘ä»€ä¹ˆ" class="headerlink" title="ç™»å½•ç»„ä»¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘ä»€ä¹ˆ"></a>ç™»å½•ç»„ä»¶è®¾è®¡æ—¶éœ€è¦è€ƒè™‘ä»€ä¹ˆ</h2><h2 id="ç™»å½•ç»„ä»¶å‰ç«¯å’Œåç«¯å¦‚ä½•é…åˆï¼ŒoAUTH1ï¼Œ2"><a href="#ç™»å½•ç»„ä»¶å‰ç«¯å’Œåç«¯å¦‚ä½•é…åˆï¼ŒoAUTH1ï¼Œ2" class="headerlink" title="ç™»å½•ç»„ä»¶å‰ç«¯å’Œåç«¯å¦‚ä½•é…åˆï¼ŒoAUTH1ï¼Œ2"></a>ç™»å½•ç»„ä»¶å‰ç«¯å’Œåç«¯å¦‚ä½•é…åˆï¼ŒoAUTH1ï¼Œ2</h2><h2 id="å¦‚ä½•åšä¸€ä¸ªä¸Šä¼ ç»„ä»¶ï¼Œreactï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯é…åˆä»€ä¹ˆ"><a href="#å¦‚ä½•åšä¸€ä¸ªä¸Šä¼ ç»„ä»¶ï¼Œreactï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯é…åˆä»€ä¹ˆ" class="headerlink" title="å¦‚ä½•åšä¸€ä¸ªä¸Šä¼ ç»„ä»¶ï¼Œreactï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯é…åˆä»€ä¹ˆ"></a>å¦‚ä½•åšä¸€ä¸ªä¸Šä¼ ç»„ä»¶ï¼Œreactï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯é…åˆä»€ä¹ˆ</h2><h2 id="å¦‚ä½•åœ¨reacté¡¹ç›®ä¸­åšæƒé™æ§åˆ¶"><a href="#å¦‚ä½•åœ¨reacté¡¹ç›®ä¸­åšæƒé™æ§åˆ¶" class="headerlink" title="å¦‚ä½•åœ¨reacté¡¹ç›®ä¸­åšæƒé™æ§åˆ¶"></a>å¦‚ä½•åœ¨reacté¡¹ç›®ä¸­åšæƒé™æ§åˆ¶</h2><h2 id="ä¸åŒæºä¸åŒåŸŸçš„é¡µé¢æ•°æ®å¦‚ä½•å…±äº«"><a href="#ä¸åŒæºä¸åŒåŸŸçš„é¡µé¢æ•°æ®å¦‚ä½•å…±äº«" class="headerlink" title="ä¸åŒæºä¸åŒåŸŸçš„é¡µé¢æ•°æ®å¦‚ä½•å…±äº«"></a>ä¸åŒæºä¸åŒåŸŸçš„é¡µé¢æ•°æ®å¦‚ä½•å…±äº«</h2><h2 id="axioså°è£…éœ€è¦è€ƒè™‘ä»€ä¹ˆ"><a href="#axioså°è£…éœ€è¦è€ƒè™‘ä»€ä¹ˆ" class="headerlink" title="axioså°è£…éœ€è¦è€ƒè™‘ä»€ä¹ˆ"></a>axioså°è£…éœ€è¦è€ƒè™‘ä»€ä¹ˆ</h2><h2 id="å¦‚ä½•å®ç°ä¸€ä¸ªnew"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªnew" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªnew"></a>å¦‚ä½•å®ç°ä¸€ä¸ªnew</h2><h2 id="å°è£…çš„æŒ‰é’®æƒé™ç»„ä»¶å¦‚ä½•å®ç°"><a href="#å°è£…çš„æŒ‰é’®æƒé™ç»„ä»¶å¦‚ä½•å®ç°" class="headerlink" title="å°è£…çš„æŒ‰é’®æƒé™ç»„ä»¶å¦‚ä½•å®ç°"></a>å°è£…çš„æŒ‰é’®æƒé™ç»„ä»¶å¦‚ä½•å®ç°</h2><h2 id="æ•°æ®ä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨çŠ¶æ€ç®¡ç†"><a href="#æ•°æ®ä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨çŠ¶æ€ç®¡ç†" class="headerlink" title="æ•°æ®ä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨çŠ¶æ€ç®¡ç†"></a>æ•°æ®ä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™å®šä¹‰åœ¨çŠ¶æ€ç®¡ç†</h2><h2 id="é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°"><a href="#é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°" class="headerlink" title="é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°"></a>é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°</h2><h2 id="foreachå’Œmapçš„åŒºåˆ«"><a href="#foreachå’Œmapçš„åŒºåˆ«" class="headerlink" title="foreachå’Œmapçš„åŒºåˆ«"></a>foreachå’Œmapçš„åŒºåˆ«</h2><ol start="4"><li>æµè§ˆå™¨ç›¸å…³</li></ol><ul><li>è§£é‡Šæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ï¼ŒåŒ…æ‹¬å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ä¸¤ç§æ–¹å¼çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>è§£é‡Šæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ˆEvent Loopï¼‰ï¼Œå¹¶è§£é‡Šå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡çš„æ¦‚å¿µ</li><li>è§£é‡Šè·¨åŸŸé—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ JSONPã€CORSã€ä»£ç†ç­‰æ–¹å¼çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>è§£é‡Š HTTPS çš„ä½¿ç”¨å’ŒåŸç†ï¼ŒåŒ…æ‹¬å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ä¸¤ç§åŠ å¯†æ–¹å¼çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>ç®€è¿° Web Worker çš„ä½¿ç”¨æ–¹æ³•å’Œä½œç”¨ï¼Œä»¥åŠä¸ä¸»çº¿ç¨‹çš„é€šä¿¡æ–¹å¼</li></ul><ol start="5"><li>å·¥ç¨‹åŒ–ç›¸å…³</li></ol><ul><li>è§£é‡Š Webpack çš„åŸºæœ¬åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ Loader å’Œ Plugin çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>ç®€è¿° Git çš„åŸºæœ¬ä½¿ç”¨å’ŒåŸç†ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬æ§åˆ¶ã€åˆ†æ”¯ç®¡ç†ç­‰æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>è§£é‡Š ESLint å’Œ Prettier çš„ä½¿ç”¨å’ŒåŸç†ï¼ŒåŒ…æ‹¬ä»£ç é£æ ¼çš„æ£€æŸ¥å’Œè‡ªåŠ¨æ ¼å¼åŒ–çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li><li>ç®€è¿°æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä»£ç å‹ç¼©ã€å›¾ç‰‡</li></ul><ol start="6"><li>other</li></ol><ul><li>HTTP åè®®çš„åŸºæœ¬åŸç†å’Œä½¿ç”¨åœºæ™¯</li><li><ul><li>ç®€è¿° HTTP åè®®çš„åŸºæœ¬ç»“æ„å’Œç‰¹ç‚¹ï¼ŒåŒ…æ‹¬è¯·æ±‚æ–¹æ³•ã€çŠ¶æ€ç ã€è¯·æ±‚å¤´ã€å“åº”å¤´ç­‰å†…å®¹</li></ul></li><li><ul><li>è§£é‡Š HTTP å’Œ HTTPS çš„åŒºåˆ«åŠå…¶ä½¿ç”¨åœºæ™¯ï¼Œåˆ—ä¸¾ä¸€äº›å¸¸è§çš„å®‰å…¨é—®é¢˜å¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆ</li></ul></li><li><ul><li>ç®€è¿° HTTP çš„ç¼“å­˜æœºåˆ¶ï¼ŒåŒ…æ‹¬å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li></ul></li><li><ul><li>è§£é‡Š HTTP ä¸­çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ HTTP&#x2F;1.x å’Œ HTTP&#x2F;2 ä¸­çš„å®ç°æ–¹å¼</li></ul></li><li>å‰ç«¯å®‰å…¨é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆ</li><li><ul><li>è§£é‡Š XSSã€CSRFã€DDoS æ”»å‡»çš„æ¦‚å¿µåŠå…¶é˜²èŒƒæ–¹æ³•</li></ul></li><li><ul><li>ç®€è¿° CSP çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†ï¼ŒåŒ…æ‹¬é™åˆ¶å†…å®¹å®‰å…¨ç­–ç•¥çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li></ul></li><li><ul><li>è§£é‡Š JWT çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†ï¼ŒåŒ…æ‹¬ token çš„ç”Ÿæˆå’ŒéªŒè¯è¿‡ç¨‹</li></ul></li><li><ul><li>è§£é‡Š CORS çš„æ¦‚å¿µåŠå…¶ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å‰åç«¯å¦‚ä½•é…åˆå®ç°è·¨åŸŸè®¿é—®</li></ul></li><li>å‰ç«¯æµ‹è¯•æ–¹æ³•åŠå…¶æ¡†æ¶</li><li><ul><li>ç®€è¿°å‰ç«¯æµ‹è¯•çš„å¸¸è§æ–¹æ³•ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€UI æµ‹è¯•ç­‰æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li></ul></li><li><ul><li>ç®€è¿° Jest çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†ï¼ŒåŒ…æ‹¬é’ˆå¯¹ React ç»„ä»¶çš„æµ‹è¯•æ–¹æ³•å’Œæ–­è¨€åº“çš„ä½¿ç”¨</li></ul></li><li><ul><li>è§£é‡Š Cypress çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•å’Œæ¨¡æ‹Ÿç”¨æˆ·äº¤äº’çš„æ–¹æ³•</li></ul></li><li><ul><li>è§£é‡Š Selenium çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™<br>Node.js çš„åŸºæœ¬ä½¿ç”¨å’ŒåŸç†</li></ul></li><li><ul><li>ç®€è¿° Node.js çš„åŸºæœ¬åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•æ­å»ºç¯å¢ƒå’Œç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç </li></ul></li><li><ul><li>è§£é‡Š Node.js ä¸­çš„æ¨¡å—åŒ–å’ŒåŒ…ç®¡ç†çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ npm å’Œ yarn çš„ä½¿ç”¨æ–¹æ³•</li></ul></li><li><ul><li>ç®€è¿° Node.js ä¸­çš„å¼‚æ­¥ç¼–ç¨‹å’Œäº‹ä»¶å¾ªç¯çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ Promise å’Œ async&#x2F;await</li></ul></li><li><ul><li>è§£é‡Š Node.js ä¸­çš„æµå’Œç¼“å†²åŒºçš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œæ–‡ä»¶è¯»å†™å’Œç½‘ç»œé€šä¿¡</li></ul></li><li>æ•°æ®åº“çš„åŸºæœ¬çŸ¥è¯†å’Œä½¿ç”¨</li><li><ul><li>ç®€è¿°å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“çš„æ¦‚å¿µå’ŒåŒºåˆ«ï¼ŒåŒ…æ‹¬å„è‡ªçš„ä½¿ç”¨åœºæ™¯å’Œä¼˜ç¼ºç‚¹</li></ul></li><li><ul><li>è§£é‡Š SQL çš„åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬æ•°æ®è¡¨çš„åˆ›å»ºå’ŒæŸ¥è¯¢è¯­å¥çš„ç¼–å†™</li></ul></li><li><ul><li>ç®€è¿° MongoDB çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œæ–‡æ¡£è¯»å†™å’Œæ•°æ®èšåˆ</li></ul></li><li><ul><li>è§£é‡Š Redis çš„æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œæ•°æ®å­˜å‚¨å’Œç¼“å­˜ç®¡ç†</li></ul></li><li><ul><li>å¾®æœåŠ¡çš„ä½¿ç”¨å’ŒåŸç†</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-v3.7</title>
      <link href="/2023/02/11/flutterv3/"/>
      <url>/2023/02/11/flutterv3/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://juejin.cn/post/7192468840016511034">https://juejin.cn/post/7192468840016511034</a></p></blockquote><p>è¿™äº›åªæ˜¯ 3.7 é‡Œ DevTools çš„å‡ ä¸ªäº®ç‚¹ï¼Œ 3.7 ç‰ˆæœ¬è¿˜åŒ…å«å‡ ä¸ªé”™è¯¯ä¿®å¤å’Œæ›´å¤šåŠŸèƒ½æ”¹è¿›ï¼ŒåŒ…æ‹¬ Inspectorã€Network profiler å’Œ CPU profiler çš„ä¸€äº›é‡è¦é”™è¯¯ä¿®å¤</p><h2 id="Changes"><a href="#Changes" class="headerlink" title="Changes"></a>Changes</h2><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230211142513nZM8db.png?token=ALJ6LAU3SZV3QHSHW4KPLQTD442QQ" alt="Picsee-20230211142513.png"></p><ol><li>Configuration of contextmenu can be changed by contextmenu and that can return any component if u want, including the context by platform.</li></ol>]]></content>
      
      
      <categories>
          
          <category> flutter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
            <tag> ios &amp; android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TalentOrg&#39; Interview (remote)</title>
      <link href="/2023/01/28/interview-of-remote-job-talentorg/"/>
      <url>/2023/01/28/interview-of-remote-job-talentorg/</url>
      
        <content type="html"><![CDATA[<h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><div class="markdown-question markdown-question-snippet text-left"><p>You are keeping score for a baseball game with strange rules. The game consists of several rounds, where the scores of past rounds may affect future rounds' scores.</p><p>At the beginning of the game, you start with an empty record. You are given a list of strings ops, where ops[i] is the ith operation you must apply to the record and is one of the following:</p><ul><li>An integer x - Record a new score of x.</li><li>"+" - Record a new score that is the sum of the previous two scores. It is guaranteed there will always be two previous scores.</li><li>"D" - Record a new score that is double the previous score. It is guaranteed there will always be a previous score.</li><li>"C" - Invalidate the previous score, removing it from the record. It is guaranteed there will always be a previous score.<br>Return the sum of all the scores on the record. The test cases are generated so that the answer fits in a 32-bit integer.</li></ul><pre><code>Example 1:<p>Input: ops &#x3D; [â€œ5â€,â€2â€,â€Câ€,â€Dâ€,â€+â€]<br>Output: 30<br>Explanation:<br>â€œ5â€ - Add 5 to the record, record is now [5].<br>â€œ2â€ - Add 2 to the record, record is now [5, 2].<br>â€œCâ€ - Invalidate and remove the previous score, record is now [5].<br>â€œDâ€ - Add 2 * 5 &#x3D; 10 to the record, record is now [5, 10].<br>â€œ+â€ - Add 5 + 10 &#x3D; 15 to the record, record is now [5, 10, 15].<br>The total sum is 5 + 10 + 15 &#x3D; 30.<br></code></pre></p><pre><code>Example 2:Input: ops = ["5","-2","4","C","D","9","+","+"]Output: 27Explanation:"5" - Add 5 to the record, record is now [5]."-2" - Add -2 to the record, record is now [5, -2]."4" - Add 4 to the record, record is now [5, -2, 4]."C" - Invalidate and remove the previous score, record is now [5, -2]."D" - Add 2 * -2 = -4 to the record, record is now [5, -2, -4]."9" - Add 9 to the record, record is now [5, -2, -4, 9]."+" - Add -4 + 9 = 5 to the record, record is now [5, -2, -4, 9, 5]."+" - Add 9 + 5 = 14 to the record, record is now [5, -2, -4, 9, 5, 14].The total sum is 5 + -2 + -4 + 9 + 5 + 14 = 27.</code></pre><pre><code>Example 3:Input: ops = ["1","C"]Output: 0Explanation:"1" - Add 1 to the record, record is now [1]."C" - Invalidate and remove the previous score, record is now [].Since the record is empty, the total sum is 0.</code></pre><p>Constraints:</p><p>1 &lt;= ops.length &lt;= 1000<br>ops[i] is "C", "D", "+", or a string representing an integer in the range [-3 * 104, 3 * 104].<br>For operation "+", there will always be at least two previous scores on the record.<br>For operations "C" and "D", there will always be at least one previous score on the record.</p></div><h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><pre class="line-numbers language-function" data-language="function"><div class="caption"><span>solution(a) &#123;</span></div><code class="language-function">  &#x2F;&#x2F; Write your answer here  if (!Array.isArray(a) || a.length &lt;&#x3D; 0) return 0;  for (let i &#x3D;0; i &lt; a.length; i++) &#123;    let curStr &#x3D; (a[i]).toString().toUpperCase();    if(isNaN(+curStr))&#123;      switch (curStr)&#123;        case &#39;C&#39;:          if(i &gt; 0)&#123;            a.splice(i-1, 2)          &#125;;        case &#39;D&#39;:          if(i &gt;&#x3D; 1)&#123;            let nextNum &#x3D; parseInt(a[i-2]) * 2            a.splice(i-1,1,nextNum)          &#125;;        case &#39;+&#39;:          if(i &gt;&#x3D; 2)&#123;            let nextNum &#x3D; parseInt(a[i-1]) + parseInt(a[i-2])            a.splice(i,1,nextNum)          &#125;;      &#125;    &#125;  &#125;  function sum(arr) &#123;    let s &#x3D; 0;    arr.forEach(function(val, idx, arr) &#123;      s +&#x3D; parseInt(val);    &#125;, 0);    return s;  &#125;;  return sum(a)&#125;&#x2F;&#x2F; DO NOT DELETEmodule.exports &#x3D; &#123;  solution&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>To be honest, I failed this interview, but I think it also could have been recorded and realized that I have to work on the Algorithms.</p>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Remote Job </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode</title>
      <link href="/2021/03/21/leetcode/"/>
      <url>/2021/03/21/leetcode/</url>
      
        <content type="html"><![CDATA[<h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h1><h2 id="Best-Time-to-Buy-and-Sell-Stock-II"><a href="#Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="Best Time to Buy and Sell Stock II"></a>Best Time to Buy and Sell Stock II</h2><h3 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h3><p>You are given an integer array prices where prices[i] is the price of a given stock on the ith day.</p><p>On each day, you may decide to buy and&#x2F;or sell the stock. You can only hold at most one share of the stock at any time. However, you can buy it then immediately sell it on the same day.</p><p>Find and return the maximum profit you can achieve.</p><p>Example 1:</p><p>Input: prices &#x3D; [7,1,5,3,6,4]<br>Output: 7<br>Explanation: Buy on day 2 (price &#x3D; 1) and sell on day 3 (price &#x3D; 5), profit &#x3D; 5-1 &#x3D; 4.<br>Then buy on day 4 (price &#x3D; 3) and sell on day 5 (price &#x3D; 6), profit &#x3D; 6-3 &#x3D; 3.<br>Total profit is 4 + 3 &#x3D; 7.<br>Example 2:</p><p>Input: prices &#x3D; [1,2,3,4,5]<br>Output: 4<br>Explanation: Buy on day 1 (price &#x3D; 1) and sell on day 5 (price &#x3D; 5), profit &#x3D; 5-1 &#x3D; 4.<br>Total profit is 4.<br>Example 3:</p><p>Input: prices &#x3D; [7,6,4,3,1]<br>Output: 0<br>Explanation: There is no way to make a positive profit, so we never buy the stock to achieve the maximum profit of 0.</p><p>Constraints:</p><p>1 &lt;&#x3D; prices.length &lt;&#x3D; 3 * 104<br>0 &lt;&#x3D; prices[i] &lt;&#x3D; 104</p><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230202012457IZJI9K.png?token=ALJ6LATTRHPQCZO5JBBPJN3D3KQKO" alt="Picsee-20230202012457.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param &#123;number[]&#125; prices * @return &#123;number&#125; */</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> valley <span class="token operator">=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> peak <span class="token operator">=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> maxProfit <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// point continues to increase if current prices large than next prices. until we fount the lowest price.</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> prices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        valley <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>valley<span class="token punctuation">,</span> <span class="token string">'valley'</span><span class="token punctuation">)</span>        <span class="token comment">// point continues to increase if current prices small than next prices. until we fount the highest price.</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> prices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        peak <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>peak<span class="token punctuation">,</span><span class="token string">'peak'</span><span class="token punctuation">)</span>        <span class="token comment">// add all of the difference between peak and valley</span>        maxProfit <span class="token operator">+=</span> peak <span class="token operator">-</span> valley            <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> maxProfit<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/wannaSpring/snapshot/main/Picsee/Picsee-20230202012530f3xrUj.png?token=ALJ6LAWMIMJ4BM4GK5H3YSDD3KQMQ" alt="Picsee-20230202012530.png"></p><blockquote><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/solutions/127712/official-solution/">https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/solutions/127712/official-solution/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The understod of the dom</title>
      <link href="/2020/02/04/dom/"/>
      <url>/2020/02/04/dom/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://blog.poetries.top/browser-working-principle/guide/part5/lesson22.html#dom-%E6%A0%91%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90">https://blog.poetries.top/browser-working-principle/guide/part5/lesson22.html#dom-%E6%A0%91%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HOC</title>
      <link href="/2020/01/28/hoc/"/>
      <url>/2020/01/28/hoc/</url>
      
        <content type="html"><![CDATA[<h1 id="HOC"><a href="#HOC" class="headerlink" title="HOC"></a>HOC</h1><h2 id="Whatâ€™s-HOC"><a href="#Whatâ€™s-HOC" class="headerlink" title="Whatâ€™s HOC"></a>Whatâ€™s HOC</h2><p>High of components is react component package with another react component. so thatâ€™s just a wrapper around react component.<br>such as the function model , we also call Class Factory Methods, we can use haskell to describe that</p><pre class="line-numbers language-none"><code class="language-none">HocFactory:: W: React.Compoent &#x3D;&gt; E: React.Component<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>W(WrapperComponent) refer to component has been wrapped.<br>E(EnhancedComponent) refers to a new HOC that returns a type of React.</p><p>Parcel definection have two different meanings.</p><ol><li>Props Proxy: HOC operates on props passed to WrapperComponent W.</li><li>Inheritance Inversion: HOC extends WrappeerCompoent W.</li></ol><h2 id="HOC-Factory-implementation-methods"><a href="#HOC-Factory-implementation-methods" class="headerlink" title="HOC Factory implementation methods"></a>HOC Factory implementation methods</h2><p>In this section, we will describe the implementation for the HOC factory.</p><h3 id="Props-Proxy"><a href="#Props-Proxy" class="headerlink" title="Props Proxy"></a>Props Proxy</h3><p>The simple implementation of Props Proxy</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ppHOC</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">PP</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>The main thing here is that the Hoc returns a React element of type WrappedComponent in the render method, and we also pass in the props  recieved by the HOC, which is where name <b>Props Proxy</b> comes from.</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span> <span class="token comment">// equal </span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>Both create a React Element for rendering in a reconciliation process within React. If you want to learn more about React Elements vs Components, see this article by Dan Abramov, and for more information on the reconciliation process, see the documentation.</p><p>(Note: the reconciliation process can be understood as the process within React of synchronising the virtual DOM to the real DOM, including comparing the old and new virtual DOM and calculating the minimum DOM operation)</p><h4 id="The-reconciliation-process"><a href="#The-reconciliation-process" class="headerlink" title="The reconciliation process"></a>The reconciliation process</h4><p>reconciliation process can be understood that unifies behaviour, and the HOC is an implementation based on this idea.</p><h5 id="Reconciliation-process-in-react"><a href="#Reconciliation-process-in-react" class="headerlink" title="Reconciliation process in react"></a>Reconciliation process in react</h5><p>The reconciliation process is understood as the process within React of synchronising the virtual DOM to the real DOM, including comparison of the old and new virtual DOM and calculation of the minimum DOM operation.</p><h2 id="What-can-i-do-with-Props-proxy"><a href="#What-can-i-do-with-Props-proxy" class="headerlink" title="What can i do with Props proxy"></a>What can i do with Props proxy</h2><ul><li>Manipulate props</li><li>Access to component instance by Refs</li><li>Extract state</li><li>Wrapping wrappedCompoent with other components</li></ul><h3 id="Manipulate-props"><a href="#Manipulate-props" class="headerlink" title="Manipulate props"></a>Manipulate props</h3><p>U can delete, add or change props that are passed to WrappedComponent.</p><blockquote><p>When u delete props, u must to be careful, because delete options will destroy the WrappedComponent.</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ppHOC</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">PP</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">user</span><span class="token operator">:</span> currentLoggedInUser      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span><span class="token operator">...</span>newProps<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Access-to-component-instance-by-refs"><a href="#Access-to-component-instance-by-refs" class="headerlink" title="Access to component instance by refs"></a>Access to component instance by refs</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">refsHOC</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">RefsHOC</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>    <span class="token function">proc</span><span class="token punctuation">(</span><span class="token parameter">wrappedComponentInstance</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      wrappedComponentInstance<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">proc</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span>props<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Extract-state"><a href="#Extract-state" class="headerlink" title="Extract state"></a>Extract state</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ppHOC</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">PP</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>onNameChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onNameChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token function">onNameChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span>          <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onNameChange        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span><span class="token operator">...</span>newProps<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>uses example</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">@ppHOC<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"name"</span> <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>For more information on the regular bi-directional binding HOC please click <a herf='https://link.zhihu.com/?target=https%3A//github.com/franleplant/react-hoc-examples/blob/master/pp_state.js'>link</a></p></blockquote><h3 id="Wrapping-wrappedComponent-with-other-components"><a href="#Wrapping-wrappedComponent-with-other-components" class="headerlink" title="Wrapping wrappedComponent with other components"></a>Wrapping wrappedComponent with other components</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ppHOC</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">PP</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">&#123;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">'block'</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">></span>          <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">&#125;</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><b>When u readding all of the content, u must know HOC is pure compoent with no side effects. if u want to use HOC to solve repeat tasks, u should create a bit of independency HOC.The HOC should be regular and no-effects.when u need create a completely component, u can combine two or more HOC.</b>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
